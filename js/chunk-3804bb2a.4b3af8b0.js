(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3804bb2a"],{"2bfd":function(e,t,s){},"33dc":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{attrs:{column:""}},[s("v-card",{attrs:{flat:"",color:"transparent"}},[s("v-card-title",[e._v("Каталог релизов")]),s("v-card-subtitle",[e._v("Вы можете выбрать жанры и года для более тонкой настройки списка релизов")])],1),e.settings?s("filters",{staticClass:"mb-2"}):e._e(),s("toolbar",{staticClass:"mb-2",attrs:{settings:e.settings},on:{"update:settings":function(t){e.settings=t},reload:e.showReleases}}),s("div",{staticClass:"my-2"},[s("releases",{attrs:{items:e._items}}),e._loading?s("loader",{attrs:{perPage:e._perPage}}):e._e()],1),e._items&&e._items.length>0&&e.hasMoreItems?s("v-btn",{staticClass:"grey darken-4 shrink",attrs:{block:"",text:""},on:{click:e.loadReleases}},[e._v(" Показать еще ")]):e._e()],1)},i=[],n=(s("b0c0"),s("96cf"),s("1da1")),r=s("5530"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.perPage,(function(e){return[s("v-layout",{key:e,class:{"mt-2":e>0},attrs:{"align-start":""}},[s("v-skeleton-loader",{attrs:{boilerplate:"",type:"image",width:"160",height:"240"}}),s("v-layout",{staticClass:"ma-4",attrs:{column:""}},[s("v-skeleton-loader",{attrs:{boilerplate:"",type:"heading",width:"400px",height:"24px"}}),s("v-skeleton-loader",{staticClass:"mt-3",attrs:{boilerplate:"",type:"text",width:"140"}}),s("v-skeleton-loader",{staticClass:"mt-1",attrs:{boilerplate:"",type:"text",width:"240"}}),s("v-layout",{staticClass:"mt-3"},[s("v-skeleton-loader",{staticClass:"mr-1",attrs:{boilerplate:"",type:"button",width:"65"}}),s("v-skeleton-loader",{attrs:{boilerplate:"",type:"button",width:"160"}})],1),s("v-skeleton-loader",{staticClass:"mt-5",attrs:{boilerplate:"",type:"text@3",width:"100%"}})],1)],1)]}))],2)},o=[],c=(s("a9e3"),{perPage:{type:Number,default:null}}),u={props:c},d=u,h=s("2877"),p=s("6544"),m=s.n(p),v=s("a722"),g=s("3129"),f=Object(h["a"])(d,l,o,!1,null,null,null),_=f.exports;m()(f,{VLayout:v["a"],VSkeletonLoader:g["a"]});var b=_,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-layout",{staticClass:"shrink"},[s("v-btn",e._b({staticClass:"mr-2",attrs:{height:"48"},on:{click:function(t){return e.$emit("reload")}}},"v-btn",{loading:e.loading},!1),[s("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-refresh")]),s("span",[e._v("Обновить")])],1),s("v-badge",{attrs:{dot:"",overlap:"","offset-x":"10","offset-y":"10",value:e.hasFilters}},[s("v-btn",e._b({attrs:{height:"48"},on:{click:function(t){return e.$emit("update:settings",!e.settings)}}},"v-btn",{loading:e.loading},!1),[s("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-filter")]),s("span",[e._v("Фильтры")])],1)],1)],1)},y=[],x=s("2f62"),C={settings:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},S={props:C,computed:Object(r["a"])(Object(r["a"])({},Object(x["d"])("catalog",{_genres:function(e){return e.filters.genres.value},_years:function(e){return e.filters.years.value}})),{},{hasFilters:function(){var e=this._years||[],t=this._genres||[];return e.length+t.length>0}})},V=S,O=s("4ca6"),j=s("8336"),F=s("132d"),w=Object(h["a"])(V,I,y,!1,null,null,null),k=w.exports;m()(w,{VBadge:O["a"],VBtn:j["a"],VIcon:F["a"],VLayout:v["a"]});var $=k,D=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._l(e.filters,(function(e,t){return[s(e,{key:t,tag:"component",class:{"mt-2":t>0}})]}))],2)},P=[],T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-card-title",{domProps:{textContent:e._s(e.title)}}),s("v-card-subtitle",{domProps:{textContent:e._s(e.subtitle)}}),s("v-divider"),s("v-select",e._b({staticClass:"pl-1",attrs:{solo:"",flat:"","hide-details":"",label:"Сортировка","item-text":"title","item-value":"value",value:e._value},on:{input:function(t){return e._setFilterValue({filter:"sort",value:t})}}},"v-select",{items:e.items},!1))],1)},R=[],E={data:function(){return{title:"Сортировка",items:[{title:"По новизне",value:1},{title:"По популярности",value:2}],subtitle:"Вы можете отсортировть список релизов по популярности или новизне"}},computed:Object(r["a"])({},Object(x["d"])("catalog",{_value:function(e){return e.filters.sort.value}})),methods:Object(r["a"])({},Object(x["b"])("catalog",{_setFilterValue:"setFilterValue"}))},M=E,A=s("b0af"),L=s("99d9"),z=s("ce7e"),B=s("b974"),N=Object(h["a"])(M,T,R,!1,null,null,null),Y=N.exports;m()(N,{VCard:A["a"],VCardSubtitle:L["a"],VCardTitle:L["c"],VDivider:z["a"],VSelect:B["a"]});var G=Y,J=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-card-title",{domProps:{textContent:e._s(e.title)}}),s("v-card-subtitle",{domProps:{textContent:e._s(e.subtitle)}}),s("v-divider"),s("v-autocomplete",{staticClass:"py-2 filter",attrs:{solo:"",flat:"",chips:"",multiple:"",clearable:"","hide-details":"","hide-no-data":"","deletable-chips":"",label:"Года",value:e._value,items:e._items,loading:e._loading},on:{input:function(t){return e._setFilterValue({filter:"years",value:t})}}})],1)},K=[],U={data:function(){return{title:"Период",subtitle:"Вы можете отфильтровать список релизов по годам выпуска"}},computed:Object(r["a"])({},Object(x["d"])("catalog",{_items:function(e){return e.filters.years.items},_value:function(e){return e.filters.years.value},_loading:function(e){return e.filters.years.loading}})),methods:Object(r["a"])({},Object(x["b"])("catalog",{_setFilterValue:"setFilterValue",_getYearsFilter:"getYearsFilter"})),created:function(){this._getYearsFilter()}},q=U,H=(s("ae98"),s("2bfd"),s("8654")),Q=s("d9f7"),W=s("80d2");const X={...B["b"],offsetY:!0,offsetOverflow:!0,transition:!1};var Z=B["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(e,t,s)=>s.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:B["a"].options.props.menuProps.type,default:()=>X},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...B["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(e=>this.getValue(e))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(e=>!this.hasItem(e)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(e=>{const t=Object(W["n"])(e,this.itemText),s=null!=t?String(t):"";return this.filter(e,String(this.internalSearch),s)})},internalSearch:{get(){return this.lazySearch},set(e){this.lazySearch=e,this.$emit("update:search-input",e)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const e=B["a"].options.computed.$_menuProps.call(this);return e.contentClass=("v-autocomplete__content "+(e.contentClass||"")).trim(),{...X,...e}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(e=>this.valueComparator(this.getValue(e),this.getValue(this.internalValue)))},listData(){const e=B["a"].options.computed.listData.call(this);return e.props={...e.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},e}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(e){e?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(e){!e&&this.hasSlot&&(this.lazySearch=void 0)},items(e,t){t&&t.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!e.length||this.activateMenu()},searchInput(e){this.lazySearch=e},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(e,t){e!==t&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===e.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(e){this.searchIsDirty||(this.multiple&&e===W["s"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&e===W["s"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:e!==W["s"].backspace&&e!==W["s"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const e=this.selectedIndex,t=this.selectedItems[e];if(!this.isInteractive||this.getDisabled(t))return;const s=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==s)return void(this.selectedIndex=s);const a=this.selectedItems.length,i=e!==a-1?e:e-1,n=this.selectedItems[i];n?this.selectItem(t):this.setValue(this.multiple?[]:void 0),this.selectedIndex=i},clearableCallback(){this.internalSearch=void 0,B["a"].options.methods.clearableCallback.call(this)},genInput(){const e=H["a"].options.methods.genInput.call(this);return e.data=Object(Q["a"])(e.data,{attrs:{"aria-activedescendant":Object(W["m"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(W["m"])(e.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),e},genInputSlot(){const e=B["a"].options.methods.genInputSlot.call(this);return e.data.attrs.role="combobox",e},genSelections(){return this.hasSlot||this.multiple?B["a"].options.methods.genSelections.call(this):[]},onClick(e){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(e.target)||this.activateMenu())},onInput(e){if(this.selectedIndex>-1||!e.target)return;const t=e.target,s=t.value;t.value&&this.activateMenu(),this.internalSearch=s,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){const t=e.keyCode;B["a"].options.methods.onKeyDown.call(this,e),this.changeSelectedIndex(t)},onSpaceDown(e){},onTabDown(e){B["a"].options.methods.onTabDown.call(this,e),this.updateSelf()},onUpDown(e){e.preventDefault(),this.activateMenu()},selectItem(e){B["a"].options.methods.selectItem.call(this,e),this.setSearch()},setSelectedItems(){B["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(e){return this.selectedValues.indexOf(this.getValue(e))>-1},onCopy(e){var t,s;if(-1===this.selectedIndex)return;const a=this.selectedItems[this.selectedIndex],i=this.getText(a);null==(t=e.clipboardData)||t.setData("text/plain",i),null==(s=e.clipboardData)||s.setData("text/vnd.vuetify.autocomplete.item+plain",i),e.preventDefault()}}}),ee=Object(h["a"])(q,J,K,!1,null,"5709f53e",null),te=ee.exports;m()(ee,{VAutocomplete:Z,VCard:A["a"],VCardSubtitle:L["a"],VCardTitle:L["c"],VDivider:z["a"]});var se=te,ae=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",[s("v-card-title",{domProps:{textContent:e._s(e.title)}}),s("v-card-subtitle",{domProps:{textContent:e._s(e.subtitle)}}),s("v-divider"),s("v-autocomplete",{staticClass:"py-2 filter",attrs:{solo:"",flat:"",chips:"",multiple:"",clearable:"","hide-details":"","hide-no-data":"","deletable-chips":"",label:"Выбрать жанры",value:e._value,items:e._items,loading:e._loading,"menu-props":{attach:"#container"}},on:{input:function(t){return e._setFilterValue({filter:"genres",value:t})}}})],1)},ie=[],ne={data:function(){return{title:"Жанры",subtitle:"Вы можете отфильтровать список релизов по указанным жанрам"}},computed:Object(r["a"])({},Object(x["d"])("catalog",{_items:function(e){return e.filters.genres.items},_value:function(e){return e.filters.genres.value},_loading:function(e){return e.filters.genres.loading}})),methods:Object(r["a"])({},Object(x["b"])("catalog",{_setFilterValue:"setFilterValue",_getGenresFilter:"getGenresFilter"})),created:function(){this._getGenresFilter()}},re=ne,le=(s("997e"),Object(h["a"])(re,ae,ie,!1,null,"4816c3a5",null)),oe=le.exports;m()(le,{VAutocomplete:Z,VCard:A["a"],VCardSubtitle:L["a"],VCardTitle:L["c"],VDivider:z["a"]});var ce=oe,ue={computed:{filters:function(){return[ce,se,G]}}},de=ue,he=Object(h["a"])(de,D,P,!1,null,null,null),pe=he.exports,me=pe,ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.items&&e.items.length>0?s("div",[e._l(e.items,(function(t){return[s("release",e._b({key:t.id,ref:t.id,refInFor:!0,staticClass:"mb-2",on:{click:function(s){return e.toRelease(t)}}},"release",{release:t},!1))]}))],2):e._e()},ge=[],fe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-card",{attrs:{flat:"",color:"transparent"},on:{click:function(t){return e.$emit("click")}}},[s("v-layout",{attrs:{"align-start":""}},[s("v-card",{style:{position:"relative"},attrs:{width:"160",height:"240","min-width":"160","min-height":"240"}},[s("v-img",e._b({attrs:{width:"160",height:"240"}},"v-img",{src:e.src},!1))],1),s("div",[s("v-card-title",{domProps:{textContent:e._s(e.title)}}),e.subtitle?s("v-card-subtitle",{staticClass:"pb-0",domProps:{textContent:e._s(e.subtitle)}}):e._e(),e.genres?s("v-card-subtitle",{staticClass:"pt-0",domProps:{textContent:e._s(e.genres)}}):e._e(),s("v-card-text",[s("favorite",e._b({},"favorite",{release:e.release},!1)),s("v-chip",{style:{height:"36px"},attrs:{label:"",color:"grey darken-4"},domProps:{textContent:e._s(e.year)}}),s("v-chip",{style:{height:"36px"},attrs:{label:"",color:"grey darken-4"},domProps:{textContent:e._s(e.type)}})],1),e.description?s("v-card-text",{staticClass:"pt-0 grey--text"},[s("v-clamp",{attrs:{"max-height":"85px"}},[e._v(e._s(e.description))])],1):e._e()],1)],1)],1)},_e=[],be=(s("a15b"),s("3f87")),Ie=s("b82e"),ye=s("0feb"),xe={release:{type:Object,default:null}},Ce={props:xe,components:{VClamp:be["a"],Favorite:Ie["a"],RProgress:ye["a"]},computed:{src:function(){return this.$__get(this.release,"poster")},title:function(){return this.$__get(this.release,"names.ru")},subtitle:function(){return this.$__get(this.release,"names.original")},genres:function(){return(this.$__get(this.release,"genres")||[]).join(" | ")},year:function(){return this.$__get(this.release,"year")},type:function(){return this.$__get(this.release,"type")},description:function(){return this.$__get(this.release,"description")},episodes:function(){return this.$__get(this.release,"episodes")||[]}}},Se=Ce,Ve=s("cc20"),Oe=s("adda"),je=Object(h["a"])(Se,fe,_e,!1,null,null,null),Fe=je.exports;m()(je,{VCard:A["a"],VCardSubtitle:L["a"],VCardText:L["b"],VCardTitle:L["c"],VChip:Ve["a"],VImg:Oe["a"],VLayout:v["a"]});var we=Fe,ke=s("882d"),$e={items:{type:Array,default:null}},De={props:$e,components:{Release:we},methods:Object(r["a"])({},{toRelease:ke["b"]})},Pe=De,Te=Object(h["a"])(Pe,ve,ge,!1,null,null,null),Re=Te.exports,Ee=Re,Me={name:"Catalog.View",meta:{title:"Каталог"},components:{Loader:b,Toolbar:$,Filters:me,Releases:Ee},data:function(){return{settings:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(x["d"])("catalog",{_page:function(e){return e.items.page},_items:function(e){return e.items.data},_loading:function(e){return e.items.loading},_perPage:function(e){return e.items.perPage},_pagination:function(e){return e.items.pagination},_is_initialized:function(e){return e.is_initialized}})),{},{hasMoreItems:function(){return this.$__get(this._pagination,"lastItems",0)===this._perPage}}),methods:Object(r["a"])(Object(r["a"])({},Object(x["b"])("catalog",{_getCatalogItems:"getCatalogItems",_setPaginationPage:"setPaginationPage",_clearCatalogReleases:"clearCatalogReleases"})),{},{showReleases:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e._clearCatalogReleases();case 2:return t.next=4,e._setPaginationPage(1);case 4:return t.next=6,e._getCatalogItems();case 6:case"end":return t.stop()}}),t)})))()},loadReleases:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e._setPaginationPage(e._page+1);case 2:return t.next=4,e._getCatalogItems();case 4:case"end":return t.stop()}}),t)})))()}}),created:function(){!1===this._is_initialized&&this.showReleases()},beforeRouteEnter:function(e,t,s){s((function(e){if(t&&"release"===t.name){var s=e.$__get(t,"params.releaseId"),a=e.$refs[s];a&&a[0]&&a[0].$el.scrollIntoView({block:"center"})}}))}},Ae=Me,Le=Object(h["a"])(Ae,a,i,!1,null,null,null),ze=Le.exports;m()(Le,{VBtn:j["a"],VCard:A["a"],VCardSubtitle:L["a"],VCardTitle:L["c"],VLayout:v["a"]});t["default"]=ze},"997e":function(e,t,s){"use strict";var a=s("a73d"),i=s.n(a);i.a},a73d:function(e,t,s){},ae98:function(e,t,s){"use strict";var a=s("af72"),i=s.n(a);i.a},af72:function(e,t,s){},b82e:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e._isAuthorized?s("v-btn",{attrs:{color:e.isInFavorite?"secondary":e.color,loading:e._loading},on:{click:function(t){t.stopPropagation(),e.isInFavorite?e._removeFromFavorites(e.release):e._addToFavorites(e.release)}}},[e.isInFavorite?s("v-icon",[e._v("mdi-star")]):s("v-icon",[e._v("mdi-star-outline")])],1):e._e()},i=[],n=s("5530"),r=s("2f62"),l={release:{type:Object,default:null},color:{type:String,default:null}},o={props:l,computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(r["d"])("favorites",{_loading:function(e){return e.loading}})),Object(r["c"])("app/account",{_isAuthorized:"isAuthorized"})),{},{isInFavorite:function(){return this.$store.getters["favorites/isInFavorite"](this.release)}}),methods:Object(n["a"])({},Object(r["b"])("favorites",{_addToFavorites:"addToFavorites",_removeFromFavorites:"removeFromFavorites"}))},c=o,u=s("2877"),d=s("6544"),h=s.n(d),p=s("8336"),m=s("132d"),v=Object(u["a"])(c,a,i,!1,null,null,null),g=v.exports;h()(v,{VBtn:p["a"],VIcon:m["a"]});t["a"]=g}}]);
//# sourceMappingURL=chunk-3804bb2a.4b3af8b0.js.map