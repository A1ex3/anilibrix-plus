(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32c6f3d6"],{"2bfd":function(t,e,s){},"33dc":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{attrs:{column:""}},[s("v-card",{attrs:{flat:"",color:"transparent"}},[s("v-card-title",[t._v("Каталог релизов")]),s("v-card-subtitle",[t._v("Вы можете выбрать жанры и года для более тонкой настройки списка релизов")])],1),t.settings?s("filters",{staticClass:"mb-2"}):t._e(),s("toolbar",{staticClass:"mb-2",attrs:{settings:t.settings},on:{"update:settings":function(e){t.settings=e},reload:t.showReleases}}),s("div",{staticClass:"my-2"},[s("releases",{attrs:{items:t._items}}),t._loading?s("loader",{attrs:{perPage:t._perPage}}):t._e()],1),t._items&&t._items.length>0&&t.hasMoreItems?s("v-btn",{staticClass:"grey darken-4 shrink",attrs:{block:"",text:""},on:{click:t.loadReleases}},[t._v(" Показать еще ")]):t._e()],1)},i=[],n=(s("b0c0"),s("96cf"),s("1da1")),r=s("5530"),l=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.perPage,(function(t){return[s("v-layout",{key:t,class:{"mt-2":t>0},attrs:{"align-start":""}},[s("v-skeleton-loader",{attrs:{boilerplate:"",type:"image",width:"160",height:"240"}}),s("v-layout",{staticClass:"ma-4",attrs:{column:""}},[s("v-skeleton-loader",{attrs:{boilerplate:"",type:"heading",width:"400px",height:"24px"}}),s("v-skeleton-loader",{staticClass:"mt-3",attrs:{boilerplate:"",type:"text",width:"140"}}),s("v-skeleton-loader",{staticClass:"mt-1",attrs:{boilerplate:"",type:"text",width:"240"}}),s("v-layout",{staticClass:"mt-3"},[s("v-skeleton-loader",{staticClass:"mr-1",attrs:{boilerplate:"",type:"button",width:"65"}}),s("v-skeleton-loader",{attrs:{boilerplate:"",type:"button",width:"160"}})],1),s("v-skeleton-loader",{staticClass:"mt-5",attrs:{boilerplate:"",type:"text@3",width:"100%"}})],1)],1)]}))],2)},o=[],c=(s("a9e3"),{perPage:{type:Number,default:null}}),u={props:c},d=u,h=s("2877"),p=s("6544"),m=s.n(p),g=s("a722"),f=s("3129"),v=Object(h["a"])(d,l,o,!1,null,null,null),b=v.exports;m()(v,{VLayout:g["a"],VSkeletonLoader:f["a"]});var _=b,I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-layout",{staticClass:"shrink"},[s("v-btn",t._b({staticClass:"mr-2",attrs:{height:"48"},on:{click:function(e){return t.$emit("reload")}}},"v-btn",{loading:t.loading},!1),[s("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-refresh")]),s("span",[t._v("Обновить")])],1),s("v-badge",{attrs:{dot:"",overlap:"","offset-x":"10","offset-y":"10",value:t.hasFilters}},[s("v-btn",t._b({attrs:{height:"48"},on:{click:function(e){return t.$emit("update:settings",!t.settings)}}},"v-btn",{loading:t.loading},!1),[s("v-icon",{staticClass:"mr-2",attrs:{small:""}},[t._v("mdi-filter")]),s("span",[t._v("Фильтры")])],1)],1)],1)},y=[],x=s("2f62"),C={settings:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},S={props:C,computed:Object(r["a"])(Object(r["a"])({},Object(x["d"])("catalog",{_genres:function(t){return t.filters.genres.value},_years:function(t){return t.filters.years.value}})),{},{hasFilters:function(){var t=this._years||[],e=this._genres||[];return t.length+e.length>0}})},V=S,O=s("4ca6"),j=s("8336"),w=s("132d"),F=Object(h["a"])(V,I,y,!1,null,null,null),k=F.exports;m()(F,{VBadge:O["a"],VBtn:j["a"],VIcon:w["a"],VLayout:g["a"]});var $=k,D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._l(t.filters,(function(t,e){return[s(t,{key:e,tag:"component",class:{"mt-2":e>0}})]}))],2)},P=[],R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-card-title",{domProps:{textContent:t._s(t.title)}}),s("v-card-subtitle",{domProps:{textContent:t._s(t.subtitle)}}),s("v-divider"),s("v-select",t._b({staticClass:"pl-1",attrs:{solo:"",flat:"","hide-details":"",label:"Сортировка","item-text":"title","item-value":"value",value:t._value},on:{input:function(e){return t._setFilterValue({filter:"sort",value:e})}}},"v-select",{items:t.items},!1))],1)},T=[],E={data:function(){return{title:"Сортировка",items:[{title:"По новизне",value:1},{title:"По популярности",value:2}],subtitle:"Вы можете отсортировть список релизов по популярности или новизне"}},computed:Object(r["a"])({},Object(x["d"])("catalog",{_value:function(t){return t.filters.sort.value}})),methods:Object(r["a"])({},Object(x["b"])("catalog",{_setFilterValue:"setFilterValue"}))},M=E,L=s("b0af"),A=s("99d9"),z=s("ce7e"),B=s("b974"),N=Object(h["a"])(M,R,T,!1,null,null,null),Y=N.exports;m()(N,{VCard:L["a"],VCardSubtitle:A["a"],VCardTitle:A["c"],VDivider:z["a"],VSelect:B["a"]});var G=Y,J=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-card-title",{domProps:{textContent:t._s(t.title)}}),s("v-card-subtitle",{domProps:{textContent:t._s(t.subtitle)}}),s("v-divider"),s("v-autocomplete",{staticClass:"py-2 filter",attrs:{solo:"",flat:"",chips:"",multiple:"",clearable:"","hide-details":"","hide-no-data":"","deletable-chips":"",label:"Года",value:t._value,items:t._items,loading:t._loading},on:{input:function(e){return t._setFilterValue({filter:"years",value:e})}}})],1)},K=[],U={data:function(){return{title:"Период",subtitle:"Вы можете отфильтровать список релизов по годам выпуска"}},computed:Object(r["a"])({},Object(x["d"])("catalog",{_items:function(t){return t.filters.years.items},_value:function(t){return t.filters.years.value},_loading:function(t){return t.filters.years.loading}})),methods:Object(r["a"])({},Object(x["b"])("catalog",{_setFilterValue:"setFilterValue",_getYearsFilter:"getYearsFilter"})),created:function(){this._getYearsFilter()}},q=U,H=(s("ae98"),s("2bfd"),s("8654")),Q=s("d9f7"),W=s("80d2");const X={...B["b"],offsetY:!0,offsetOverflow:!0,transition:!1};var Z=B["a"].extend({name:"v-autocomplete",props:{allowOverflow:{type:Boolean,default:!0},autoSelectFirst:{type:Boolean,default:!1},filter:{type:Function,default:(t,e,s)=>s.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>-1},hideNoData:Boolean,menuProps:{type:B["a"].options.props.menuProps.type,default:()=>X},noFilter:Boolean,searchInput:{type:String,default:void 0}},data(){return{lazySearch:this.searchInput}},computed:{classes(){return{...B["a"].options.computed.classes.call(this),"v-autocomplete":!0,"v-autocomplete--is-selecting-index":this.selectedIndex>-1}},computedItems(){return this.filteredItems},selectedValues(){return this.selectedItems.map(t=>this.getValue(t))},hasDisplayedItems(){return this.hideSelected?this.filteredItems.some(t=>!this.hasItem(t)):this.filteredItems.length>0},currentRange(){return null==this.selectedItem?0:String(this.getText(this.selectedItem)).length},filteredItems(){return!this.isSearching||this.noFilter||null==this.internalSearch?this.allItems:this.allItems.filter(t=>{const e=Object(W["n"])(t,this.itemText),s=null!=e?String(e):"";return this.filter(t,String(this.internalSearch),s)})},internalSearch:{get(){return this.lazySearch},set(t){this.lazySearch=t,this.$emit("update:search-input",t)}},isAnyValueAllowed(){return!1},isDirty(){return this.searchIsDirty||this.selectedItems.length>0},isSearching(){return this.multiple&&this.searchIsDirty||this.searchIsDirty&&this.internalSearch!==this.getText(this.selectedItem)},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!this.hideNoData)},$_menuProps(){const t=B["a"].options.computed.$_menuProps.call(this);return t.contentClass=("v-autocomplete__content "+(t.contentClass||"")).trim(),{...X,...t}},searchIsDirty(){return null!=this.internalSearch&&""!==this.internalSearch},selectedItem(){return this.multiple?null:this.selectedItems.find(t=>this.valueComparator(this.getValue(t),this.getValue(this.internalValue)))},listData(){const t=B["a"].options.computed.listData.call(this);return t.props={...t.props,items:this.virtualizedItems,noFilter:this.noFilter||!this.isSearching||!this.filteredItems.length,searchInput:this.internalSearch},t}},watch:{filteredItems:"onFilteredItemsChanged",internalValue:"setSearch",isFocused(t){t?(document.addEventListener("copy",this.onCopy),this.$refs.input&&this.$refs.input.select()):(document.removeEventListener("copy",this.onCopy),this.updateSelf())},isMenuActive(t){!t&&this.hasSlot&&(this.lazySearch=void 0)},items(t,e){e&&e.length||!this.hideNoData||!this.isFocused||this.isMenuActive||!t.length||this.activateMenu()},searchInput(t){this.lazySearch=t},internalSearch:"onInternalSearchChanged",itemText:"updateSelf"},created(){this.setSearch()},destroyed(){document.removeEventListener("copy",this.onCopy)},methods:{onFilteredItemsChanged(t,e){t!==e&&(this.setMenuIndex(-1),this.$nextTick(()=>{this.internalSearch&&(1===t.length||this.autoSelectFirst)&&(this.$refs.menu.getTiles(),this.setMenuIndex(0))}))},onInternalSearchChanged(){this.updateMenuDimensions()},updateMenuDimensions(){this.isMenuActive&&this.$refs.menu&&this.$refs.menu.updateDimensions()},changeSelectedIndex(t){this.searchIsDirty||(this.multiple&&t===W["s"].left?-1===this.selectedIndex?this.selectedIndex=this.selectedItems.length-1:this.selectedIndex--:this.multiple&&t===W["s"].right?this.selectedIndex>=this.selectedItems.length-1?this.selectedIndex=-1:this.selectedIndex++:t!==W["s"].backspace&&t!==W["s"].delete||this.deleteCurrentItem())},deleteCurrentItem(){const t=this.selectedIndex,e=this.selectedItems[t];if(!this.isInteractive||this.getDisabled(e))return;const s=this.selectedItems.length-1;if(-1===this.selectedIndex&&0!==s)return void(this.selectedIndex=s);const a=this.selectedItems.length,i=t!==a-1?t:t-1,n=this.selectedItems[i];n?this.selectItem(e):this.setValue(this.multiple?[]:void 0),this.selectedIndex=i},clearableCallback(){this.internalSearch=void 0,B["a"].options.methods.clearableCallback.call(this)},genInput(){const t=H["a"].options.methods.genInput.call(this);return t.data=Object(Q["a"])(t.data,{attrs:{"aria-activedescendant":Object(W["m"])(this.$refs.menu,"activeTile.id"),autocomplete:Object(W["m"])(t.data,"attrs.autocomplete","off")},domProps:{value:this.internalSearch}}),t},genInputSlot(){const t=B["a"].options.methods.genInputSlot.call(this);return t.data.attrs.role="combobox",t},genSelections(){return this.hasSlot||this.multiple?B["a"].options.methods.genSelections.call(this):[]},onClick(t){this.isInteractive&&(this.selectedIndex>-1?this.selectedIndex=-1:this.onFocus(),this.isAppendInner(t.target)||this.activateMenu())},onInput(t){if(this.selectedIndex>-1||!t.target)return;const e=t.target,s=e.value;e.value&&this.activateMenu(),this.internalSearch=s,this.badInput=e.validity&&e.validity.badInput},onKeyDown(t){const e=t.keyCode;B["a"].options.methods.onKeyDown.call(this,t),this.changeSelectedIndex(e)},onSpaceDown(t){},onTabDown(t){B["a"].options.methods.onTabDown.call(this,t),this.updateSelf()},onUpDown(t){t.preventDefault(),this.activateMenu()},selectItem(t){B["a"].options.methods.selectItem.call(this,t),this.setSearch()},setSelectedItems(){B["a"].options.methods.setSelectedItems.call(this),this.isFocused||this.setSearch()},setSearch(){this.$nextTick(()=>{this.multiple&&this.internalSearch&&this.isMenuActive||(this.internalSearch=!this.selectedItems.length||this.multiple||this.hasSlot?null:this.getText(this.selectedItem))})},updateSelf(){(this.searchIsDirty||this.internalValue)&&(this.valueComparator(this.internalSearch,this.getValue(this.internalValue))||this.setSearch())},hasItem(t){return this.selectedValues.indexOf(this.getValue(t))>-1},onCopy(t){var e,s;if(-1===this.selectedIndex)return;const a=this.selectedItems[this.selectedIndex],i=this.getText(a);null==(e=t.clipboardData)||e.setData("text/plain",i),null==(s=t.clipboardData)||s.setData("text/vnd.vuetify.autocomplete.item+plain",i),t.preventDefault()}}}),tt=Object(h["a"])(q,J,K,!1,null,"5709f53e",null),et=tt.exports;m()(tt,{VAutocomplete:Z,VCard:L["a"],VCardSubtitle:A["a"],VCardTitle:A["c"],VDivider:z["a"]});var st=et,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",[s("v-card-title",{domProps:{textContent:t._s(t.title)}}),s("v-card-subtitle",{domProps:{textContent:t._s(t.subtitle)}}),s("v-divider"),s("v-autocomplete",{staticClass:"py-2 filter",attrs:{solo:"",flat:"",chips:"",multiple:"",clearable:"","hide-details":"","hide-no-data":"","deletable-chips":"",label:"Выбрать жанры",value:t._value,items:t._items,loading:t._loading,"menu-props":{attach:"#container"}},on:{input:function(e){return t._setFilterValue({filter:"genres",value:e})}}})],1)},it=[],nt={data:function(){return{title:"Жанры",subtitle:"Вы можете отфильтровать список релизов по указанным жанрам"}},computed:Object(r["a"])({},Object(x["d"])("catalog",{_items:function(t){return t.filters.genres.items},_value:function(t){return t.filters.genres.value},_loading:function(t){return t.filters.genres.loading}})),methods:Object(r["a"])({},Object(x["b"])("catalog",{_setFilterValue:"setFilterValue",_getGenresFilter:"getGenresFilter"})),created:function(){this._getGenresFilter()}},rt=nt,lt=(s("997e"),Object(h["a"])(rt,at,it,!1,null,"4816c3a5",null)),ot=lt.exports;m()(lt,{VAutocomplete:Z,VCard:L["a"],VCardSubtitle:A["a"],VCardTitle:A["c"],VDivider:z["a"]});var ct=ot,ut={computed:{filters:function(){return[ct,st,G]}}},dt=ut,ht=Object(h["a"])(dt,D,P,!1,null,null,null),pt=ht.exports,mt=pt,gt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.items&&t.items.length>0?s("div",[t._l(t.items,(function(e){return[s("release",t._b({key:e.id,ref:e.id,refInFor:!0,staticClass:"mb-2",on:{click:function(s){return t.toRelease(e)}}},"release",{release:e},!1))]}))],2):t._e()},ft=[],vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card",{attrs:{flat:"",color:"transparent"},on:{click:function(e){return t.$emit("click")}}},[s("v-layout",{attrs:{"align-start":""}},[s("v-card",{style:{position:"relative"},attrs:{width:"160",height:"240","min-width":"160","min-height":"240"}},[s("v-img",t._b({attrs:{width:"160",height:"240"}},"v-img",{src:t.src},!1))],1),s("div",[s("v-card-title",{domProps:{textContent:t._s(t.title)}}),t.subtitle?s("v-card-subtitle",{staticClass:"pb-0",domProps:{textContent:t._s(t.subtitle)}}):t._e(),t.genres?s("v-card-subtitle",{staticClass:"pt-0",domProps:{textContent:t._s(t.genres)}}):t._e(),s("v-card-text",[s("favorite",t._b({},"favorite",{release:t.release},!1)),s("v-chip",{style:{height:"36px"},attrs:{label:"",color:"grey darken-4"},domProps:{textContent:t._s(t.year)}}),s("v-chip",{style:{height:"36px"},attrs:{label:"",color:"grey darken-4"},domProps:{textContent:t._s(t.type)}})],1),t.description?s("v-card-text",{staticClass:"pt-0 grey--text"},[s("v-clamp",{attrs:{"max-height":"85px"}},[t._v(t._s(t.description))])],1):t._e()],1)],1)],1)},bt=[],_t=(s("a15b"),s("3f87")),It=s("b82e"),yt=s("0feb"),xt={release:{type:Object,default:null}},Ct={props:xt,components:{VClamp:_t["a"],Favorite:It["a"],RProgress:yt["a"]},computed:{src:function(){return this.$__get(this.release,"poster")},title:function(){return this.$__get(this.release,"names.ru")},subtitle:function(){return this.$__get(this.release,"names.original")},genres:function(){return(this.$__get(this.release,"genres")||[]).join(" | ")},year:function(){return this.$__get(this.release,"year")},type:function(){return this.$__get(this.release,"type")},description:function(){return this.$__get(this.release,"description")},episodes:function(){return this.$__get(this.release,"episodes")||[]}}},St=Ct,Vt=s("cc20"),Ot=s("adda"),jt=Object(h["a"])(St,vt,bt,!1,null,null,null),wt=jt.exports;m()(jt,{VCard:L["a"],VCardSubtitle:A["a"],VCardText:A["b"],VCardTitle:A["c"],VChip:Vt["a"],VImg:Ot["a"],VLayout:g["a"]});var Ft=wt,kt=s("882d"),$t={items:{type:Array,default:null}},Dt={props:$t,components:{Release:Ft},methods:Object(r["a"])({},{toRelease:kt["b"]})},Pt=Dt,Rt=Object(h["a"])(Pt,gt,ft,!1,null,null,null),Tt=Rt.exports,Et=Tt,Mt={name:"Catalog.View",meta:{title:"Каталог"},components:{Loader:_,Toolbar:$,Filters:mt,Releases:Et},data:function(){return{settings:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(x["d"])("catalog",{_page:function(t){return t.items.page},_items:function(t){return t.items.data},_loading:function(t){return t.items.loading},_perPage:function(t){return t.items.perPage},_pagination:function(t){return t.items.pagination},_is_initialized:function(t){return t.is_initialized}})),{},{hasMoreItems:function(){return this.$__get(this._pagination,"lastItems",0)===this._perPage}}),methods:Object(r["a"])(Object(r["a"])({},Object(x["b"])("catalog",{_getCatalogItems:"getCatalogItems",_setPaginationPage:"setPaginationPage",_clearCatalogReleases:"clearCatalogReleases"})),{},{showReleases:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._clearCatalogReleases();case 2:return e.next=4,t._setPaginationPage(1);case 4:return e.next=6,t._getCatalogItems();case 6:case"end":return e.stop()}}),e)})))()},loadReleases:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._setPaginationPage(t._page+1);case 2:return e.next=4,t._getCatalogItems();case 4:case"end":return e.stop()}}),e)})))()}}),created:function(){!1===this._is_initialized&&this.showReleases()},beforeRouteEnter:function(t,e,s){s((function(t){if(e&&"release"===e.name){var s=t.$__get(e,"params.releaseId"),a=t.$refs[s];a&&a[0]&&a[0].$el.scrollIntoView({block:"center"})}}))}},Lt=Mt,At=Object(h["a"])(Lt,a,i,!1,null,null,null),zt=At.exports;m()(At,{VBtn:j["a"],VCard:L["a"],VCardSubtitle:A["a"],VCardTitle:A["c"],VLayout:g["a"]});e["default"]=zt},"997e":function(t,e,s){"use strict";var a=s("a73d"),i=s.n(a);i.a},a73d:function(t,e,s){},ae98:function(t,e,s){"use strict";var a=s("af72"),i=s.n(a);i.a},af72:function(t,e,s){},b82e:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isAuthorized?s("v-btn",{attrs:{color:t.isInFavorite?"secondary":t.color,loading:t._is_loading},on:{click:function(e){return e.stopPropagation(),t.toggleFavorite(t.release)}}},[t.isInFavorite?s("v-icon",[t._v("mdi-star")]):s("v-icon",[t._v("mdi-star-outline")])],1):t._e()},i=[],n=s("5530"),r=s("aada"),l=s("0ea3"),o=s("2f62"),c={release:{type:Object,default:null},color:{type:String,default:null}},u={props:c,computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["d"])("favorites",{_is_loading:function(t){return t.is_loading}})),Object(o["c"])("favorites",[l["c"]])),Object(o["c"])("app/account",[r["b"]])),{},{isAuthorized:function(){return!0===this[r["b"]]},isInFavorite:function(){return this[l["c"]](this.release)}}),methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])("favorites",[l["a"],l["d"]])),{},{toggleFavorite:function(t){this.isInFavorite?this[l["d"]](t):this[l["a"]](t)}})},d=u,h=s("2877"),p=s("6544"),m=s.n(p),g=s("8336"),f=s("132d"),v=Object(h["a"])(d,a,i,!1,null,null,null),b=v.exports;m()(v,{VBtn:g["a"],VIcon:f["a"]});e["a"]=b}}]);
//# sourceMappingURL=chunk-32c6f3d6.18903705.js.map