(function(e){function t(t){for(var r,i,o=t[0],c=t[1],u=t[2],l=0,p=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var o=n[i];0!==a[o]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={index:0},a={index:0},s=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0d932a97":"86eef757","chunk-2d22bd40":"b4fad62a","chunk-2d2308d5":"34a8b4fd","chunk-37056bf3":"2fb6e8af","chunk-4cc5dc9f":"59bf9a64","chunk-6c808d01":"98070c20","chunk-98f043d4":"f12c4a0f","chunk-f6be8f88":"1c64f85e"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-0d932a97":1,"chunk-37056bf3":1,"chunk-6c808d01":1,"chunk-98f043d4":1,"chunk-f6be8f88":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0d932a97":"a7eb41e5","chunk-2d22bd40":"31d6cfe0","chunk-2d2308d5":"31d6cfe0","chunk-37056bf3":"5291c1cc","chunk-4cc5dc9f":"31d6cfe0","chunk-6c808d01":"334b5a43","chunk-98f043d4":"a1aa878f","chunk-f6be8f88":"c3aa8424"}[e]+".css",a=c.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===a))return t()}var p=document.getElementsByTagName("style");for(o=0;o<p.length;o++){u=p[o],l=u.getAttribute("data-href");if(l===r||l===a)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||a,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete i[e],d.parentNode.removeChild(d),n(s)},d.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){i[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(e);var p=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",p.name="ChunkLoadError",p.type=r,p.request=i,n[1](p)}a[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/anilibrix/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0373":function(e,t,n){},"0699":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("9b02"),i=n.n(r),a=function(e){var t=i()(e,"data"),n=i()(t,"data",null),r=i()(t,"status",!1),a=i()(t,"error.message","Ошибка при запросе на сервер");if(!0===r)return n;throw new Error(a)}},"06e1":function(e,t,n){},"0b51":function(e,t,n){"use strict";var r=n("79e1"),i=n.n(r);i.a},"0feb":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-progress-linear",e._b({staticClass:"release__progress",class:{square:e.square},attrs:{value:e.progress,indeterminate:e.loading},scopedSlots:e._u([!e.loading&&e.showNumbers?{key:"default",fn:function(){return[n("div",{staticClass:"release__progress__description caption white--text font-weight-bold px-4"},[e.isComplete?n("span",[e.dense?n("span",[e._v("Все эпизоды")]):n("span",[e._v("Просмотрены все эпизоды")])]):e.isUnseen?n("span",[e.dense?n("span",[e._v("Ни одного эпизода")]):n("span",[e._v("Не просмотрено ни одного эпизода")])]):n("span",[e.dense?n("span",[e._v(e._s(e.watched)+" из "+e._s(e.episodes.length))]):n("span",[e._v("Просмотрено "+e._s(e.watched)+" из "+e._s(e.episodes.length))])])])]},proxy:!0}:null],null,!0)},"v-progress-linear",{height:e.height,color:e.color},!1))},i=[],a=(n("a9e3"),n("994a")),s={release:{type:Object,default:null},episodes:{type:Array,default:null},showNumbers:{type:Boolean,default:!0},color:{type:String,default:"secondary"},height:{type:[Number,String],default:"25"},dense:{type:Boolean,default:!1},center:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},square:{type:Boolean,default:!1}},o={props:s,computed:{progress:function(){var e=this.release.id,t=(this.episodes||[]).length,n={release_id:e,total_episodes_number:t};return this.$store.getters["app/watch/getReleaseProgress"](n)},watched:function(){var e=this.release.id,t=(this.episodes||[]).length,n={release_id:e,total_episodes_number:t},r=this.$store.getters["app/watch/getWatchedEpisodes"](n);return Object(a["a"])(r.length,["эпизод","эпизода","эпизодов"])},isComplete:function(){return 100===this.progress},isUnseen:function(){return 0===this.progress}}},c=o,u=(n("510e"),n("2877")),l=n("6544"),p=n.n(l),d=n("8e36"),f=Object(u["a"])(c,r,i,!1,null,"83c1c67c",null),h=f.exports;p()(f,{VProgressLinear:d["a"]});t["a"]=h},"0ff8":function(e,t,n){},1071:function(e,t,n){"use strict";var r=n("06e1"),i=n.n(r);i.a},"11d0":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("loader"):!1===e.loading&&e.release?n("div",{attrs:{id:"playlist"}},[n("toolbar",e._b({staticClass:"mb-2",attrs:{search:e.search},on:{"update:search":function(t){e.search=t}}},"toolbar",{release:e.release},!1)),e.show_progress?n("release-progress",e._b({staticClass:"mb-2",attrs:{color:"grey darken-3",height:"48"}},"release-progress",{release:e.release,episodes:e.episodes},!1)):e._e(),e.playlistSearched.length>0?n("v-list",{attrs:{dense:"",dark:""}},[e._l(e.playlistSearched,(function(t,r){return[r>0?n("v-divider",{key:"d:"+r}):e._e(),n("episode",e._b({key:t.id,attrs:{is_playing:e.playing_episode_id===t.id},on:{click:function(n){return e.$emit("play:episode",t)}}},"episode",{release:e.release,episode:t},!1))]}))],2):e._e()],1):e._e()},i=[],a=(n("a9e3"),n("ac1f"),n("841c"),n("5530")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-layout",{staticClass:"mb-2"},[n("v-skeleton-loader",{attrs:{boilerplate:"",type:"button",height:"48",width:"100%"}}),n("v-skeleton-loader",{staticClass:"mx-2",attrs:{boilerplate:"",type:"button",height:"48",width:"72"}}),n("v-skeleton-loader",{attrs:{boilerplate:"",type:"button",height:"48",width:"72"}})],1),n("v-skeleton-loader",{staticClass:"mb-2",attrs:{boilerplate:"",type:"button",height:"48",width:"100%"}}),n("v-skeleton-loader",{attrs:{boilerplate:"",type:"list-item-two-line@15"}})],1)},o=[],c=n("2877"),u=n("6544"),l=n.n(u),p=n("a722"),d=n("31292"),f={},h=Object(c["a"])(f,s,o,!1,null,null,null),v=h.exports;l()(h,{VLayout:p["a"],VSkeletonLoader:d["a"]});var m=v,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item",{ref:"container",attrs:{"two-line":""},on:{click:function(t){return e.$emit("click")}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.episode.title)}}),n("v-list-item-subtitle",[n("quality",e._b({},"quality",{episode:e.episode},!1))],1)],1),n("v-list-item-action",[n("v-layout",[n("v-layout",{style:{width:"40px"},attrs:{"align-center":"","justify-center":""}},[e.is_playing?n("playing"):n("watched",e._b({},"watched",{episode:e.episode,release:e.release},!1))],1),n("actions",e._b({},"actions",{episode:e.episode,release:e.release,container:e.container},!1))],1)],1)],1)},_=[],g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"caption grey--text text--darken-1"},[e._v(e._s(e.items))])},y=[],w=(n("4de4"),n("7db0"),n("a15b"),{episode:{type:Object,default:null}}),k={props:w,computed:{sources:function(){return this.$__get(this.episode,"sources")||[]},items:function(){var e=this.sources.find((function(e){return"sd"===e.alias})),t=this.sources.find((function(e){return"hd"===e.alias})),n=this.sources.find((function(e){return"fhd"===e.alias})),r=this.sources.find((function(e){return"torrent"===e.type}));return[n?"1080":null,t?"720":null,e?"480":null,r?"Торрент":null].filter((function(e){return e})).join(" • ")}}},O=k,j=Object(c["a"])(O,g,y,!1,null,null,null),x=j.exports,E=x,S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isSeen?n("v-btn",{attrs:{icon:"",color:"grey"}},[n("v-icon",[e._v("mdi-check")])],1):e._e()},$=[],R={release:{type:Object,default:null},episode:{type:Object,default:null}},V={props:R,computed:{watch:function(){if(this.release&&this.episode){var e=this.release.id,t=this.episode.id,n={release_id:e,episode_id:t};return this.$store.getters["app/watch/getWatchedEpisode"](n)}},isSeen:function(){return this.$__get(this.watch,"isSeen")||!1}}},T=V,C=n("8336"),I=n("132d"),A=Object(c["a"])(T,S,$,!1,null,null,null),L=A.exports;l()(A,{VBtn:C["a"],VIcon:I["a"]});var P=L,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"blob"})},N=[],M=(n("c119"),{}),F=Object(c["a"])(M,D,N,!1,null,"17fe7c9f",null),W=F.exports,H=W,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-btn",{attrs:{icon:"",color:"grey darken-2",id:"episode__actions-"+e.episode.id}},[n("v-icon",[e._v("mdi-dots-vertical")])],1),n("v-menu",{ref:"menu",attrs:{top:"",left:"","close-on-click":"",attach:e.container,activator:"#episode__actions-"+e.episode.id},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("v-list",{staticClass:"grey darken-4",attrs:{dense:""}},[e._l(e.actions,(function(t,r){return[r>0?n("v-divider",{key:"d:"+r}):e._e(),n("v-list-item",{key:r,attrs:{disabled:e.loading},on:{click:function(e){return e.stopPropagation(),t.action(e)}}},[n("v-icon",{staticClass:"mr-2",attrs:{color:"grey"}},[e._v(e._s(t.icon))]),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)]}))],2)],1)],1)},q=[],z=(n("96cf"),n("1da1")),U=n("2f62"),G={release:{type:Object,default:null},episode:{type:Object,default:null},container:{type:HTMLDivElement,default:null}},K={props:G,data:function(){return{loading:!1,visible:!1}},computed:{actions:function(){var e=this;return[{icon:"mdi-check",title:"Отметить серию как просмотренную",action:this.setWatched,visible:!0},{icon:"mdi-close",title:"Снять отметку о просмотре",action:this.removeWatched,visible:!0},{icon:"mdi-download",title:"Скачать эпизод в 1080p",action:function(){return e.downloadSourceFile("fhd")},visible:this.checkSourceFile("fhd")},{icon:"mdi-download",title:"Скачать эпизод в 720p",action:function(){return e.downloadSourceFile("hd")},visible:this.checkSourceFile("hd")},{icon:"mdi-download",title:"Скачать эпизод в 480p",action:function(){return e.downloadSourceFile("sd")},visible:this.checkSourceFile("sd")}].filter((function(e){return e.visible}))}},methods:Object(a["a"])(Object(a["a"])({},Object(U["b"])("app/watch",{_setWatchedEpisode:"setWatchedEpisode",_removeWatchedEpisode:"removeWatchedEpisode"})),{},{setWatched:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.release.id,r=e.episode.id,i={release_id:n,episode_id:r,percentage:100},t.next=5,e._setWatchedEpisode(i);case 5:e.visible=!1;case 6:case"end":return t.stop()}}),t)})))()},removeWatched:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.release.id,r=e.episode.id,i={release_id:n,episode_id:r},t.next=5,e._removeWatchedEpisode(i);case 5:e.visible=!1;case 6:case"end":return t.stop()}}),t)})))()},getSourceFile:function(e){var t=this.$__get(this.episode,"sources")||[],n=t.find((function(t){return t.alias===e}));return this.$__get(n,"payload.file")||null},checkSourceFile:function(e){var t=this.getSourceFile(e);return t&&t.length>0},downloadSourceFile:function(e){var t=this.getSourceFile(e),n=this.$__get(this.episode,"sources")||[],r=n.find((function(t){return t.alias===e})),i={url:t,source:r,release:this.release,episode:this.episode};emitDownloadFile(i)}})},Q=K,Y=n("ce7e"),J=n("8860"),X=n("da13"),Z=n("5d23"),ee=n("e449"),te=Object(c["a"])(Q,B,q,!1,null,null,null),ne=te.exports;l()(te,{VBtn:C["a"],VDivider:Y["a"],VIcon:I["a"],VList:J["a"],VListItem:X["a"],VListItemContent:Z["a"],VListItemTitle:Z["c"],VMenu:ee["a"]});var re=ne,ie={release:{type:Object,default:null},episode:{type:Object,default:null},is_playing:{type:Boolean,default:!1}},ae={props:ie,components:{Quality:E,Watched:P,Playing:H,Actions:re},data:function(){return{container:null}},mounted:function(){this.container=this.$refs.container.$el}},se=ae,oe=n("1800"),ce=Object(c["a"])(se,b,_,!1,null,null,null),ue=ce.exports;l()(ce,{VLayout:p["a"],VListItem:X["a"],VListItemAction:oe["a"],VListItemContent:Z["a"],VListItemSubtitle:Z["b"],VListItemTitle:Z["c"]});var le=ue,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{"align-center":""}},[n("search",e._b({on:{"update:search":function(t){return e.$emit("update:search",t)}}},"search",{search:e.search},!1)),n("sort",{staticClass:"mx-1"}),n("actions",e._b({},"actions",{release:e.release,container:e.container},!1))],1)},de=[],fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{height:"48"},on:{click:e.setEpisodesSort}},[n("v-icon",[e._v("mdi-sort")])],1)},he=[],ve={computed:Object(a["a"])(Object(a["a"])({},Object(U["d"])("app/settings",{_episodes_sort:function(e){return e.player.episodes.order}})),{},{order:function(){return"asc"===this._episodes_sort?"desc":"asc"}}),methods:Object(a["a"])(Object(a["a"])({},Object(U["b"])("app/settings",{_setSettingsValue:"setSettingsValue"})),{},{setEpisodesSort:function(){this._setSettingsValue({k:"player.episodes.order",v:this.order})}})},me=ve,be=Object(c["a"])(me,fe,he,!1,null,null,null),_e=be.exports;l()(be,{VBtn:C["a"],VIcon:I["a"]});var ge=_e,ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-text-field",{attrs:{solo:"",clearable:"","hide-details":"","background-color":"#272727","prepend-inner-icon":"mdi-magnify",value:e.search},on:{input:function(t){return e.$emit("update:search",t)}}})},we=[],ke={search:{type:String,default:null}},Oe={props:ke},je=Oe,xe=n("8654"),Ee=Object(c["a"])(je,ye,we,!1,null,null,null),Se=Ee.exports;l()(Ee,{VTextField:xe["a"]});var $e=Se,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-btn",{attrs:{id:"episodes__actions",height:"48"}},[n("v-icon",[e._v("mdi-dots-vertical")])],1),n("v-menu",{attrs:{bottom:"",left:"",activator:"#episodes__actions",attach:e.container}},[n("v-list",{staticClass:"grey darken-4",attrs:{dense:""}},[e._l(e.actions,(function(t,r){return[r>0?n("v-divider",{key:"d:"+r}):e._e(),n("v-list-item",{key:r,attrs:{disabled:e.loading},on:{click:t.action}},[n("v-icon",{staticClass:"mr-2"},[e._v(e._s(t.icon))]),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.title))])],1)],1)]}))],2)],1)],1)},Ve=[],Te={release:{type:Object,default:null}},Ce={props:Te,data:function(){return{loading:!1,container:null}},computed:{actions:function(){return[{icon:"mdi-check",title:"Отметить все серии как просмотренные",action:this.setWatched},{icon:"mdi-close",title:"Снять все отметки о просмотре",action:this.removeWatched}]}},methods:Object(a["a"])(Object(a["a"])({},Object(U["b"])("app/watch",{_setWatchedEpisodes:"setWatchedEpisodes",_removeWatchedEpisodes:"removeWatchedEpisodes"})),{},{setWatched:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,n=e.release.id,r=e.release.episodes||[],i={release_id:n,episodes:r},t.next=6,e._setWatchedEpisodes(i);case 6:e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()},removeWatched:function(){var e=this;return Object(z["a"])(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,n=e.release.id,r=e.release.episodes||[],i={release_id:n,episodes:r},t.next=6,e._removeWatchedEpisodes(i);case 6:e.loading=!1;case 7:case"end":return t.stop()}}),t)})))()}}),mounted:function(){this.container=document.getElementById("playlist")}},Ie=Ce,Ae=Object(c["a"])(Ie,Re,Ve,!1,null,null,null),Le=Ae.exports;l()(Ae,{VBtn:C["a"],VDivider:Y["a"],VIcon:I["a"],VList:J["a"],VListItem:X["a"],VListItemContent:Z["a"],VListItemTitle:Z["c"],VMenu:ee["a"]});var Pe=Le,De={search:{type:String,default:null},release:{type:Object,default:null},container:{type:HTMLDivElement,default:null}},Ne={props:De,components:{Sort:ge,Search:$e,Actions:Pe}},Me=Ne,Fe=Object(c["a"])(Me,pe,de,!1,null,null,null),We=Fe.exports;l()(Fe,{VLayout:p["a"]});var He=We,Be=n("0feb"),qe=n("ffe7"),ze=n.n(qe),Ue=n("93c6"),Ge=n.n(Ue),Ke={loading:{type:Boolean,default:!1},release:{type:Object,default:null},episodes:{type:Array,default:null},show_progress:{type:Boolean,default:!1},playing_episode_id:{type:[String,Number],default:null}},Qe={props:Ke,components:{Loader:m,Episode:le,Toolbar:He,ReleaseProgress:Be["a"]},data:function(){return{search:null}},computed:Object(a["a"])(Object(a["a"])({},Object(U["d"])("app/settings",{_episodes_sort:function(e){return e.player.episodes.order}})),{},{playlist:function(){return Ge()(this.episodes||[],["id"],[this._episodes_sort])},playlistSearchable:function(){return new ze.a(this.playlist,{keys:["title"],threshold:.2})},playlistSearched:function(){return this.search?this.playlistSearchable.search(this.search):this.playlist}})},Ye=Qe,Je=Object(c["a"])(Ye,r,i,!1,null,null,null),Xe=Je.exports;l()(Je,{VDivider:Y["a"],VList:J["a"]});t["a"]=Xe},"126d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("ac1f"),n("5319"),n("96cf");var r=n("1da1"),i={computed:{hasBack:function(){return this.$routerHistory.hasPrevious()}},methods:{toBack:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasBack){t.next=3;break}return t.next=3,e.$router.replace(e.$routerHistory.previous());case 3:case"end":return t.stop()}}),t)})))()}}}},"12fe":function(e,t,n){"use strict";var r=n("d4ec"),i=n("bee2"),a=n("1deb"),s=n("609c"),o=n("c79a"),c="error:emit",u=function(){function e(){Object(r["a"])(this,e)}return Object(i["a"])(e,null,[{key:"emitError",value:function(e){Object(s["b"])((function(){return a["a"].$emit(c,e)}),(function(){return Object(o["c"])((function(){return a["a"].$emit(c,e)}))}))}},{key:"catchError",value:function(e){Object(s["b"])((function(){return a["a"].$on(c,e)}),(function(){return Object(o["c"])((function(){return a["a"].$on(c,e)}))}))}},{key:"unsubscribeError",value:function(e){Object(s["b"])((function(){return a["a"].$off(c,e)}),(function(){return Object(o["c"])((function(){return a["a"].$off(c,e)}))}))}}]),e}();t["a"]=u},1330:function(e,t,n){"use strict";var r=n("d4ec"),i=n("bee2"),a=n("262e"),s=n("2caf"),o=n("560d"),c=n("3513"),u=function(e){Object(a["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(r["a"])(this,n),t.apply(this,arguments)}return Object(i["a"])(n,[{key:"fetch",value:function(e){return{id:this.get(e,"id"),names:{ru:this.stripHtml(this.get(e,"names[0]")),original:this.stripHtml(this.get(e,"names[1]"))},poster:this._getPoster(e)}}},{key:"_getPoster",value:function(e){return(new c["a"]).getReleasePosterPath(this.get(e,"poster"))}}]),n}(o["a"]);t["a"]=u},"1a17":function(e,t,n){},"1aa7":function(e,t,n){"use strict";var r=n("bf2e"),i=n.n(r);i.a},"1de0":function(e,t,n){},"1deb":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("2b0e"),i=new r["a"];r["a"].prototype.$bus=i},"20b8":function(e,t,n){},"212e":function(e,t,n){"use strict";var r=n("c8b0"),i=n.n(r);i.a},3129:function(e,t,n){"use strict";var r=n("6dca"),i=n.n(r);i.a},"33e2":function(e,t,n){"use strict";var r=n("f6c4"),i=n.n(r);i.a},3513:function(e,t,n){"use strict";var r=n("f382");t["a"]=r["a"]},"36b9":function(e,t,n){},"3acf":function(e,t,n){"use strict";var r=n("c81d"),i=n.n(r);i.a},"3b41":function(e,t,n){"use strict";var r=n("916a"),i=n.n(r);i.a},"3e1d":function(e,t,n){"use strict";var r=n("1de0"),i=n.n(r);i.a},"3e8e":function(e,t,n){"use strict";var r=n("4546"),i=n.n(r);i.a},"412d":function(e,t,n){},4360:function(e,t,n){"use strict";n.d(t,"b",(function(){return ft}));n("99af"),n("96cf");var r,i,a,s,o,c,u,l,p=n("1da1"),d=n("2909"),f=n("2b0e"),h=n("2f62"),v=(n("13d5"),n("b64b"),n("ade3")),m=n("5530"),b=function e(t){var n=t.state||{},r=t.modules||{},i=Object.keys(r).reduce((function(t,n){return Object(m["a"])(Object(m["a"])({},t),{},Object(v["a"])({},n,e(r[n])))}),{});return Object(m["a"])(Object(m["a"])({},n),i)},_=function(e){return Object.keys(e).reduce((function(t,n){return Object(m["a"])(Object(m["a"])({},t),{},Object(v["a"])({},n,b(e[n])))}),{})},g=n("0e44"),y=(n("c740"),n("d81d"),n("d3b7"),n("820e"),n("3ca3"),n("ddb0"),n("9b02")),w=n.n(y),k="SET_WATCH_DATA",O="REMOVE_WATCH_DATA",j={namespaced:!0,state:{items:{}},mutations:(r={},Object(v["a"])(r,k,(function(e,t){var n=t.k,r=t.v;return f["a"].set(e.items,n,r)})),Object(v["a"])(r,O,(function(e,t){return f["a"].delete(e.items,t)})),r),getters:{getWatchedEpisode:function(e){return function(t){var n=t.release_id,r=t.episode_id;return w()(e,["items","".concat(n,":").concat(r)])||null}},getWatchedEpisodes:function(e,t){return function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.release_id,r=void 0===n?0:n,i=e.total_episodes_number,a=void 0===i?0:i,s=[],o=1;o<=a;o++){var c=t.getWatchedEpisode({release_id:r,episode_id:o});c&&!0===c.isSeen&&s.push(c)}return s}},getReleaseProgress:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.release_id,r=void 0===n?0:n,i=e.total_episodes_number,a=void 0===i?0:i,s=t.getWatchedEpisodes({release_id:r,total_episodes_number:a});return a>0?s.length/a*100:0}}},actions:{setWatchedEpisode:function(e,t){var n=e.commit,r=e.getters,i=(e.dispatch,t.time),a=t.release_id,s=t.episode_id,o=t.percentage;if(a>-1&&s>-1){var c=r.getWatchedEpisode({release_id:a,episode_id:s}),u={time:i,percentage:o,isSeen:!1},l=w()(c,"isSeen")||null;!0!==l?o>=85&&(u.isSeen=!0):u.isSeen=l,n(k,{k:"".concat(a,":").concat(s),v:u})}},removeWatchedEpisode:function(e,t){var n=e.commit,r=(e.getters,e.dispatch,t.release_id),i=t.episode_id;n(O,"".concat(r,":").concat(i))},setWatchedEpisodes:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,i=t.getters,a=n.release_id,s=n.episodes,!(a&&s&&s.length>0)){e.next=5;break}return e.next=5,Promise.allSettled(s.map((function(e){var t=e.id,n=i.getWatchedEpisode({release_id:a,episode_id:t}),s=w()(n,"isSeen")||!1,o={release_id:a,episode_id:t,percentage:100};!0!==s&&r("setWatchedEpisode",o)})));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),removeWatchedEpisodes:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,t.getters,i=n.release_id,a=n.episodes,!(i&&a&&a.length>0)){e.next=5;break}return e.next=5,Promise.allSettled(a.map((function(e){var t=e.id,n={release_id:i,episode_id:t};r("removeWatchedEpisode",n)})));case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}},x=j,E=n("d4ec"),S=n("bee2"),$=n("262e"),R=n("2caf"),V=n("7372"),T=n("5345"),C=n.n(T),I=n("0699"),A=function(e){Object($["a"])(n,e);var t=Object(R["a"])(n);function n(){return Object(E["a"])(this,n),t.apply(this,arguments)}return Object(S["a"])(n,[{key:"login",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.login,r=t.password,e.next=3,this.submit("POST",this.getApiV1Endpoint()+"/public/login.php",{data:this.prepareFormData({mail:n,passwd:r})});case 3:if(i=e.sent,a=w()(i,"data.key"),"success"!==a){e.next=16;break}if(s=w()(i,"headers.set-cookie",null),o=C()(s,{map:!0}),c=w()(o,"PHPSESSID.value",null),!(c&&c.length>0)){e.next=13;break}return e.abrupt("return",c);case 13:throw new Error("Сессия не определена");case 14:e.next=17;break;case 16:throw new Error(w()(i,"data.mes","Ошибка сервера"));case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.submit("POST",this.getApiV1Endpoint()+"/public/logout.php");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getProfile",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=I["a"],e.next=3,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",{data:this.prepareFormData({query:"user"})});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAvatarPath",value:function(e){return e?this.getStaticEndpoint()+e:null}}]),n}(V["a"]),L=A,P=n("ec26"),D="SET_USER_ID",N="SET_SESSION",M="SET_PROFILE",F={namespaced:!0,state:{userId:null,session:null,profile:{id:null,login:null,avatar:null}},getters:{isAuthorized:function(e){return null!==e.profile.id}},mutations:(i={},Object(v["a"])(i,D,(function(e,t){return e.userId=t})),Object(v["a"])(i,N,(function(e,t){return e.session=t})),Object(v["a"])(i,M,(function(e,t){e.profile.id=w()(t,"id")||null,e.profile.login=w()(t,"login")||null,e.profile.avatar=w()(t,"avatar")||null})),i),actions:{login:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.dispatch,i=n.login,a=n.password,e.next=4,r("setSession",null);case 4:return e.next=6,r("setProfile",null);case 6:return e.next=8,(new L).login({login:i,password:a});case 8:return s=e.sent,e.next=11,r("setSession",s);case 11:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),logout:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.prev=1,e.next=4,(new L).logout();case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e["catch"](1),e.t0;case 9:return e.prev=9,e.next=12,n("setSession",null);case 12:return e.next=14,n("setProfile",null);case 14:return e.finish(9);case 15:case"end":return e.stop()}}),e,null,[[1,6,9,15]])})));function t(t){return e.apply(this,arguments)}return t}(),getProfile:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dispatch,e.prev=1,e.next=4,(new L).getProfile();case 4:return r=e.sent,i=w()(r,"id"),a=w()(r,"login"),s=(new L).getAvatarPath(w()(r,"avatar")),e.next=10,n("setProfile",{id:i,login:a,avatar:s});case 10:e.next=19;break;case 12:return e.prev=12,e.t0=e["catch"](1),e.next=16,n("setSession",null);case 16:return e.next=18,n("setProfile",null);case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[1,12]])})));function t(t){return e.apply(this,arguments)}return t}(),setUserId:function(e){var t=e.commit,n=e.state;null===n.userId&&t(D,Object(P["a"])())},setSession:function(e){var t=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t(N,n||null)},setProfile:function(e){var t=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t(M,n||{})}}},W=F,H=n("0f5c"),B=n.n(H),q="SET_SETTINGS_VALUE",z={namespaced:!0,state:{app:{devtools:!1,notifications:{system:!0},releases_updates:{timeout:10,is_enabled:!0}},ads:{is_enabled:!0,is_maximum:!1},player:{quality:null,anime4k:{bold:6,blur:2,is_enabled:!1},episodes:{order:"asc"},autoplay:{is_enabled:!0},torrents:{is_enabled:!1},skip_opening:{offset:30,is_enabled:!1}}},mutations:Object(v["a"])({},q,(function(e,t){var n=t.k,r=t.v;return B()(e,n,r)})),actions:{setSettingsValue:function(e,t){var n=e.commit,r=t.k,i=t.v;return n(q,{k:r,v:i})}}},U=z,G="SET_DRAWER",K="SET_SEARCHING",Q="RESOLVE_MIGRATION",Y=["app"],J={namespaced:!0,modules:{watch:x,account:W,settings:U},state:{drawer:!1,migrations:[],is_searching:!1},mutations:(a={},Object(v["a"])(a,G,(function(e,t){return e.drawer=t})),Object(v["a"])(a,K,(function(e,t){return e.is_searching=t})),Object(v["a"])(a,Q,(function(e,t){return e.migrations.push(t)})),a),actions:{setDrawer:function(e,t){var n=e.commit;return n(G,t)},setSearching:function(e,t){var n=e.commit;return n(K,t)},resolveMigration:function(e,t){var n=e.state,r=e.commit;-1===n.migrations.findIndex((function(e){return e===t}))&&r(Q,t)}}},X=J,Z=n("3513"),ee=n("a6b5"),te=n("bc3a"),ne=n.n(te),re=n("12fe"),ie=void 0,ae="SET_RELEASE_DATA",se="SET_RELEASE_LOADING",oe=null,ce={namespaced:!0,state:{data:null,request:null,loading:!1},mutations:(s={},Object(v["a"])(s,ae,(function(e,t){return e.data=t})),Object(v["a"])(s,se,(function(e,t){return e.loading=t})),s),actions:{getRelease:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,null!==oe&&oe.cancel(),r(ae,null),r(se,!0),oe=ne.a.CancelToken.source(),e.prev=5,e.next=8,(new Z["a"]).getRelease(n,{cancelToken:oe.token});case 8:return i=e.sent,e.next=11,(new ee["a"]).setStore(ie).setCancelToken(oe.token).fetchWithEpisodes(!0).fetchItem(i);case 11:a=e.sent,r(ae,a),e.next=20;break;case 15:if(e.prev=15,e.t0=e["catch"](5),ne.a.isCancel(e.t0)){e.next=20;break}throw re["a"].emitError("Произошла ошибка при загрузке релиза"),e.t0;case 20:return e.prev=20,r(se,!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[5,15,20,23]])})));function t(t,n){return e.apply(this,arguments)}return t}()}},ue=ce,le=(n("4de4"),n("a15b"),function(e){Object($["a"])(n,e);var t=Object(R["a"])(n);function n(){return Object(E["a"])(this,n),t.apply(this,arguments)}return Object(S["a"])(n,[{key:"getCatalogGenres",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=I["a"],e.next=3,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",{data:this.prepareFormData({query:"genres"})});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCatalogYears",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=I["a"],e.next=3,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",{data:this.prepareFormData({query:"years"})});case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCatalogReleases",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c,u,l,p,d,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.genres,r=void 0===n?[]:n,i=t.years,a=void 0===i?[]:i,s=t.page,o=void 0===s?1:s,c=t.perPage,u=void 0===c?15:c,l=t.sort,p=void 0===l?1:l,d=f.length>1&&void 0!==f[1]?f[1]:{},e.t0=I["a"],e.next=5,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",Object(m["a"])(Object(m["a"])({},d),{},{data:this.prepareFormData({sort:p,page:o,perPage:u,query:"catalog",xpage:"catalog",search:{year:(a||[]).join(","),genre:(r||[]).join(",")}})}));case 5:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(V["a"])),pe=le,de=n("f382"),fe=n("560d"),he=n("cd8a"),ve=n.n(he),me=function(e){Object($["a"])(n,e);var t=Object(R["a"])(n);function n(){return Object(E["a"])(this,n),t.apply(this,arguments)}return Object(S["a"])(n,[{key:"fetch",value:function(e){return{id:this.get(e,"id"),year:this.get(e,"year"),type:this.get(e,"type"),names:{ru:this._stripHtml(this.get(e,"names.0")),original:this._stripHtml(this.get(e,"names.1"))},poster:this._getPoster(e),genres:this.get(e,"genres")||[],description:this._stripHtml(this.get(e,"description"))}}},{key:"_stripHtml",value:function(e){return e?ve()(e):null}},{key:"_getPoster",value:function(e){return(new de["a"]).getReleasePosterPath(this.get(e,"poster"))}}]),n}(fe["a"]),be=me,_e=n("e9a7"),ge=n.n(_e),ye="SET_INITIALIZED",we="SET_FILTER_DATA",ke="SET_FILTER_VALUE",Oe="SET_FILTER_LOADING",je="SET_CATALOG_LOADING",xe="SET_PAGINATION_PAGE",Ee="SET_CATALOG_RELEASES",Se="SET_CATALOG_PAGINATION",$e="CLEAR_CATALOG_RELEASES",Re=["catalog.filters"],Ve={namespaced:!0,state:{items:{data:[],page:1,perPage:12,loading:!0,pagination:null},filters:{genres:{items:[],value:[],loading:!0},years:{items:[],value:[],loading:!0},sort:{value:1}},is_initialized:!1},mutations:(o={},Object(v["a"])(o,we,(function(e,t){var n=t.filter,r=t.data;return e.filters[n].items=r})),Object(v["a"])(o,ke,(function(e,t){var n=t.filter,r=t.value;return e.filters[n].value=r})),Object(v["a"])(o,Oe,(function(e,t){var n=t.filter,r=t.loading;return e.filters[n].loading=r})),Object(v["a"])(o,je,(function(e,t){return e.items.loading=t})),Object(v["a"])(o,Ee,(function(e,t){return e.items.data=[].concat(Object(d["a"])(e.items.data),Object(d["a"])(t))})),Object(v["a"])(o,$e,(function(e){return e.items.data=[]})),Object(v["a"])(o,Se,(function(e,t){return e.items.pagination=t})),Object(v["a"])(o,xe,(function(e,t){return e.items.page=t})),Object(v["a"])(o,ye,(function(e){return e.is_initialized=!0})),o),actions:{getCatalogItems:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c,u,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,e.prev=1,n(ye),n(je,!0),i=r.filters.sort.value,a=r.items.page,s=r.filters.years.value,o=r.filters.genres.value,c=r.items.perPage,e.next=11,(new pe).getCatalogReleases({sort:i,genres:o,years:s,page:a,perPage:c});case 11:u=e.sent,l=u.items,p=(new be).fetchCollection(l),n(Ee,p),n(Se,{page:a,lastItems:p?p.length:0}),e.next=22;break;case 18:throw e.prev=18,e.t0=e["catch"](1),re["a"].emitError("Произошла ошибка при загрузке релизов в каталоге"),e.t0;case 22:return e.prev=22,n(je,!1),e.finish(22);case 25:case"end":return e.stop()}}),e,null,[[1,18,22,25]])})));function t(t){return e.apply(this,arguments)}return t}(),getGenresFilter:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r="genres",e.prev=2,n(Oe,{filter:r,loading:!0}),e.next=6,(new pe).getCatalogGenres();case 6:i=e.sent.map((function(e){return ge()(e)})),n(we,{filter:r,data:i}),e.next=14;break;case 10:throw e.prev=10,e.t0=e["catch"](2),re["a"].emitError("Произошла ошибка при загрузке фильтров по жанрам"),e.t0;case 14:return e.prev=14,n(Oe,{filter:r,loading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));function t(t){return e.apply(this,arguments)}return t}(),getYearsFilter:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r="years",e.prev=2,n(Oe,{filter:r,loading:!0}),e.next=6,(new pe).getCatalogYears();case 6:i=e.sent,n(we,{filter:r,data:i}),e.next=14;break;case 10:throw e.prev=10,e.t0=e["catch"](2),re["a"].emitError("Произошла ошибка при загрузке фильтров по годам"),e.t0;case 14:return e.prev=14,n(Oe,{filter:r,loading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,10,14,17]])})));function t(t){return e.apply(this,arguments)}return t}(),clearCatalogReleases:function(e){var t=e.commit;return t($e)},setFilterValue:function(e,t){var n=e.commit,r=t.filter,i=t.value;return n(ke,{filter:r,value:i})},setPaginationPage:function(e,t){var n=e.commit;return n(xe,t)}}},Te=Ve,Ce=(n("7db0"),n("4160"),n("159b"),n("7675")),Ie="SET_INDEX",Ae="SET_RELEASES_DATA",Le="SET_RELEASES_LOADING",Pe="SET_RELEASES_DATETIME",De="SET_RELEASES_HAS_ERROR",Ne=null,Me={namespaced:!0,state:{data:[],index:null,loading:!1,datetime:null,has_error:!1},mutations:(c={},Object(v["a"])(c,Ie,(function(e,t){return e.index=t})),Object(v["a"])(c,Le,(function(e,t){return e.loading=t})),Object(v["a"])(c,Ae,(function(e,t){return e.data=t})),Object(v["a"])(c,Pe,(function(e,t){return e.datetime=t})),Object(v["a"])(c,De,(function(e,t){return e.has_error=t})),c),actions:{setIndex:function(e,t){var n=e.commit;return n(Ie,t)},getReleases:function(e){var t=this;return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,i=e.dispatch,a=e.state,n.prev=1,r(Le,!0),r(De,!1),Ne&&Ne.cancel(),Ne=ne.a.CancelToken.source(),n.next=8,(new Z["a"]).getReleases({cancelToken:Ne.token});case 8:return s=n.sent,n.next=11,(new ee["a"]).setStore(t).setCancelToken(Ne.token).fetchWithEpisodes(!0).fetchCollection(s);case 11:return o=n.sent.sort((function(e,t){return new Date(t.datetime.system)-new Date(e.datetime.system)})).filter((function(e){return e&&e.episodes&&e.episodes.length>0})),n.next=14,i("_emitReleasesNotifications",{releases:o,previous_releases:a.data});case 14:r(Ae,o),r(Pe,new Date),n.next=24;break;case 18:if(n.prev=18,n.t0=n["catch"](1),ne.a.isCancel(n.t0)){n.next=24;break}throw r(De,!0),re["a"].emitError("Произошла ошибка при загрузке релизов"),n.t0;case 24:return n.prev=24,r(Le,!1),n.finish(24);case 27:case"end":return n.stop()}}),n,null,[[1,18,24,27]])})))()},_emitReleasesNotifications:function(e,t){return Object(p["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.dispatch,i=t.releases,a=t.previous_releases,a&&a.length>0&&i.forEach((function(e){var t=e.id,n=e.episodes.length,i=a.find((function(e){return e.id===t&&e.episodes.length===n}))||null;if(null===i){var s=e.episodes[0];r("notifications/addNotification",{release:e,episode:s},{root:!0}),Ce["a"].emitNotification({release:e,episode:s})}}));case 3:case"end":return n.stop()}}),n)})))()}}},Fe=Me,We=(n("a434"),function(e){Object($["a"])(n,e);var t=Object(R["a"])(n);function n(){return Object(E["a"])(this,n),t.apply(this,arguments)}return Object(S["a"])(n,[{key:"getFavorites",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.t0=I["a"],e.next=4,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",Object(m["a"])(Object(m["a"])({},t),{},{data:this.prepareFormData({page:1,perPage:15,query:"favorites"})}));case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"addToFavorites",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.t0=I["a"],e.next=4,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",Object(m["a"])(Object(m["a"])({},n),{},{data:this.prepareFormData({id:t,action:"add",query:"favorites"})}));case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"removeFromFavorites",value:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.t0=I["a"],e.next=4,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",Object(m["a"])(Object(m["a"])({},n),{},{data:this.prepareFormData({id:t,action:"delete",query:"favorites"})}));case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(V["a"])),He=We,Be=void 0,qe="ADD_ITEM",ze="SET_ITEMS",Ue="SET_LOADING",Ge="REMOVE_ITEM",Ke="SET_SETTINGS_SORT",Qe="SET_SETTINGS_GROUP",Ye="SET_SETTINGS_SHOW_SEEN",Je="SET_SETTINGS_YEARS_COLLAPSED",Xe={},Ze=null,et=["favorites.settings"],tt={namespaced:!0,state:{items:[],loading:!1,settings:{sort:"original",group:"years",show_seen:!0,years_collapsed:[]}},getters:{isAuthorized:function(e,t,n,r){return r["app/account/isAuthorized"]},isInFavorite:function(e){return function(t){return(e.items||[]).findIndex((function(e){return e.id===t.id}))>-1}}},mutations:(u={},Object(v["a"])(u,qe,(function(e,t){return e.items.unshift(t)})),Object(v["a"])(u,ze,(function(e,t){return e.items=t})),Object(v["a"])(u,Ue,(function(e,t){return e.loading=t})),Object(v["a"])(u,Ge,(function(e,t){return e.items.splice(e.items.findIndex((function(e){return e.id===t.id})),1)})),Object(v["a"])(u,Ke,(function(e,t){return e.settings.sort=t})),Object(v["a"])(u,Qe,(function(e,t){return e.settings.group=t})),Object(v["a"])(u,Ye,(function(e,t){return e.settings.show_seen=t})),Object(v["a"])(u,Je,(function(e,t){return e.settings.years_collapsed=t})),u),actions:{getFavorites:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.commit,r=t.getters,!r.isAuthorized){e.next=24;break}return e.prev=2,n(Ue,!0),Ze&&Ze.cancel(),Ze=ne.a.CancelToken.source(),e.next=8,(new He).getFavorites({cancelToken:Ze.token});case 8:return i=e.sent,a=i.items,e.next=12,(new ee["a"]).setStore(Be).setCancelToken(Ze.token).setSkipTorrents(!0).fetchWithEpisodes(!0).fetchCollection(a);case 12:s=e.sent.filter((function(e){return e.episodes.length>0})),n(ze,s),e.next=21;break;case 16:if(e.prev=16,e.t0=e["catch"](2),ne.a.isCancel(e.t0)){e.next=21;break}throw re["a"].emitError("Произошла ошибка при загрузке избранных релизов"),e.t0;case 21:return e.prev=21,n(Ue,!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,16,21,24]])})));function t(t){return e.apply(this,arguments)}return t}(),addToFavorites:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getters,i=t.commit,!n||!r.isAuthorized){e.next=16;break}return e.prev=2,Xe[n.id]&&Xe[n.id].cancel(),Xe[n.id]=ne.a.CancelToken.source(),i(qe,n),e.next=8,(new He).addToFavorites(n.id,{cancelToken:Xe[n.id].token});case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e["catch"](2),ne.a.isCancel(e.t0)){e.next=16;break}throw i(Ge,n),re["a"].emitError(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));function t(t,n){return e.apply(this,arguments)}return t}(),removeFromFavorites:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.getters,i=t.commit,!n||!r.isAuthorized){e.next=16;break}return e.prev=2,Xe[n.id]&&Xe[n.id].cancel(),Xe[n.id]=ne.a.CancelToken.source(),i(Ge,n),e.next=8,(new He).removeFromFavorites(n.id,{cancelToken:Xe[n.id].token});case 8:e.next=16;break;case 10:if(e.prev=10,e.t0=e["catch"](2),ne.a.isCancel(e.t0)){e.next=16;break}throw i(qe,n),re["a"].emitError(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));function t(t,n){return e.apply(this,arguments)}return t}(),setSettingsYearsCollapsed:function(e,t){var n=e.commit,r=e.state,i=Object(d["a"])(r.settings.years_collapsed),a=i.findIndex((function(e){return e===t}));a>-1&&i.splice(a,1),-1===a&&i.push(t),n(Je,i)},setSettingsSort:function(e,t){var n=e.commit;return n(Ke,t)},setSettingsGroup:function(e,t){var n=e.commit;return n(Qe,t)},setSettingsShowSeen:function(e,t){var n=e.commit;return n(Ye,t)}}},nt=tt,rt="PUSH_TO_RELEASES",it="SORT_NOTIFICATIONS",at="CLEAR_NOTIFICATIONS",st="FILTER_NOTIFICATIONS",ot="SET_NOTIFICATIONS_SEEN_STATUS",ct=["notifications"],ut={namespaced:!0,state:{items:[]},mutations:(l={},Object(v["a"])(l,rt,(function(e,t){return e.items.push(t)})),Object(v["a"])(l,st,(function(e){return e.items=e.items.filter((function(e){return new Date(e.datetime).getTime()/1e3+604800>(new Date).getTime()/1e3}))})),Object(v["a"])(l,it,(function(e){return e.items=e.items.sort((function(e,t){return new Date(t.datetime)-new Date(e.datetime)}))})),Object(v["a"])(l,ot,(function(e){return e.items=e.items.map((function(e){return Object(m["a"])(Object(m["a"])({},e),{},{is_seen:!0})}))})),Object(v["a"])(l,at,(function(e){return e.items=[]})),l),actions:{addNotification:function(e,t){var n=e.commit,r=t.release,i=t.episode;r&&i&&n(rt,{release:r,episode:i,is_seen:!1,datetime:new Date}),n(st),n(it)},setAllNotificationsSeen:function(e){var t=e.commit;return t(ot)},clearNotifications:function(e){var t=e.commit;return t(at)}}},lt=ut;f["a"].use(h["a"]);var pt={app:X,release:ue,catalog:Te,releases:Fe,favorites:nt,notifications:lt},dt=new h["a"].Store({modules:pt,plugins:[Object(g["a"])({key:"anilibrix",paths:[].concat(Object(d["a"])(Y),Object(d["a"])(Re),Object(d["a"])(et),Object(d["a"])(ct))})],strict:!1,mutations:{RESET_STORE:function(){this.replaceState(_(pt))},REPLACE_STORE:function(e,t){this.replaceState(t)}},actions:{RESET_STORE:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,n("RESET_STORE");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}),ft=function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,dt.dispatch("app/account/setUserId");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t["a"]=dt},4546:function(e,t,n){},4799:function(e,t,n){"use strict";var r=n("49f3"),i=n.n(r);i.a},"49f3":function(e,t,n){},"4edf":function(e,t,n){},"510e":function(e,t,n){"use strict";var r=n("c023"),i=n.n(r);i.a},"521a":function(e,t,n){"use strict";var r=n("0ff8"),i=n.n(r);i.a},5309:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));n("a18c");var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"ads black",attrs:{column:"","fill-height":""}},[n("video",{ref:"video",attrs:{autoplay:"",muted:"",playsinline:""},domProps:{muted:!0}})])},i=[],a=(n("b0c0"),n("ac1f"),n("1276"),n("b60d")),s=n("f560"),o=n.n(s),c={to:{type:Object,default:null}},u={props:c,name:"Ads.View",meta:{title:"Реклама"},components:{AppToolBar:a["a"]},data:function(){return{plyr:null,is_exiting:!1}},computed:{tagUrl:function(){var e="https://vast.reyden-x.com/vast.php?i=1979,https://mtrcss.com/2449253384/v",t=e?e.split(","):[],n=o()(t);return n[0]?n[0]:null},options:function(){return{ads:{tagUrl:this.tagUrl,enabled:!0},debug:!1,autoplay:!0,controls:!1}},nextRoute:function(){return this.to?{name:this.to.name,params:this.to.params}:{name:"releases"}}},methods:{toRoute:function(){!1===this.is_exiting&&(this.is_exiting=!0,this.$router.push(this.nextRoute))},handleError:function(){!1===this.is_exiting&&this.toRoute()}},mounted:function(){var e=this;this.plyr=new this.$plyr(this.$refs.video,this.options),this.plyr.on("ready",(function(){return e.plyr.play()})),this.plyr.ads.on("error",this.handleError),this.plyr.on("adsimpression",(function(){return e.toRoute()})),null===this.tagUrl&&this.toRoute()}},l=u,p=(n("f9c8"),n("2877")),d=n("6544"),f=n.n(d),h=n("a722"),v=Object(p["a"])(l,r,i,!1,null,"33fe98c8",null),m=v.exports;f()(v,{VLayout:h["a"]});var b=m,_="ads";t["b"]=[{name:_,path:"/ads",props:!0,meta:{layout:{is_on_black:!0}},component:b}]},"560d":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));n("d81d");var r=n("d4ec"),i=n("bee2"),a=n("9b02"),s=n.n(a),o=n("cd8a"),c=n.n(o),u=function(){function e(){Object(r["a"])(this,e)}return Object(i["a"])(e,[{key:"fetchCollection",value:function(e){var t=this;return(e||[]).map((function(e){return t.fetch(e)}))}},{key:"fetchItem",value:function(e){return this.fetch(e)}},{key:"fetch",value:function(e){}},{key:"get",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return s()(e,t,n)}},{key:"stripHtml",value:function(e){return e?c()(e):null}}]),e}()},5688:function(e,t,n){"use strict";var r=n("9cdb"),i=n.n(r);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("96cf");var r=n("1da1"),i=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),a=n("4360"),s=n("a18c"),o=(n("c740"),n("3ca3"),n("ddb0"),n("b85c")),c=n("2909"),u=n("12fe"),l=(n("99af"),n("d3b7"),n("25f0"),n("d4ec")),p=n("bee2"),d=n("262e"),f=n("2caf"),h=function(){function e(){Object(l["a"])(this,e),this.store=null,this.electron=null}return Object(p["a"])(e,[{key:"setProviders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.store,n=void 0===t?null:t,r=e.electron,i=void 0===r?null:r;return this.store=n,this.electron=i,this}},{key:"getMigrationName",value:function(){return null}},{key:"up",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),v=n("9b02"),m=n.n(v),b=n("0f5c"),_=n.n(b),g=n("0644"),y=n.n(g),w=n("609c"),k=function(e){Object(d["a"])(n,e);var t=Object(f["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return Object(p["a"])(n,[{key:"getMigrationName",value:function(){return"2020_09_19_190600_fetch_store_from_file"}},{key:"up",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(w["a"])(Object(r["a"])(regeneratorRuntime.mark((function e(){var n,r,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.electron.remote.app.getPath("userData"),r="anilibrix.json",e.next=4,t.electron.remote.getGlobal("getFileContent")("".concat(n,"/").concat(r));case 4:i=e.sent,i&&(a=JSON.parse(i.toString()),s=a&&a.anilibrix?JSON.parse(a.anilibrix):null,o=y()(t.store.state),_()(o,"app.account.userId",m()(s,"app.account.userId")),_()(o,"app.account.session",m()(s,"app.account.session")),_()(o,"app.account.profile",m()(s,"app.account.profile")),_()(o,"app.watch.items",m()(s,"app.watch.items",[])),t.store.commit("REPLACE_STORE",o));case 6:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(h),O=(n("4160"),n("b64b"),n("159b"),n("5530")),j=function(e){Object(d["a"])(n,e);var t=Object(f["a"])(n);function n(){return Object(l["a"])(this,n),t.apply(this,arguments)}return Object(p["a"])(n,[{key:"getMigrationName",value:function(){return"2020_10_11_140500_set_is_seen_flag_for_watched_data"}},{key:"up",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(w["a"])(Object(r["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=y()(t.store.state),r=Object(O["a"])({},m()(t.store.state,"app.watch.items")||{}),Object.keys(r).forEach((function(e){r[e].is_seen=r[e].isSeen,delete r[e].isSeen})),_()(n,"app.watch.items",r),t.store.commit("REPLACE_STORE",n);case 5:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(h),x=[k,j],E=n("8b2d"),S=Object(c["a"])(x),$=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,i,a,s,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.store,i=Object(E["a"])()?n("bdb9"):null,a=Object(o["a"])(S),e.prev=3,c=regeneratorRuntime.mark((function e(){var t,n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=s.value,n=(new t).setProviders({store:r,electron:i}),a=n.getMigrationName(),o=-1===r.state.app.migrations.findIndex((function(e){return e===a})),!o){e.next=16;break}return e.prev=5,e.next=8,n.up();case 8:return e.next=10,r.dispatch("app/resolveMigration",a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e["catch"](5),u["a"].emitError("Проблема с миграциями БД: "+e.t0),e.abrupt("return","break");case 16:case"end":return e.stop()}}),e,null,[[5,12]])})),a.s();case 6:if((s=a.n()).done){e.next=13;break}return e.delegateYield(c(),"t0",8);case 8:if(l=e.t0,"break"!==l){e.next=11;break}return e.abrupt("break",13);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e["catch"](3),a.e(e.t1);case 18:return e.prev=18,a.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),R=(n("b0c0"),n("9224")),V=(n("dc21"),n("83b1"),n("e594"),n("ade3")),T=n("932e"),C=n.n(T),I={install:function(e,t){var n,r=t.yandex_tracking_id,i=t.store,a=function(e){return m()(i,"state.app.account.".concat(e))},s=function(e){return m()(i,"state.app.settings.".concat(e))},o=a("userId"),c=null!==a("profile.id")?1:0,u=s("app.devtools")?1:0,l=s("app.notifications.system")?1:0,p=s("ads.is_enabled")?1:0,d=s("ads.is_maximum")?1:0,f=s("player.quality"),h=s("player.torrents.is_enabled")?1:0;r&&e.use(C.a,{id:r,env:"production",options:{params:(n={},Object(V["a"])(n,"profile:user_id:".concat(o),!0),Object(V["a"])(n,"profile:user_is_authorized:".concat(c),!0),Object(V["a"])(n,"app:version:".concat(R["version"]),!0),Object(V["a"])(n,"settings:app:devtools:".concat(u),!0),Object(V["a"])(n,"settings:app:notifications:system".concat(l),!0),Object(V["a"])(n,"settings:ads:enabled:".concat(p),!0),Object(V["a"])(n,"settings:ads:maximum:".concat(d),!0),Object(V["a"])(n,"settings:player:quality:".concat(f),!0),Object(V["a"])(n,"settings:player:torrents:enabled:".concat(h),!0),n),trackHash:!0,userParams:{UserID:o},accurateTrackBounce:!0}});e.prototype.$visit=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.$metrika?e.prototype.$metrika.hit(t,Object(O["a"])({title:n},r)):null}}},A=n("f309"),L=(n("5363"),n("2992")),P=n.n(L);i["a"].use(A["a"]);var D={lang:{locales:{ru:P.a},current:"ru"},icons:{iconfont:"mdi"},theme:{dark:!0,themes:{dark:{primary:"#fff",secondary:R["meta"].color}}}},N=new A["a"](D),M=n("4fb8"),F=n.n(M);n("78f6");i["a"].prototype.$plyr=F.a;var W=n("c1df"),H=n.n(W);n("957c");H.a.locale("ru"),i["a"].prototype.$moment=H.a,i["a"].prototype.$__get=m.a;var B=n("58ca");i["a"].use(B["a"],{keyName:"meta"});var q=n("1dce"),z=n.n(q);i["a"].use(z.a);var U=n("a65d"),G=n.n(U);i["a"].use(G.a,{position:"bottom-right",duration:4e3,iconPack:"mdi"});n("1deb"),n("78a7");var K,Q,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("app-topbar"),n("app-settings"),n("app-pwa-update"),e.is_loading?n("app-loader",{key:"loader"}):n(e.layout,{tag:"component"},[n("router-view",{key:e.$route.name})],1),n("app-error"),n("app-notifications")],1)},J=[],X={render:function(){return null},methods:{showError:function(e){this.$toasted.show(e,{type:"error"})}},created:function(){u["a"].catchError(this.showError)},destroyed:function(){u["a"].unsubscribeError(this.showError)}},Z=X,ee=(n("3e1d"),n("2877")),te=Object(ee["a"])(Z,K,Q,!1,null,null,null),ne=te.exports,re=ne,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{"fill-height":"","align-center":"","justify-center":""}},[n("div",{staticClass:"app__loader"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 209 193"}},[n("path",{attrs:{d:"M0 15.2c8.6-5 17.1-10 25.9-15.2C41.2 24.5 56.5 48.8 72 73.6c4.3-11.2 8.4-21.7 12.4-32.2 5-12.9 9.9-25.8 14.8-38.7.7-1.9 1.5-2.6 3.8-2.5 6.6.1 13.2.1 20.2.1 11.2 34.3 22.2 68.5 33.5 103.3 10.3-6.1 20.4-12 30.8-18.1 3.4 9.5 6.8 18.7 10.2 27.8.7 1.8-.5 2.4-1.7 3.1-8.9 5.3-17.8 10.7-26.7 15.9-2.1 1.2-2.6 2.3-1.8 4.5 1.5 3.8 2.6 7.7 4 12 10.8-6.4 21.4-12.8 32.3-19.2 1.8 4.5 3.5 8.7 5.3 13.1-4.3 2.1-8.3 4.2-12.5 6.3-6.4 3.2-12.8 6.4-19.2 9.5-1.8.9-2.2 1.7-1.6 3.6 3.2 9.2 6 18.5 9.1 27.8.3 1 .5 1.9.9 3.1h-35.2c-1.8-5.9-3.6-11.9-5.5-18.3-12.4 6.1-24.4 12.1-36.8 18.2-.9-1.4-1.7-2.7-2.8-4.3 1.5-.9 2.9-1.9 4.4-2.7 10-6 20-12 30.2-18 1.9-1.1 2.6-2.1 1.8-4.2-1.4-3.9-2.4-7.9-3.8-12.4-13.5 8.1-26.7 16-40.4 24.1-7-11.4-13.8-22.6-21-34.4-.5 1.2-.8 1.9-1 2.6-4.4 15.4-9 30.8-13.3 46.2-.7 2.5-1.7 3.4-4.7 3.3-10.3-.2-20.6-.1-31.3-.1 1.4-3.8 2.8-7.4 4.1-11 8.8-22.9 17.6-45.7 26.5-68.6.9-2.3.5-4-.7-6.1C38 77.7 20 48 1.9 18.3c-.7-.9-1.2-1.9-1.9-3.1zM128.8 120c-7.7-26.1-15.4-52.1-23.2-78.4-.7.7-.9.8-.9.9C99.3 60.8 94 79.3 88.8 97.7c-.3 1.2.2 2.9.9 4 5.8 9.4 11.7 18.8 17.5 28.1.4.7 1 1.3 1.5 2 6.8-3.9 13.3-7.8 20.1-11.8z"}})])])])},ae=[],se={},oe=se,ce=(n("521a"),n("6544")),ue=n.n(ce),le=n("a722"),pe=Object(ee["a"])(oe,ie,ae,!1,null,"4ed0d856",null),de=pe.exports;ue()(pe,{VLayout:le["a"]});var fe=de,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return this.isDesktop&&!this.isOnFullscreen?n("v-layout",{staticClass:"black system-bar white--text px-2",attrs:{"align-center":""},on:{dblclick:e.maximizeApp}},[this.isMac?e._e():[this.isWindows?n("v-spacer"):e._e(),e._l(e.controls,(function(t,r){return[n("v-btn",{key:r,staticClass:"system-bar__button",attrs:{icon:"",small:""},on:{click:t.action}},[n("v-icon",{attrs:{small:"",color:"grey"}},[e._v(e._s(t.icon))])],1)]}))]],2):e._e()},ve=[],me=n("8d8d"),be={mixins:[me["a"],me["c"],me["b"]],computed:{controls:function(){var e=this;return[{icon:"mdi-minus",sort:this.isWindows?0:1,action:function(){return e.minimizeApp()}},{icon:"mdi-window-maximize",action:function(){return e.maximizeApp()},sort:this.isWindows?1:2},{icon:"mdi-close",action:function(){return e.closeApp()},sort:this.isWindows?2:0}].sort((function(e,t){return e.sort-t.sort}))}},methods:{closeApp:function(){var e=this;Object(w["a"])((function(){return e.$electron.remote.app.quit()}))},minimizeApp:function(){var e=this;Object(w["a"])((function(){return e.$electron.remote.getCurrentWindow().minimize()}))},maximizeApp:function(){var e=this;Object(w["a"])((function(){var t=e.$electron.remote.getCurrentWindow();t.isMaximized()?t.unmaximize():t.maximize()}))}}},_e=be,ge=(n("0b51"),n("8336")),ye=n("132d"),we=n("2fa4"),ke=Object(ee["a"])(_e,he,ve,!1,null,"32e5a8a5",null),Oe=ke.exports;ue()(ke,{VBtn:ge["a"],VIcon:ye["a"],VLayout:le["a"],VSpacer:we["a"]});var je,xe,Ee=Oe,Se=n("c87f"),$e=(n("4de4"),n("2f62")),Re=n("7675"),Ve=n("a1ca"),Te={render:function(){return null},computed:Object(O["a"])(Object(O["a"])(Object(O["a"])({},Object($e["d"])("app/settings",{_system_notifications:function(e){return e.app.notifications.system}})),Object($e["d"])("notifications",{_items:function(e){return e.items}})),{},{unseenNotifications:function(){return this._items.filter((function(e){return!1===e.is_seen})).length}}),methods:{showNotification:function(e){var t=e.release,n=e.episode;if(t&&n&&!0===this._system_notifications){var r=this.$__get(n,"title"),i=this.$__get(t,"names.ru");if(r&&i){Re["a"].setAppUserModelId();var a=new window.Notification(r,{body:i});a.onclick=function(){return Object(Ve["b"])(t.id,n.id)}}}}},created:function(){Re["a"].catchNotification(this.showNotification)},destroyed:function(){Re["a"].unsubscribeNotification(this.showNotification)},watch:{unseenNotifications:{immediate:!0,handler:function(e){Re["a"].sendNotificationsNumber(e)}}}},Ce=Te,Ie=Object(ee["a"])(Ce,je,xe,!1,null,null,null),Ae=Ie.exports,Le=Ae,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return this.isWeb?n("v-snackbar",{attrs:{app:"",top:"",right:"","multi-line":"",timeout:3e5},model:{value:e.is_visible,callback:function(t){e.is_visible=t},expression:"is_visible"}},[n("span",[e._v("Доступна новая версия приложения")]),n("v-btn",{attrs:{text:"",loading:e.is_visible},on:{click:e.applyServiceWorker}},[e._v("Обновить")])],1):e._e()},De=[],Ne={mixins:[me["a"]],data:function(){return{is_visible:!1,is_activating:!1,is_refreshing:!1,service_worker:null}},methods:{applyServiceWorker:function(){this.service_worker&&this.service_worker.postMessage({type:"SKIP_WAITING"})},resolveState:function(e){var t=e.target.state;"installed"===t&&(this.is_visible=!0),"activating"===t&&(this.is_activating=!0),"activated"===t&&!1===this.is_refreshing&&(this.is_refreshing=!0,window.location.reload())}},mounted:function(){var e=this;this.isWeb&&window.navigator&&navigator.serviceWorker&&(navigator.serviceWorker.getRegistration().then((function(t){t&&t.addEventListener("updatefound",(function(){e.service_worker=t.installing}))})),navigator.serviceWorker.addEventListener("controllerchange",(function(){!1===e.is_refreshing&&(e.is_refreshing=!0,window.location.reload())})))},watch:{service_worker:{deep:!0,handler:function(e,t){this.isWeb&&(e&&e.addEventListener("statechange",this.resolveState,!0),t&&t.removeEventListener("statechange",this.resolveState))}}},destroyed:function(){this.isWeb&&this.service_worker&&this.service_worker.removeEventListener("statechange",this.resolveState)}},Me=Ne,Fe=n("2db4"),We=Object(ee["a"])(Me,Pe,De,!1,null,null,null),He=We.exports;ue()(We,{VBtn:ge["a"],VSnackbar:Fe["a"]});var Be=He,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"base-layout",class:{isOnBlack:e.isOnBlack,isWeb:e.isWeb,isMobile:e.isMobile},attrs:{column:"","fill-height":"",id:"container"}},[this.isMobile?[n("mobile-toolbar",{attrs:{title:e.toolbarTitle,"hide-back":e.toolbarHideBack}}),n("mobile-navigation")]:[n("app-tool-bar")],e._t("default")],2)},ze=[],Ue=n("b60d"),Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app-bar",{attrs:{app:""}},[!e.hideBack&&this.hasBack?n("v-btn",{attrs:{icon:""},on:{click:this.toBack}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-chevron-left")])],1):e._e(),n("v-toolbar-title",{domProps:{textContent:e._s(e.title)}})],1)},Ke=[],Qe=n("126d"),Ye={title:{type:String,default:null},hideBack:{type:Boolean,default:!1}},Je={props:Ye,mixins:[Qe["a"]]},Xe=Je,Ze=(n("4799"),n("40dc")),et=n("2a7f"),tt=Object(ee["a"])(Xe,Ge,Ke,!1,null,"50f461b4",null),nt=tt.exports;ue()(tt,{VAppBar:Ze["a"],VBtn:ge["a"],VIcon:ye["a"],VToolbarTitle:et["a"]});var rt=nt,it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-bottom-navigation",{staticClass:"mobile--navigation",attrs:{app:"",color:"grey darken-3","active-class":"white--text"}},[e._l(e.views,(function(t,r){return[n("v-btn",{key:r,ref:t.ref,refInFor:!0,attrs:{text:"",exact:"","min-width":"65"},on:{click:function(n){return e.toView(t)}}},[n("span",{style:{fontSize:".6rem"}},[e._v(e._s(t.title))]),n("v-icon",[e._v(e._s(t.icon))])],1)]}))],2)},at=[],st=n("d19b"),ot=n("c05b"),ct=n("6c6a"),ut={computed:{views:function(){return[{ref:"releases",icon:"mdi-view-column",title:"Релизы",action:ot["b"]},{ref:"catalog",icon:"mdi-folder-text-outline",title:"Каталог",action:st["b"]},{ref:"search",icon:"mdi-magnify",title:"Поиск",action:ct["c"]},{ref:"settings",icon:"mdi-settings",title:"Настройки",action:ct["d"]}]}},methods:{toView:function(e){e.action(),this.$refs[e.ref][0].$el.blur()}}},lt=ut,pt=(n("8760"),n("b81c")),dt=Object(ee["a"])(lt,it,at,!1,null,"311f5a78",null),ft=dt.exports;ue()(dt,{VBottomNavigation:pt["a"],VBtn:ge["a"],VIcon:ye["a"]});var ht=ft,vt={name:"Layout.Base",mixins:[me["a"],me["c"]],components:{AppToolBar:Ue["a"],MobileToolbar:rt,MobileNavigation:ht},computed:{isOnBlack:function(){return this.$__get(this.$route,"meta.layout.is_on_black")||!1},toolbarTitle:function(){return this.$__get(this.$route,"meta.layout.toolbar_title")},toolbarHideBack:function(){return this.$__get(this.$route,"meta.layout.toolbar_hide_back")}}},mt=vt,bt=(n("5688"),Object(ee["a"])(mt,qe,ze,!1,null,"7473b9ac",null)),_t=bt.exports;ue()(bt,{VLayout:le["a"]});var gt=_t,yt={name:"AniLibrix",components:{AppError:re,AppLoader:fe,AppTopbar:Ee,AppSettings:Se["c"],AppPwaUpdate:Be,AppBaseLayout:gt,AppNotifications:Le},data:function(){return{is_loading:!1,update_handler:null}},computed:Object(O["a"])(Object(O["a"])({},Object($e["d"])("app/settings",{_releases_updates_timeout:function(e){return e.app.releases_updates.timeout},_releases_updates_are_enabled:function(e){return e.app.releases_updates.is_enabled}})),{},{layout:function(){return this.$__get(this.$route,"meta.layout.is",gt)},releasesUpdates:function(){return{releases_updates_timeout:60*(this._releases_updates_timeout>0?this._releases_updates_timeout:1)*1e3,releases_updates_are_enabled:this._releases_updates_are_enabled}}}),methods:Object(O["a"])(Object(O["a"])(Object(O["a"])({},Object($e["b"])("releases",{_getReleases:"getReleases"})),Object($e["b"])("favorites",{_getFavorites:"getFavorites"})),{},{refreshData:function(){this._getReleases(),this._getFavorites()},toggleUpdates:function(){this.update_handler&&clearInterval(this.update_handler),!0===this.releasesUpdates.releases_updates_are_enabled&&(this.update_handler=setInterval(this.refreshData,this.releasesUpdates.releases_updates_timeout))}}),created:function(){var e=this;this.is_loading=!0,setTimeout((function(){return e.is_loading=!1}),1e3),this.refreshData()},watch:{releasesUpdates:{deep:!0,immediate:!0,handler:function(){this.toggleUpdates()}}}},wt=yt,kt=n("7496"),Ot=Object(ee["a"])(wt,Y,J,!1,null,null,null),jt=Ot.exports;ue()(Ot,{VApp:kt["a"]});var xt=n("9483");Object(xt["a"])("".concat("/anilibrix/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),i["a"].config.productionTip=!1,Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$({store:a["a"]});case 2:return e.next=4,Object(a["b"])();case 4:i["a"].use(I,{yandex_tracking_id:"63839527",store:a["a"]}),new i["a"]({store:a["a"],router:s["a"],vuetify:N,render:function(e){return e(jt)}}).$mount("#anilibrix");case 6:case"end":return e.stop()}}),e)})))()},"58a6":function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return b}));n("d3b7");var r=n("5530"),i=n("15fd"),a=(n("96cf"),n("1da1")),s=n("d4ec"),o=n("bee2"),c=n("ec26"),u=n("c79a"),l=(n("1deb"),n("b314")),p=n("609c"),d="torrents:event",f="torrents:parse",h="torrents:start",v="torrents:clear",m="torrents:progress",b=function(){function e(){Object(s["a"])(this,e)}return Object(o["a"])(e,null,[{key:"parseTorrent",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.torrents_id,r=t.torrents_file_content,e.abrupt("return",Object(u["c"])(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i._sendTorrentsWindowEvent(t,f,{torrents_id:n,torrents_file_content:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"startTorrent",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.torrents_id,r=t.file_index,e.abrupt("return",Object(u["c"])(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i._sendTorrentsWindowEvent(t,h,{torrents_id:n,file_index:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clearTorrent",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.torrents_id,e.abrupt("return",Object(u["c"])(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r._sendTorrentsWindowEvent(t,v,{torrents_id:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"emitTorrentProgressWatcher",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.torrents_id,r=t.payload,Object(p["b"])((function(){return console.log("TODO: torrent progress on web")}),(function(){return l["a"].broadcastEvent(m,{torrents_id:n,payload:r})}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"catchTorrentProgressWatcher",value:function(e){Object(p["b"])((function(){return console.log("TODO: catch torrent progress on web")}),(function(){return Object(u["c"])((function(t){return t.ipcRenderer.on(m,(function(t,n){return e(n)}))}))}))}},{key:"resolveTorrentsWindowEvent",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(u["a"])(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.ipcMain.handle(d,(function(e,a){var s=a.channel,o=a.token,c=Object(i["a"])(a,["channel","token"]);return new Promise((function(e){var a=o;t.getWindow().webContents.send(s,Object(r["a"])(Object(r["a"])({},c),{},{token:o})),n.ipcMain.on(s,(function(t,n){var r=n.token,s=Object(i["a"])(n,["token"]);r===a&&e(s)}))}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"_sendTorrentsWindowEvent",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:null,e.abrupt("return",t.ipcRenderer.invoke(d,Object(r["a"])({token:Object(c["a"])(),channel:n},i)));case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}()},"595a":function(e,t,n){"use strict";var r=n("63c2"),i=n.n(r);i.a},"5e33":function(e,t,n){"use strict";var r=n("cf10"),i=n.n(r);i.a},"5fb2":function(e,t,n){},"609c":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n("8b2d"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Object(r["b"])()&&e)return e()},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(Object(r["a"])()&&e)return e()},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(r["b"])()?i(e):Object(r["a"])()?a(t):void 0}},"63c2":function(e,t,n){},"6c6a":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u}));n("d3b7");var r=n("a18c"),i="app.login",a="app.search",s="app.settings",o=function(){return r["a"].push({name:i})},c=function(){return r["a"].push({name:a})},u=function(){return r["a"].push({name:s})};t["a"]=[{path:"/app/login",name:i,component:function(){return n.e("chunk-4cc5dc9f").then(n.bind(null,"4951"))}},{path:"/app/settings",name:s,meta:{layout:{toolbar_title:"Настройки",toolbar_hide_back:!0}},component:function(){return n.e("chunk-2d2308d5").then(n.bind(null,"ed88"))}},{path:"/app/search",name:a,meta:{layout:{toolbar_title:"Поиск релизов",toolbar_hide_back:!0}},component:function(){return n.e("chunk-2d22bd40").then(n.bind(null,"f143"))}}]},"6dca":function(e,t,n){},"6f05":function(e,t,n){"use strict";var r=n("20b8"),i=n.n(r);i.a},7372:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("d4ec"),s=n("bee2"),o=n("4360"),c=n("4328"),u=n.n(c),l=n("9b02"),p=n.n(l),d=(n("9224"),n("609c")),f=n("c79a"),h=n("bc3a"),v=n.n(h),m=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,null,[{key:"make",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["b"])(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.a.request(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.makeDesktopRequest(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"makeDesktopRequest",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f["c"])(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.remote.getGlobal("resolveDesktopRequest")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resolveDesktopRequest",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v.a.request(Object(r["a"])({},t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),b=m,_=function(){function e(){Object(a["a"])(this,e)}return Object(s["a"])(e,[{key:"getApiV1Endpoint",value:function(){return"https://wwnd.space"}},{key:"getStaticEndpoint",value:function(){return"https://static.wwnd.space"}},{key:"submit",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,b.make(Object(r["a"])({url:n,method:t,timeout:15e3,headers:this.getRequestHeaders()},i));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getRequestHeaders",value:function(){var e={},t=p()(o["a"],"state.app.account.session");return t&&t.length>0&&(e.Cookie="PHPSESSID=".concat(t,"; Path=/; Secure; HttpOnly")),e}},{key:"prepareFormData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.a.stringify(e)}}]),e}()},7675:function(e,t,n){"use strict";n("b0c0"),n("d3b7"),n("25f0");var r=n("d4ec"),i=n("bee2"),a=n("609c"),s=n("c79a"),o=n("1deb"),c=n("9224"),u="notifications:emit",l="notifications:number",p=function(){function e(){Object(r["a"])(this,e)}return Object(i["a"])(e,null,[{key:"emitNotification",value:function(e){var t=e.release,n=e.episode;Object(a["b"])((function(){return o["a"].$emit(u,{release:t,episode:n})}),(function(){return Object(s["c"])((function(){return o["a"].$emit(u,{release:t,episode:n})}))}))}},{key:"catchNotification",value:function(e){Object(a["b"])((function(){return o["a"].$on(u,e)}),(function(){return Object(s["c"])((function(){return o["a"].$on(u,e)}))}))}},{key:"unsubscribeNotification",value:function(e){Object(a["b"])((function(){return o["a"].$off(u,e)}),(function(){return Object(s["c"])((function(){return o["a"].$off(u,e)}))}))}},{key:"setAppUserModelId",value:function(){Object(s["c"])((function(e){return e.remote.app.setAppUserModelId(c["meta"].name)}))}},{key:"sendNotificationsNumber",value:function(e){Object(s["c"])((function(t){return t.ipcRenderer.send(l,e)}))}},{key:"setDockNumber",value:function(){Object(s["a"])((function(e){return e.ipcMain.on(l,(function(t,n){e.app.dock&&e.app.dock.setBadge(n&&n>0?n.toString():"")}))}))}}]),e}();t["a"]=p},"77a5":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r={methods:{handleMouseEvents:function(e){},handleMouseScroll:function(e){}},mounted:function(){window.addEventListener("mousemove",this.handleMouseEvents),window.addEventListener("mousewheel",this.handleMouseScroll)},destroyed:function(){window.removeEventListener("mousemove",this.handleMouseEvents),window.removeEventListener("mousewheel",this.handleMouseScroll)}},i={methods:{handleKeyboardEvents:function(e){}},mounted:function(){document.addEventListener("keydown",this.handleKeyboardEvents)},destroyed:function(){document.removeEventListener("keydown",this.handleKeyboardEvents)}}},"78a7":function(e,t,n){},"79e1":function(e,t,n){},"7b52":function(e,t,n){"use strict";t["a"]=function(e,t){var n=[2,0,1,1,1,2];return e+" "+t[e%100>4&&e%100<20?2:n[Math.min(e%10,5)]]}},"7c9e":function(e,t,n){"use strict";var r=n("8551"),i=n.n(r);i.a},"82b9":function(e,t,n){},8446:function(e,t,n){"use strict";var r=n("1a17"),i=n.n(r);i.a},8551:function(e,t,n){},8760:function(e,t,n){"use strict";var r=n("4edf"),i=n.n(r);i.a},"882d":function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n("d3b7");var r=n("a18c"),i="release",a=function(e){return r["a"].push({name:i,params:{release_id:e}})};t["a"]=[{name:i,path:"/release/:release_id/",meta:{toolbar:{title:"Релиз"}},props:!0,component:function(){return n.e("chunk-6c808d01").then(n.bind(null,"b1ff"))}}]},8943:function(e,t,n){"use strict";(function(e){t["a"]={computed:{isMac:function(){return"darwin"===e.platform},isWindows:function(){return"win32"===e.platform}}}}).call(this,n("4362"))},"8b2d":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=function(){return!0},i=function(){return!1}},"8d8d":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a["a"]})),n.d(t,"b",(function(){return o}));var r=n("8b2d"),i={computed:{isWeb:function(){return Object(r["b"])()},isDesktop:function(){return Object(r["a"])()},isMobile:function(){return this.$vuetify.breakpoint.smAndDown&&Object(r["b"])()}}},a=n("8943"),s=n("c79a"),o={data:function(){return{is_fullscreen:!1}},computed:{isOnFullscreen:function(){return!!this.is_fullscreen},heightOffset:function(){return this.is_fullscreen?null:"40px"}},methods:{_setFullscreenState:function(){var e=this;Object(s["c"])((function(t){return e.is_fullscreen=t.remote.getCurrentWindow().isFullScreen()}))}},created:function(){var e=this;this._setFullscreenState(),Object(s["c"])((function(t){t.remote.getCurrentWindow().on("enter-full-screen",e._setFullscreenState),t.remote.getCurrentWindow().on("leave-full-screen",e._setFullscreenState)}))},beforeDestroy:function(){var e=this;Object(s["c"])((function(t){t.remote.getCurrentWindow().off("enter-full-screen",e._setFullscreenState),t.remote.getCurrentWindow().off("leave-full-screen",e._setFullscreenState)}))}}},"8edb":function(e,t,n){"use strict";var r=n("a427"),i=n.n(r);i.a},"916a":function(e,t,n){},9224:function(e){e.exports=JSON.parse('{"name":"anilibrix","version":"1.3.15-alpha","private":true,"description":"AniLibrix - AniLibria desktop app","author":"AniLibria","scripts":{"desktop:build":"vue-cli-service electron:build","desktop:build:skip":"vue-cli-service electron:build --skipBundle","desktop:release:mac":"vue-cli-service electron:build -- --mac","desktop:release:win:test":"vue-cli-service electron:build --win","desktop:serve":"vue-cli-service electron:serve","postinstall":"electron-builder install-app-deps","postuninstall":"electron-builder install-app-deps","web:build":"vue-cli-service build","web:serve":"vue-cli-service serve"},"main":"background.js","dependencies":{"@mdi/font":"^4.8.95","@sentry/browser":"^5.15.5","@sentry/electron":"1.3.0","@sentry/integrations":"^5.15.5","anime4k":"^1.0.1","axios":"^0.19.2","core-js":"^3.6.5","firebase":"^7.17.1","flatted":"^3.0.5","form-data":"^3.0.0","fuse.js":"^3.4.6","hls.js":"^0.13.1","ljson":"^2.1.0","lodash":"^4.17.19","moment":"^2.24.0","parse-torrent":"^7.1.3","pixi.js":"^5.3.3","plyr":"^3.5.7-beta.0","pretty-bytes":"^5.4.1","qs":"^6.9.4","register-service-worker":"^1.7.1","rimraf":"^3.0.2","screenfull":"^5.0.2","set-cookie-parser":"^2.4.6","string-strip-html":"^4.3.16","uuid":"^7.0.3","vue":"^2.6.11","vue-analytics":"^5.22.1","vue-clamp":"^0.2.2","vue-electron":"^1.0.6","vue-meta":"^2.3.4","vue-router":"^3.2.0","vue-router-back-button":"^1.2.3","vue-toasted":"^1.1.27","vue-yandex-metrika":"^1.8.3","vuelidate":"^0.7.5","vuetify":"^2.2.8","vuex":"^3.4.0","vuex-persistedstate":"^3.0.1","webtorrent":"^0.108.6"},"devDependencies":{"@vue/cli-plugin-babel":"~4.4.0","@vue/cli-plugin-eslint":"~4.4.0","@vue/cli-plugin-pwa":"~4.5.0","@vue/cli-plugin-router":"~4.4.0","@vue/cli-plugin-vuex":"~4.4.0","@vue/cli-service":"~4.4.0","babel-eslint":"^10.1.0","babel-plugin-add-module-exports":"^1.0.4","deepmerge":"^4.2.2","dotenv-webpack":"^2.0.0","electron":"^11.0.0-beta.13","electron-devtools-installer":"^3.1.0","electron-icon-builder":"^1.0.2","eslint":"^6.7.2","eslint-plugin-vue":"^6.2.2","fibers":"^5.0.0","raw-loader":"^4.0.1","sass":"^1.26.10","sass-loader":"^9.0.2","vue-cli-plugin-electron-builder":"~2.0.0-rc.4","vue-cli-plugin-vuetify":"^2.0.7","vue-template-compiler":"^2.6.11","vuetify-loader":"^1.6.0"},"license":null,"meta":{"name":"AniLibrix","color":"#D42F35","build":{"appId":"com.anilibria.anilibrix"},"links":{"github":"https://github.com/pavelshar/anilibrix","donate":"https://www.anilibria.tv/pages/donate.php","telegram":"tg://resolve?domain=anilibrix","anilibria":"https://anilibria.tv"}}}')},"92fb":function(e,t,n){"use strict";var r=n("36b9"),i=n.n(r);i.a},"942c":function(e,t,n){"use strict";var r=n("412d"),i=n.n(r);i.a},9760:function(e,t,n){},"994a":function(e,t,n){"use strict";var r=n("7b52");t["a"]=r["a"]},"9ab7":function(e,t,n){"use strict";var r=n("5fb2"),i=n.n(r);i.a},"9cdb":function(e,t,n){},"9e6d":function(e,t,n){"use strict";var r=n("aa71"),i=n.n(r);i.a},a18c:function(e,t,n){"use strict";n("99af");var r=n("2b0e"),i=n("8c4f"),a=n("688f"),s=n.n(a),o=n("5309"),c=o["b"],u=n("6c6a"),l=u["a"],p=n("e68c"),d=p["a"],f=n("a1ca"),h=f["a"],v=n("882d"),m=v["a"],b=n("d19b"),_=b["a"],g=n("c05b"),y=g["a"],w=(n("d3b7"),"favorites"),k=[{name:w,path:"/favorites",props:!0,component:function(){return n.e("chunk-37056bf3").then(n.bind(null,"6497"))}}],O=k;r["a"].use(i["a"]);var j=i["a"].prototype.push;i["a"].prototype.push=function(e){j.call(this,e).catch((function(){return null}))};var x=new i["a"]({mode:"history",base:"/anilibrix/",routes:[].concat(c,l,d,h,m,_,y,O)});r["a"].use(s.a,{router:x});t["a"]=x},a1ca:function(e,t,n){"use strict";n.d(t,"b",(function(){return Oa}));n("b0c0");var r=n("5530"),i=n("4360"),a=n("a18c"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.is_loading?n("loader"):n("v-layout",{attrs:{"align-center":"","fill-height":""}},[n(e.handler,e._b({key:"video:"+e.anchor,tag:"component",attrs:{time:e.time,duration:e.duration},on:{"update:time":function(t){e.time=t},"update:duration":function(t){e.duration=t},error:e.toBlank},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.player;return[n("interface",e._b({key:"interface:"+e.anchor,on:{"play:episode":e.toVideo,"update:quality":e.setQuality}},"interface",{player:r,source:e.source,release:e.release,episode:e.episode},!1))]}}])},"component",{sources:e.sources,source:e.source},!1))],1)},o=[],c=(n("99af"),n("7db0"),n("ac1f"),n("1276"),n("3835")),u=(n("96cf"),n("1da1")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"pa-8 interface",attrs:{column:""}},[n("div",{staticClass:"mt-8"},[n("v-skeleton-loader",{attrs:{boilerplate:"",type:"text",width:"230"}}),n("v-skeleton-loader",{attrs:{boilerplate:"",type:"heading",width:"140px",height:"30px"}})],1),n("div",{staticClass:"mt-6"},[n("v-skeleton-loader",{attrs:{boilerplate:"",type:"text",width:"100%",height:"3px"}})],1),n("v-row",{staticClass:"mt-4",style:{flex:"none"},attrs:{"no-gutters":"",justify:"center"}},[n("v-col",{attrs:{"align-self":"center"}},[n("v-layout",{attrs:{"align-center":"","justify-start":""}},[n("v-skeleton-loader",{staticClass:"mr-2",attrs:{boilerplate:"",type:"avatar",width:"32",height:"32"}}),n("v-skeleton-loader",{staticClass:"mr-2",attrs:{boilerplate:"",type:"avatar",width:"32",height:"32"}}),n("v-skeleton-loader",{staticClass:"mr-2",attrs:{boilerplate:"",type:"avatar",width:"32",height:"32"}})],1)],1),n("v-col",{attrs:{"align-self":"center"}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-skeleton-loader",{attrs:{boilerplate:"",type:"avatar",width:"38",height:"38"}}),n("v-skeleton-loader",{staticClass:"mx-3",attrs:{boilerplate:"",type:"avatar",height:"90",width:"90"}}),n("v-skeleton-loader",{attrs:{boilerplate:"",type:"avatar",width:"38",height:"38"}})],1)],1),n("v-col",{attrs:{"align-self":"center"}},[n("v-layout",{attrs:{"align-center":"","justify-end":""}},[n("v-skeleton-loader",{staticClass:"mr-2",attrs:{boilerplate:"",type:"avatar",width:"32",height:"32"}}),n("v-skeleton-loader",{staticClass:"mr-2",attrs:{boilerplate:"",type:"avatar",width:"32",height:"32"}}),n("v-skeleton-loader",{staticClass:"mr-2",attrs:{boilerplate:"",type:"avatar",width:"32",height:"32"}}),n("v-skeleton-loader",{staticClass:"mr-2",attrs:{boilerplate:"",type:"avatar",width:"32",height:"32"}})],1)],1)],1)],1)},p=[],d=(n("3b41"),n("2877")),f=n("6544"),h=n.n(f),v=n("62ad"),m=n("a722"),b=n("0fd9"),_=n("31292"),g={},y=Object(d["a"])(g,l,p,!1,null,null,null),w=y.exports;h()(y,{VCol:v["a"],VLayout:m["a"],VRow:b["a"],VSkeletonLoader:_["a"]});var k=w,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticClass:"interface__container"},[n("v-fade-transition",{attrs:{appear:"",mode:"out-in"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.interface_is_visible,expression:"interface_is_visible"}],ref:"interface",staticClass:"interface pa-8",class:{"interface--mobile":this.isMobile}},[n("v-layout",{attrs:{column:""}},[n("headline",e._b({staticClass:"pb-2"},"headline",{player:e.player,release:e.release,episode:e.episode},!1)),n("seek",e._b({},"seek",{player:e.player},!1)),n("v-row",{attrs:{"no-gutters":"",justify:"center"}},[n("v-col",{attrs:{"align-self":"center"}},[n("video-left-controls",e._b({on:{"update:time":e.updateTime,"update:muted":e.updateMuted,"update:volume":e.updateVolume}},"video-left-controls",{release:e.release,source:e.source,player:e.player},!1))],1),n("v-col",{attrs:{"align-self":"center"}},[n("play",e._b({on:{"toggle:play":e.togglePlay,"play:episode":function(t){return e.$emit("play:episode",t)}}},"play",{player:e.player,release:e.release,episode:e.episode},!1))],1),n("v-col",{attrs:{"align-self":"center"}},[n("video-right-controls",e._b({on:{"toggle:pip":e.togglePIP,"update:speed":e.updateSpeed,"update:quality":function(t){return e.$emit("update:quality",t)},"toggle:fullscreen":e.toggleFullscreen}},"video-right-controls",{episode:e.episode,source:e.source,player:e.player},!1))],1)],1)],1)],1)]),e._l(e.misc,(function(t,r){return n(t.is,e._g(e._b({key:t.key||r,ref:t.ref,refInFor:!0,tag:"component"},"component",t.props,!1),t.events))}))],2)},j=[],x=(n("4160"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{position:"relative"},on:{mousemove:e.showSeekTooltip,mouseleave:function(t){e.is_hovered=!1}}},[n("v-slider",{ref:"slider",staticClass:"slider__timeline",attrs:{"hide-details":"","validate-on-blur":"",color:"secondary",min:0,max:e.is_ready?e.duration:100,value:e.is_ready?e.time:0,disabled:!1===e.is_ready},on:{change:e.changeTime,mouseup:function(t){e.is_seeking=!1},mousedown:function(t){e.is_seeking=!0}},scopedSlots:e._u([{key:"thumb-label",fn:function(t){var r=t.value;return[e.is_seeking?n("timer",e._b({},"timer",{value:r},!1)):e._e()]}}])}),e.is_hovered&&!e.is_seeking?n("tooltip",e._b({scopedSlots:e._u([{key:"default",fn:function(t){var r=t.value;return[n("timer",e._b({},"timer",{value:r},!1))]}}],null,!1,1863671144)},"tooltip",{duration:e.duration,cursor_left_offset:e.cursor_left_offset,seek_tooltip_position:e.seek_tooltip_position},!1)):e._e()],1)}),E=[],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"seek__timer secondary"},[e._v(" "+e._s(e.time)+" ")])},$=[],R=(n("a9e3"),n("4de4"),n("a15b"),n("d81d"),function(e){var t=parseInt(e,10),n=Math.floor(t/3600),r=Math.floor(t/60)%60,i=t%60;return[n,r,i].map((function(e){return e<10?"0"+e:e})).filter((function(e,t){return"00"!==e||t>0})).join(":")}),V=R,T={value:{type:Number,default:null}},C={props:T,computed:{time:function(){return this.value?V(this.value):null}}},I=C,A=(n("8446"),Object(d["a"])(I,S,$,!1,null,"69f3d61f",null)),L=A.exports,P=L,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.value?n("div",{staticClass:"seek__tooltip secondary",style:{left:e.cursor_left_offset+"px"}},[e._t("default",null,null,{value:e.value})],2):e._e()},N=[],M={duration:{type:Number,default:null},cursor_left_offset:{type:Number,default:null},seek_tooltip_position:{type:Number,default:null}},F={props:M,computed:{value:function(){return this.duration&&this.seek_tooltip_position?this.duration/100*this.seek_tooltip_position+1:null}}},W=F,H=(n("595a"),Object(d["a"])(W,D,N,!1,null,"24753237",null)),B=H.exports,q=B,z=n("8d8d"),U={player:{type:Object,default:null}},G={props:U,mixins:[z["a"]],components:{Timer:P,Tooltip:q},data:function(){return{time:0,is_ready:!1,duration:0,is_seeking:!1,is_hovered:!1,cursor_left_offset:0,seek_tooltip_position:0}},methods:{changeTime:function(e){this.player.currentTime=e,this.$refs.slider.$refs.thumb.blur()},showSeekTooltip:function(e){var t=this.$refs.slider.$el.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);this.is_hovered=!0,this.cursor_left_offset=e.pageX,this.seek_tooltip_position=parseFloat(n)}},mounted:function(){var e=this;this.player.on("timeupdate",(function(){!1===e.is_seeking&&(e.time=e.player.currentTime)})),this.player.on("progress",(function(){return e.duration=e.player.duration})),this.player.on("playing",(function(){return e.is_ready=!0})),this.player.on("seeking",(function(){return e.player.play()}))}},K=G,Q=(n("6f05"),n("ba0d")),Y=Object(d["a"])(K,x,E,!1,null,"4a7dd084",null),J=Y.exports;h()(Y,{VSlider:Q["a"]});var X=J,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{style:{lineHeight:1},attrs:{"justify-space-between":"","align-content-end":""}},[n("description",e._b({},"description",{release:e.release,episode:e.episode},!1)),n("duration",e._b({},"duration",{player:e.player},!1))],1)},ee=[],te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.is_ready&&e.current_time&&e.total_duration?n("v-layout",{staticClass:"shrink duration font-weight-bold",attrs:{"align-end":""}},[e._v(" "+e._s(e.time)+" / "+e._s(e.duration)+" ")]):e._e()},ne=[],re={player:{type:Object,default:null}},ie={props:re,data:function(){return{is_ready:!1,current_time:0,total_duration:0}},computed:{duration:function(){return V(this.total_duration)},time:function(){return V(this.current_time)}},mounted:function(){var e=this;this.$nextTick((function(){e.player.on("progress",(function(t){return e.total_duration=e.$__get(t,"detail.plyr.duration")})),e.player.on("timeupdate",(function(){return e.current_time=e.player.currentTime})),e.player.on("loadedmetadata",(function(){return e.is_ready=!0}))}))}},ae=ie,se=(n("d9ff"),Object(d["a"])(ae,te,ne,!1,null,"4cecc9a0",null)),oe=se.exports;h()(se,{VLayout:m["a"]});var ce=oe,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.caption&&e.title?n("div",{staticClass:"d-flex flex-column justify-end",class:{"interface__headline--mobile":this.isMobile}},[n("h4",{staticClass:"pb-1"},[e._v(e._s(e.caption))]),n("h1",[e._v(e._s(e.title))])]):e._e()},le=[],pe={release:{type:Object,default:null},episode:{type:Object,default:null}},de={props:pe,mixins:[z["a"]],computed:{caption:function(){return this.$__get(this.release,"names.ru")},title:function(){return this.$__get(this.episode,"title")}}},fe=de,he=(n("3e8e"),Object(d["a"])(fe,ue,le,!1,null,"39498cd2",null)),ve=he.exports,me=ve,be={player:{type:Object,default:null},release:{type:Object,default:null},episode:{type:Object,default:null}},_e={props:be,components:{Duration:ce,Description:me}},ge=_e,ye=Object(d["a"])(ge,Z,ee,!1,null,null,null),we=ye.exports;h()(ye,{VLayout:m["a"]});var ke=we,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{ref:"play",staticClass:"interface__play",class:{"interface__play--mobile":this.isMobile},attrs:{"align-center":"","justify-center":""}},[e.is_mounted?[n("v-tooltip",{attrs:{left:"",attach:e.$refs.play},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"play__button",attrs:{icon:"",large:"",disabled:!e.previous},on:{click:function(t){return e.toEpisode(e.previous)}}},r),[n("v-icon",[e._v("mdi-skip-previous")])],1)]}}],null,!1,832811453)},[e.previous?n("div",{staticClass:"play__tooltip py-2"},[n("div",{staticClass:"caption pb-1"},[e._v(e._s(e.title))]),n("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.previous.title))])]):e._e()]),n("v-btn",{staticClass:"mx-2 play__button",attrs:{icon:"",width:"90",height:"90",disabled:e.is_buffering},on:{click:function(t){return e.$emit("toggle:play")}}},[n("v-icon",{attrs:{size:"40"}},[e._v("mdi-"+e._s(e.is_playing?"pause":"play"))])],1),n("v-tooltip",{attrs:{right:"",attach:e.$refs.play},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({staticClass:"play__button",attrs:{icon:"",large:"",disabled:!e.next},on:{click:function(t){return e.toEpisode(e.next)}}},r),[n("v-icon",[e._v("mdi-skip-next")])],1)]}}],null,!1,3496567179)},[e.next?n("div",{staticClass:"play__tooltip py-2"},[n("div",{staticClass:"caption pb-1"},[e._v(e._s(e.title))]),n("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.next.title))])]):e._e()])]:e._e()],2)},je=[],xe={player:{type:Object,default:null},episode:{type:Object,default:null},release:{type:Object,default:null}},Ee={props:xe,mixins:[z["a"]],data:function(){return{handler:null,is_mounted:!1,is_playing:!1,is_buffering:!1}},computed:{title:function(){return this.$__get(this.release,"names.ru")},episodes:function(){return this.$__get(this.release,"episodes")||[]},next:function(){var e=this;return this.episodes.find((function(t){return t.id===(e.$__get(e.episode,"id")||-1)+1}))||null},previous:function(){var e=this;return this.episodes.find((function(t){return t.id===(e.$__get(e.episode,"id")||-1)-1}))||null}},methods:{toEpisode:function(e){this.release&&e&&this.$emit("play:episode",{params:{from_start:!0},episode_id:e.id,release_id:this.release.id})},rewind:function(){var e=this;this.$refs.rewind.classList.remove("animation"),this.player.currentTime=Math.max(0,this.player.currentTime-30),this.$refs.rewind.classList.add("animation"),setTimeout((function(){return e.$refs.rewind.classList.remove("animation")}),650)}},created:function(){var e=this;this.handler=setInterval((function(){e.is_playing=e.player.playing,e.is_buffering=e.player.loading}),200)},mounted:function(){this.is_mounted=!0},destroyed:function(){this.handler&&clearInterval(this.handler)}},Se=Ee,$e=(n("7c9e"),n("8336")),Re=n("132d"),Ve=n("3a2f"),Te=Object(d["a"])(Se,Oe,je,!1,null,"63c1d223",null),Ce=Te.exports;h()(Te,{VBtn:$e["a"],VIcon:Re["a"],VLayout:m["a"],VTooltip:Ve["a"]});var Ie=Ce,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{ref:"links",class:{"interface__left__controls--mobile":this.isMobile},attrs:{"align-center":"","justify-start":""}},[e.is_mounted?e._l(e.controls,(function(t,r){return n(t.is,e._g(e._b({key:r,tag:"component",class:t.classes},"component",t.props,!1),t.events))})):e._e()],2)},Le=[],Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{icon:"",large:""},on:{click:e.toReleases}},r),[n("v-icon",{attrs:{size:"24"}},[e._v("mdi-view-column")])],1)]}}])},[n("span",[e._v("Релизы")])])},De=[],Ne=n("c05b"),Me={methods:Object(r["a"])({},{toReleases:Ne["b"]})},Fe=Me,We=Object(d["a"])(Fe,Pe,De,!1,null,null,null),He=We.exports;h()(We,{VBtn:$e["a"],VIcon:Re["a"],VTooltip:Ve["a"]});var Be=He,qe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"shrink",attrs:{"align-center":""},on:{mouseenter:function(t){e.is_collapsed=!1},mouseleave:function(t){e.is_collapsed=!0}}},[n("v-btn",{attrs:{icon:"",large:""},on:{click:function(t){return e.$emit("update:muted",!e.is_muted)}}},[n("v-icon",{attrs:{size:"24"}},[e._v("mdi-volume-"+e._s(e.getVolumeState))])],1),n("v-slide-x-transition",[e.is_collapsed?e._e():n("v-slider",{style:{maxWidth:"70px",width:"70px"},attrs:{"hide-details":"",min:"0",max:"1",step:".1",value:e.is_muted?0:e.volume},on:{input:function(t){return e.$emit("update:volume",t)}}})],1)],1)},ze=[],Ue={player:{type:Object,default:null}},Ge={props:Ue,data:function(){return{volume:.5,is_muted:!1,is_collapsed:!0}},computed:{getVolumeState:function(){return this.is_muted?"off":this.volume<=.33?"low":this.volume>.33&&this.volume<=.66?"medium":this.volume>.66?"high":void 0}},mounted:function(){var e=this;this.volume=this.player.volume,this.is_muted=this.player.muted,this.player.on("volumechange",(function(t){e.volume=e.player.volume,e.is_muted=e.player.muted}))}},Ke=Ge,Qe=n("0789"),Ye=Object(d["a"])(Ke,qe,ze,!1,null,null,null),Je=Ye.exports;h()(Ye,{VBtn:$e["a"],VIcon:Re["a"],VLayout:m["a"],VSlideXTransition:Qe["f"],VSlider:Q["a"]});var Xe=Je,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{icon:"",large:""},on:{click:function(t){return e.toRelease(e.release.id)}}},r),[n("v-avatar",{attrs:{size:"24"}},[n("v-img",e._b({},"v-img",{src:e.src},!1))],1)],1)]}}])},[n("span",[e._v(e._s(e.title))])])},et=[],tt=n("882d"),nt={release:{type:Object,default:null}},rt={props:nt,computed:{src:function(){return this.$__get(this.release,"poster")},title:function(){return this.$__get(this.release,"names.ru")}},methods:Object(r["a"])({},{toRelease:tt["b"]})},it=rt,at=n("8212"),st=n("adda"),ot=Object(d["a"])(it,Ze,et,!1,null,null,null),ct=ot.exports;h()(ot,{VAvatar:at["a"],VBtn:$e["a"],VImg:st["a"],VTooltip:Ve["a"]});var ut=ct,lt={player:{type:Object,default:null},release:{type:Object,default:null},source:{type:Object,default:null},getTorrentDrawer:{type:Function,default:null}},pt={props:lt,mixins:[z["a"]],data:function(){return{is_mounted:!1}},computed:{controls:function(){var e=this;return[{is:Be,visible:!0},{is:ut,props:{release:this.release},visible:!0},{is:Xe,props:{player:this.player},events:{"update:muted":function(t){return e.$emit("update:muted",t)},"update:volume":function(t){return e.$emit("update:volume",t)}},visible:!this.isMobile}].filter((function(e){return!0===e.visible}))}},mounted:function(){this.is_mounted=!0}},dt=pt,ft=(n("212e"),Object(d["a"])(dt,Ae,Le,!1,null,"740764b6",null)),ht=ft.exports;h()(ft,{VLayout:m["a"]});var vt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{ref:"controls",class:{"interface__right__controls--mobile":this.isMobile},attrs:{"align-center":"","justify-end":""}},[e.is_mounted?e._l(e.controls,(function(t,r){return n(t.is,e._g(e._b({key:r,tag:"component",class:t.classes},"component",t.props,!1),t.events))})):e._e()],2)},mt=[],bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{icon:"",large:""},on:{click:function(t){return e.$emit("click")}}},[n("v-icon",{attrs:{size:"22"}},[e._v("mdi-picture-in-picture-bottom-right")])],1)},_t=[],gt={},yt=Object(d["a"])(gt,bt,_t,!1,null,null,null),wt=yt.exports;h()(yt,{VBtn:$e["a"],VIcon:Re["a"]});var kt=wt,Ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"settings",style:{position:"relative"}},[n("v-btn",{attrs:{icon:"",large:""},on:{click:function(t){return e.showSettings("selector")}}},[n("v-icon",{attrs:{size:"22"}},[e._v("mdi-settings")])],1),n("v-overlay",{attrs:{opacity:"0",value:!!e.component}},[e.handler?n(e.handler.is,e._g(e._b({key:e.handler.alias,tag:"component",attrs:{attach:function(){return e.$refs.settings}},on:{back:function(t){return e.showSettings("selector")},close:e.closeSettings,"update:component":e.showSettings}},"component",e.handler.props,!1),e.handler.events)):e._e()],1)],1)},jt=[],xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("options",e._b({attrs:{is_back:"",width:"180"},on:{back:function(t){return e.$emit("back")},close:function(t){return e.$emit("close")}}},"options",{attach:e.attach},!1),[e._l(e.variants,(function(t,r){return[n("v-list-item",{key:r,attrs:{"input-value":t.value===e.active.value},on:{click:function(n){return e.updateSpeed(t.value)}}},[n("v-list-item-subtitle",{domProps:{textContent:e._s(t.label)}})],1)]}))],2)},Et=[],St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-menu",{directives:[{name:"click-outside",rawName:"v-click-outside",value:function(){return e.close()},expression:"() => close()"}],attrs:{left:"",top:!this.isMobile,value:!0,attach:e.attach(),bottom:this.isMobile,"min-width":e.width,"close-on-click":!1,"close-on-content-click":!1}},[n("v-list",{staticClass:"video__settings__items",attrs:{nav:"",dense:""}},[e.is_back?[n("v-list-item",{on:{click:e.back}},[n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-chevron-left")]),n("v-list-item-title",{domProps:{textContent:e._s("Назад")}})],1),n("v-divider",{staticClass:"my-2"})]:e._e(),e.is_close?[n("v-list-item",{on:{click:e.close}},[n("v-icon",{staticClass:"mr-2",attrs:{small:""}},[e._v("mdi-close")]),n("v-list-item-title",{domProps:{textContent:e._s("Закрыть")}})],1),n("v-divider",{staticClass:"my-2"})]:e._e(),e._t("default")],2)],1)},$t=[],Rt={attach:{type:Function,default:null},width:{type:String,default:"200"},is_back:{type:Boolean,default:!1},is_close:{type:Boolean,default:!1}},Vt={props:Rt,mixins:[z["a"]],methods:{close:function(){this.$emit("close")},back:function(){this.$emit("back")}}},Tt=Vt,Ct=(n("3acf"),n("ce7e")),It=n("8860"),At=n("da13"),Lt=n("5d23"),Pt=n("e449"),Dt=n("269a"),Nt=n.n(Dt),Mt=n("a293"),Ft=Object(d["a"])(Tt,St,$t,!1,null,"35c53770",null),Wt=Ft.exports;h()(Ft,{VDivider:Ct["a"],VIcon:Re["a"],VList:It["a"],VListItem:At["a"],VListItemTitle:Lt["c"],VMenu:Pt["a"]}),Nt()(Ft,{ClickOutside:Mt["a"]});var Ht=Wt,Bt={player:{type:Object,default:null},attach:{type:Function,default:null}},qt={props:Bt,components:{Options:Ht},data:function(){return{speed:1}},computed:{variants:function(){return[{label:"2x",value:2},{label:"1.75x",value:1.75},{label:"1.5x",value:1.5},{label:"1.25x",value:1.25},{label:"Обычная",value:1},{label:"0.75x",value:.75},{label:"0.5x",value:.5}]},active:function(){var e=this;return this.variants.find((function(t){return t.value===e.speed}))}},methods:{updateSpeed:function(e){this.$emit("close"),this.$emit("update:speed",e)}},created:function(){var e=this;this.speed=this.player.speed,this.player.on("ratechange",(function(){return e.speed=e.player.speed}))}},zt=qt,Ut=Object(d["a"])(zt,xt,Et,!1,null,null,null),Gt=Ut.exports;h()(Ut,{VListItem:At["a"],VListItemSubtitle:Lt["b"]});var Kt=Gt,Qt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("options",e._b({attrs:{is_back:"",width:"180"},on:{back:function(t){return e.$emit("back")},close:function(t){return e.$emit("close")}}},"options",{attach:e.attach},!1),e._l(e.sources,(function(t,r){return n("quality",{key:r,attrs:{source:t,is_active:t.alias===e.source.alias},on:{click:function(n){return e.$emit("update:quality",t.alias)}}})})),1)},Yt=[],Jt=n("2909"),Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item",{attrs:{"input-value":e.is_active},on:{click:function(t){return e.$emit("click")}}},[n("v-icon",{staticClass:"mr-2",attrs:{color:"grey"},domProps:{textContent:e._s(e.icon)}}),n("v-list-item-content",[n("v-list-item-subtitle",{domProps:{textContent:e._s(e.label)}})],1)],1)},Zt=[],en={source:{type:Object,default:null},is_active:{type:Boolean,default:!1}},tn={props:en,computed:{type:function(){return this.$__get(this.source,"type")},alias:function(){return this.$__get(this.source,"alias")},icon:function(){return"sd"===this.alias?"mdi-standard-definition":"hd"===this.alias||"fhd"===this.alias?"mdi-high-definition":"upscale_2k"===this.alias||"upscale_4k"===this.alias?"mdi-ultra-high-definition":"torrent"===this.type?"mdi-alpha-t":null},label:function(){return this.$__get(this.source,"label")}}},nn=tn,rn=Object(d["a"])(nn,Xt,Zt,!1,null,null,null),an=rn.exports;h()(rn,{VIcon:Re["a"],VListItem:At["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"]});var sn=an,on={source:{type:Object,default:null},episode:{type:Object,default:null},attach:{type:Function,default:null}},cn={props:on,components:{Quality:sn,Options:Ht},computed:{sources:function(){return[].concat(Object(Jt["a"])(this.upscale),Object(Jt["a"])(this.playlist),Object(Jt["a"])(this.torrents)).filter((function(e){return e}))},episodes:function(){return this.$__get(this.episode,"sources")||[]},upscale:function(){return(this.episodes||[]).filter((function(e){return"upscale"===e.type}))},playlist:function(){return(this.episodes||[]).filter((function(e){return"server"===e.type}))},torrents:function(){return(this.episodes||[]).filter((function(e){return"torrent"===e.type}))}}},un=cn,ln=Object(d["a"])(un,Qt,Yt,!1,null,null,null),pn=ln.exports,dn=pn,fn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("options",e._b({attrs:{is_back:"",width:"280"},on:{back:function(t){return e.$emit("back")},close:function(t){return e.$emit("close")}}},"options",{attach:e.attach},!1),[e._l(e.keys,(function(t,r){return[n("v-list-item",{key:r},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.title)}})],1),n("v-list-item-action",[n("v-list-item-subtitle",{domProps:{textContent:e._s(t.caption)}})],1)],1)]}))],2)},hn=[],vn={attach:{type:Function,default:null}},mn={props:vn,components:{Options:Ht},computed:{keys:function(){return[{title:"Пауза / Воспроизведение",caption:"Пробел"},{title:"Скорость: быстрее",caption:"Shift + >"},{title:"Скорость: медленнее",caption:"Shift + <"},{title:"Выключить звук",caption:"M"},{title:"Полноэкранный режим",caption:"F"}]}}},bn=mn,_n=n("1800"),gn=Object(d["a"])(bn,fn,hn,!1,null,null,null),yn=gn.exports;h()(gn,{VListItem:At["a"],VListItemAction:_n["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"]});var wn=yn,kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("options",e._b({attrs:{is_close:"",width:"320"},on:{back:function(t){return e.$emit("back")},close:function(t){return e.$emit("close")}}},"options",{attach:e.attach},!1),[e._l(e.items,(function(t,r){return[n("v-list-item",{key:r,on:{click:t.action}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.title)}})],1),n("v-list-item-action",[n("v-layout",{attrs:{"align-center":""}},[n("v-list-item-subtitle",{staticClass:"mr-2",domProps:{textContent:e._s(t.subtitle)}}),!0!==t.hide_arrow?n("v-icon",[e._v("mdi-chevron-right")]):e._e()],1)],1)],1)]}))],2)},On=[],jn={source:{type:Object,default:null},player:{type:Object,default:null},attach:{type:Function,default:null}},xn={props:jn,inject:["$interface"],mixins:[z["a"]],components:{Options:Ht},data:function(){return{player_speed:1}},computed:{items:function(){var e=this;return[{title:"Качество",action:function(){return e.$emit("update:component","quality")},visible:!0,subtitle:this.source.label},{title:"Скорость воспроизведения",action:function(){return e.$emit("update:component","speed")},visible:!0,subtitle:this.speedHuman},{title:"Показать горячие клавиши",action:function(){return e.$emit("update:component","hotkeys")},visible:!this.isMobile},{title:"Торрент-сервер",action:function(){e.torrentDrawer&&e.torrentDrawer.show(),e.$emit("close")},visible:this.isTorrent,hide_arrow:!0}].filter((function(e){return!0===e.visible}))},speedHuman:function(){return this.player_speed>=2?"2x":this.player_speed>=1.75?"1.75x":this.player_speed>=1.5?"1.5x":this.player_speed>=1.25?"1.25x":this.player_speed>=1?"Обычная":this.player_speed>=.75?"0.75x":this.player_speed>=.5?"0.5x":void 0},isTorrent:function(){return"torrent"===this.$__get(this.source,"type")},torrentDrawer:function(){return this.$__get(this.$interface,"$refs.torrent.0")}},created:function(){var e=this;this.player_speed=this.player.speed,this.player.on("ratechange",(function(){return e.player_speed=e.player.speed}))}},En=xn,Sn=Object(d["a"])(En,kn,On,!1,null,null,null),$n=Sn.exports;h()(Sn,{VIcon:Re["a"],VLayout:m["a"],VListItem:At["a"],VListItemAction:_n["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"]});var Rn=$n,Vn={episode:{type:Object,default:null},source:{type:Object,default:null},player:{type:Object,default:null}},Tn={props:Vn,mixins:[z["a"]],data:function(){return{component:null,is_visible:!1}},computed:{settings:function(){var e=this;return[{is:Rn,alias:"selector",props:{source:this.source,player:this.player},visible:!0},{is:dn,alias:"quality",props:{source:this.source,player:this.player,episode:this.episode},events:{"update:quality":function(t){e.$emit("update:quality",t),e.closeSettings()}},visible:!0},{is:Kt,alias:"speed",props:{player:this.player},events:{"update:speed":function(t){e.$emit("update:speed",t),e.closeSettings()}},visible:!0},{is:wn,alias:"hotkeys",visible:!this.isMobile}].filter((function(e){return!0===e.visible}))},handler:function(){var e=this;return this.settings.find((function(t){return t.alias===e.component}))||null}},methods:{closeSettings:function(){this.component=null},showSettings:function(e){this.component=e}}},Cn=Tn,In=n("a797"),An=Object(d["a"])(Cn,Ot,jt,!1,null,null,null),Ln=An.exports;h()(An,{VBtn:$e["a"],VIcon:Re["a"],VOverlay:In["a"]});var Pn=Ln,Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{icon:"",large:""},on:{click:function(t){e.drawer&&e.drawer.show()}}},[n("v-icon",{attrs:{size:"24"}},[e._v("mdi-playlist-play")])],1)},Nn=[],Mn={inject:["$interface"],computed:{drawer:function(){return this.$__get(this.$interface,"$refs.episodes.0")}}},Fn=Mn,Wn=Object(d["a"])(Fn,Dn,Nn,!1,null,null,null),Hn=Wn.exports;h()(Wn,{VBtn:$e["a"],VIcon:Re["a"]});var Bn=Hn,qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{icon:"",large:""},on:{click:function(t){return e.$emit("click")}}},[n("v-icon",{attrs:{size:"28"}},[e._v("mdi-fullscreen")])],1)},zn=[],Un={},Gn=Object(d["a"])(Un,qn,zn,!1,null,null,null),Kn=Gn.exports;h()(Gn,{VBtn:$e["a"],VIcon:Re["a"]});var Qn=Kn,Yn={player:{type:Object,default:null},source:{type:Object,default:null},episode:{type:Object,default:null}},Jn={props:Yn,mixins:[z["a"]],data:function(){return{is_mounted:!1}},computed:{controls:function(){var e=this;return[{is:Bn,visible:!0},{is:Pn,props:{source:this.source,player:this.player,episode:this.episode},events:{"update:speed":function(t){return e.$emit("update:speed",t)},"update:quality":function(t){return e.$emit("update:quality",t)}},visible:!0},{is:kt,events:{click:function(){return e.$emit("toggle:pip")}},visible:!this.isMobile},{is:Qn,events:{click:function(){return e.$emit("toggle:fullscreen")}},visible:!this.isMobile}].filter((function(e){return!0===e.visible}))}},mounted:function(){this.is_mounted=!0}},Xn=Jn,Zn=(n("f788"),Object(d["a"])(Xn,vt,mt,!1,null,"69406378",null)),er=Zn.exports;h()(Zn,{VLayout:m["a"]});var tr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("drawer",{attrs:{absolute:"",temporary:"",width:"400","z-index":"100"},scopedSlots:e._u([{key:"footer",fn:function(){return[e._v(" Небольшое количество сидеров и личеров может негативно сказаться на скорости загрузки и привести к буфферизации воспроизведения. ")]},proxy:!0}]),model:{value:e.is_visible,callback:function(t){e.is_visible=t},expression:"is_visible"}},[n("v-toolbar",[n("v-app-bar-nav-icon",{on:{click:function(t){e.is_visible=!1}}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",[e._v("Торрент")])],1),n("v-list",{attrs:{dense:""}},[e._l(e.items,(function(t,r){return[r>0?n("v-divider",{key:"d:"+r}):e._e(),n("v-list-item",{key:r},[n("v-list-item-content",[n("v-list-item-subtitle",{domProps:{textContent:e._s(t.title)}}),n("v-list-item-title",{class:t.classes,domProps:{textContent:e._s(t.value)}})],1)],1)]}))],2)],1)},nr=[],rr=(n("b680"),n("db9a")),ir=n("ffba"),ar=n("94df"),sr=n.n(ar),or={source:{type:Object,default:null}},cr={props:or,components:{Drawer:rr["a"]},data:function(){return{file:{name:null,length:null,progress:null},speed:0,seeding:0,is_visible:!1}},computed:{torrent:function(){return this.$__get(this.source,"payload.torrent")},items:function(){return[{title:"Название торрента",value:this.$__get(this.torrent,"name")||"Нет данных",classes:["white-space--pre-wrap"]},{title:"Дата создания торрента",value:this.$__get(this.torrent,"datetime")?new Date(this.$__get(this.torrent,"datetime")).toLocaleString():"Нет данных"},{title:"Количество сидеров",value:this.$__get(this.torrent,"seeders")||"Нет данных"},{title:"Количество личеров",value:this.$__get(this.torrent,"leechers")||"Нет данных"},{title:"Воспроизводимый файл",value:this.file.name||"Нет данных",classes:["white-space--pre-wrap"]},{title:"Размер файла",value:sr()(this.file.length||0)||"Нет данных"},{title:"Скорость загрузки",value:sr()(parseFloat(this.speed.toFixed(2)),{bits:!0})},{title:"Прогресс",value:"".concat((100*(this.file.progress||0)).toFixed(2),"%")}].filter((function(e){return null!==e.value}))}},methods:{show:function(){this.is_visible=!0}},created:function(){var e=this;ir["a"].catchTorrentProgressWatcher((function(t){var n=t.torrents_id,r=t.payload;e.$__get(e.torrent,"id")===n&&(e.speed=e.$__get(r,"speed")||0,e.seeding=e.$__get(r,"seeding")||0,e.file.name=e.$__get(r,"name"),e.file.length=e.$__get(r,"length"),e.file.progress=e.$__get(r,"progress"))}))}},ur=cr,lr=(n("1071"),n("5bc1")),pr=n("71d9"),dr=n("2a7f"),fr=Object(d["a"])(ur,tr,nr,!1,null,"59710e46",null),hr=fr.exports;h()(fr,{VAppBarNavIcon:lr["a"],VDivider:Ct["a"],VIcon:Re["a"],VList:It["a"],VListItem:At["a"],VListItemContent:Lt["a"],VListItemSubtitle:Lt["b"],VListItemTitle:Lt["c"],VToolbar:pr["a"],VToolbarTitle:dr["a"]});var vr=hr,mr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("drawer",{attrs:{absolute:"",temporary:"",width:"400","z-index":"100"},model:{value:e.is_visible,callback:function(t){e.is_visible=t},expression:"is_visible"}},[n("v-toolbar",[n("v-app-bar-nav-icon",{on:{click:function(t){e.is_visible=!1}}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",[e._v("Эпизоды")])],1),n("episodes",e._b({staticClass:"py-4 px-2",attrs:{show_progress:!1,playing_episode_id:e.episode?e.episode.id:null},on:{"play:episode":function(t){return e.$emit("play:episode",{release_id:e.release.id,episode_id:t.id})}}},"episodes",{release:e.release,episodes:e.episodes},!1))],1)},br=[],_r=n("11d0"),gr={release:{type:Object,default:null},episode:{type:Object,default:null}},yr={props:gr,mixins:[z["a"]],components:{Drawer:rr["a"],Episodes:_r["a"]},data:function(){return{is_visible:!1}},computed:{episodes:function(){return this.$__get(this.release,"episodes")||[]}},methods:{show:function(){this.is_visible=!0}}},wr=yr,kr=Object(d["a"])(wr,mr,br,!1,null,null,null),Or=kr.exports;h()(kr,{VAppBarNavIcon:lr["a"],VIcon:Re["a"],VToolbar:pr["a"],VToolbarTitle:dr["a"]});var jr=Or,xr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-overlay",{attrs:{value:e.visible,opacity:.85}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"player__next"},[e.release&&e.next?[n("div",{staticClass:"player__next__label player__next__label--top"},[n("h2",[e._v(e._s(e.title))]),n("h4",[e._v(e._s(e.nextEpisodeTitle))])])]:e._e(),n("v-progress-circular",e._b({staticClass:"my-6",attrs:{size:"80",rotate:"-90"}},"v-progress-circular",{value:e.value},!1),[n("v-btn",{style:{backgroundColor:"#ffffff45"},attrs:{icon:"",width:"80",height:"80"},on:{click:e.toEpisode}},[n("v-icon",{attrs:{large:""}},[e._v("mdi-skip-next")])],1)],1),n("div",{staticClass:"player__next__label player__next__label--bottom"},[n("v-btn",{attrs:{text:""},on:{click:e.cancel}},[e._v("Отмена")])],1)],2)])},Er=[],Sr=n("2f62"),$r={player:{type:Object,default:null},episode:{type:Object,default:null},release:{type:Object,default:null}},Rr={props:$r,data:function(){return{value:0,timer:null,visible:!1,interval:null,is_ended:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(Sr["d"])("app/settings",{_player_autoplay_next:function(e){return e.player.autoplay.is_enabled}})),{},{episodes:function(){return this.$__get(this.release,"episodes")||[]},next:function(){var e=this.$__get(this.episode,"id")||-1,t=e+1;return this.episodes.find((function(e){return e.id===t}))||null},title:function(){return this.$__get(this.release,"names.ru")},nextEpisodeTitle:function(){return this.$__get(this.next,"title")}}),methods:{toEpisode:function(){this.release&&this.next&&this.$emit("play:episode",{params:{from_start:!0},episode_id:this.next.id,release_id:this.release.id})},autoplay:function(){var e=this;this.next&&(this.value=0,this.visible=!0,this.timer=setTimeout((function(){return e.toEpisode()}),3e3),this.interval=setInterval((function(){return e.value=e.value+20}),500))},cancel:function(){this.value=0,this.visible=!1,this.is_ended=!1,this.timer&&clearTimeout(this.timer),this.interval&&clearInterval(this.interval)}},created:function(){var e=this;!0===this._player_autoplay_next&&(this.player.on("ended",(function(){return e.is_ended=!0})),this.player.on("seeking",(function(){e.visible&&e.cancel()})))},destroyed:function(){this.timer&&clearTimeout(this.timer),this.interval&&clearInterval(this.interval)},watch:{is_ended:{handler:function(e){!0===e&&this.autoplay()}}}},Vr=Rr,Tr=(n("1aa7"),n("490a")),Cr=Object(d["a"])(Vr,xr,Er,!1,null,"3266cb4c",null),Ir=Cr.exports;h()(Cr,{VBtn:$e["a"],VIcon:Re["a"],VOverlay:In["a"],VProgressCircular:Tr["a"]});var Ar=Ir,Lr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],ref:"button",staticClass:"playback__button"},[e.icon?n("v-icon",{attrs:{size:"32"}},[e._v(e._s(e.icon))]):e._e(),e.content?n("span",{staticClass:"font-weight-bold"},[e._v(e._s(e.content))]):e._e()],1)},Pr=[],Dr={player:{type:Object,default:null}},Nr={props:Dr,data:function(){return{icon:null,content:null,handler:null,visible:!1,is_ready:!1,current_time:null}},methods:{showLabel:function(e){var t=this,n=e.icon,r=void 0===n?null:n,i=e.content,a=void 0===i?null:i;this.icon=r||null,this.content=a||null,this.visible=!0,this.$refs.button&&(this.$refs.button.style.animation="none",this.$refs.button.offsetHeight,this.$refs.button.style.animation=null),this.$nextTick((function(){t.handler&&clearTimeout(t.handler),t.handler=setTimeout((function(){return t.visible=!1}),600)}))},playHandler:function(){this.is_ready&&this.showLabel({icon:"mdi-play"})},pauseHandler:function(){this.is_ready&&this.showLabel({icon:"mdi-pause"})},seekingHandler:function(){if(this.is_ready){var e=this.current_time<this.player.currentTime,t=this.current_time>this.player.currentTime;if(e||t){var n=null;e&&(n="mdi-fast-forward"),t&&(n="mdi-rewind"),n&&this.showLabel({icon:n})}}},speedHandler:function(){this.is_ready&&this.showLabel({content:"".concat(this.player.speed,"x")})}},created:function(){var e=this;this.player.on("play",this.playHandler),this.player.on("pause",this.pauseHandler),this.player.on("seeking",this.seekingHandler),this.player.on("ratechange",this.speedHandler),this.player.on("canplay",(function(){return setTimeout((function(){return e.is_ready=!0}),1e3)})),this.player.on("timeupdate",(function(){return e.current_time=e.player.currentTime}))}},Mr=Nr,Fr=(n("9ab7"),Object(d["a"])(Mr,Lr,Pr,!1,null,"2ee555a5",null)),Wr=Fr.exports;h()(Fr,{VIcon:Re["a"]});var Hr,Br,qr,zr,Ur=Wr,Gr=n("77a5"),Kr={player:{type:Object,default:null}},Qr={props:Kr,mixins:[Gr["b"]],render:function(){return null},methods:{handleMouseScroll:function(e){var t=null;e.deltaY<0&&(t="up"),e.deltaY>0&&(t="down"),this.setVolume(t)},setVolume:function(e){var t=this.player.volume,n=t;"up"===e&&t<1&&(n+=.1),"down"===e&&t>0&&(n-=.1),this.$emit("update:volume",n)}}},Yr=Qr,Jr=Object(d["a"])(Yr,Hr,Br,!1,null,null,null),Xr=Jr.exports,Zr=Xr,ei={player:{type:Object,default:null}},ti={props:ei,mixins:[Gr["a"]],render:function(){return null},methods:{handleKeyboardEvents:function(e){32===e.which&&this.$emit("toggle:play"),"KeyF"===e.code&&this.$emit("toggle:fullscreen"),"KeyM"===e.code&&this.$emit("update:muted",!this.player.muted),39===e.which&&this.forward(),37===e.which&&this.rewind(),190===e.which&&e.shiftKey&&this.setSpeed(.25),188===e.which&&e.shiftKey&&this.setSpeed(-.25)},forward:function(){var e=this.player.currentTime,t=e+10>=this.player.duration?this.player.duration-.1:e+10;this.$emit("update:time",t)},rewind:function(){var e=this.player.currentTime,t=e-10<0?0:e-10;this.$emit("update:time",t)},setSpeed:function(e){var t=this.player.speed,n=t+e;n>=.5&&n<=2&&this.$emit("update:speed",n)}}},ni=ti,ri=Object(d["a"])(ni,qr,zr,!1,null,null,null),ii=ri.exports,ai=ii,si=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-fade-transition",{attrs:{appear:""}},[e.is_buffering?n("div",{staticClass:"player__buffering"},[n("v-progress-circular",{attrs:{color:"white",indeterminate:"",size:"64"}})],1):e._e()])},oi=[],ci={player:{type:Object,default:null}},ui={props:ci,data:function(){return{handler:null,is_buffering:!0}},created:function(){var e=this;this.handler=setInterval((function(){return e.is_buffering=e.player.loading}),200)},destroyed:function(){this.handler&&clearInterval(this.handler)}},li=ui,pi=(n("9e6d"),Object(d["a"])(li,si,oi,!1,null,"2249b52b",null)),di=pi.exports;h()(pi,{VFadeTransition:Qe["d"],VProgressCircular:Tr["a"]});var fi=di,hi=n("93bf"),vi=n.n(hi),mi={player:{type:Object,default:null},source:{type:Object,default:null},release:{type:Object,default:null},episode:{type:Object,default:null}},bi={props:mi,mixins:[z["a"],Gr["b"],Gr["a"]],components:{Seek:X,Play:Ie,Headline:ke,VideoLeftControls:ht,VideoRightControls:er},data:function(){return{interface_is_visible:!0,interface_visibility_handler:null}},provide:function(){return{$interface:this}},computed:{misc:function(){var e=this;return[{is:vr,ref:"torrent",key:"torrent:".concat(this.source.label),props:{source:this.source}},{is:jr,ref:"episodes",key:"episodes:".concat(this.source.label),props:{release:this.release,episode:this.episode},events:{"play:episode":function(t){return e.$emit("play:episode",t)}}},{is:Ar,props:{player:this.player,release:this.release,episode:this.episode},events:{"play:episode":function(t){return e.$emit("play:episode",t)}}},{is:Ur,key:"label:".concat(this.episode.id,":").concat(this.source.label),props:{player:this.player}},{is:Zr,props:{player:this.player},events:{"update:volume":this.updateVolume}},{is:ai,props:{player:this.player},events:{"update:time":this.updateTime,"toggle:play":this.togglePlay,"update:speed":this.updateSpeed,"update:muted":this.updateMuted,"toggle:fullscreen":this.toggleFullscreen}},{is:fi,props:{player:this.player}}]}},methods:{showInterface:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.interface_is_visible=t,this.interface_visibility_handler&&clearTimeout(this.interface_visibility_handler),!1===this.isMobile&&(this.interface_visibility_handler=setTimeout((function(){return e.interface_is_visible=!1}),2500))},handleMouseEvents:function(){this.isMobile||this.showInterface()},handleMouseScroll:function(){this.isMobile||this.showInterface()},handleKeyboardEvents:function(){this.isMobile||this.showInterface()},toggleFullscreen:function(){this.isMobile||vi.a.toggle(document.getElementById("player-container"))},togglePIP:function(){this.player.pip=!this.player.pip},togglePlay:function(){this.player.togglePlay()},updateSpeed:function(e){this.player.speed=e},updateTime:function(e){this.player.currentTime=e},updateVolume:function(e){this.player.volume=e},updateMuted:function(e){this.player.muted=e}},mounted:function(){var e=this;this.showInterface(),[this.$refs.container,this.$refs.interface].forEach((function(t){e.showInterface(),t.addEventListener("click",(function(n){n.target===t&&(e.isMobile||e.togglePlay(),e.isMobile&&e.showInterface(!e.interface_is_visible))})),t.addEventListener("dblclick",(function(n){n.target===t&&e.toggleFullscreen()}))})),this.isMobile&&this.updateVolume(100)}},_i=bi,gi=(n("5e33"),Object(d["a"])(_i,O,j,!1,null,"55dd4f3c",null)),yi=gi.exports;h()(gi,{VCol:v["a"],VFadeTransition:Qe["d"],VLayout:m["a"],VRow:b["a"]});var wi=yi,ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("player-handler",e._b({on:{error:function(t){return e.$emit("error",t)},"update:time":function(t){return e.$emit("update:time",t)},"update:duration":function(t){return e.$emit("update:duration",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",null,null,t)]}}],null,!0)},"player-handler",e.configuration,!1))},Oi=[],ji=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{staticClass:"fill-height player__handler",attrs:{column:""}},[e._t("prepend"),n("video",{ref:"player",attrs:{muted:"",autoplay:"",playsinline:"",crossorigin:"anonymous",preload:"auto"},domProps:{muted:!0}}),e.player?e._t("default",null,null,{player:e.player}):e._e()],2)},xi=[],Ei={source:{type:Object,default:null},getHandler:{type:Function,default:null},clearHandler:{type:Function,default:null},resolveHandler:{type:Function,default:null}},Si={props:Ei,data:function(){return{player:null,options:{autoplay:!1,controls:!1,keyboard:{global:!1,focused:!1},resetOnEnd:!1,fullscreen:{enabled:!1},clickToPlay:!1}}},methods:{resolve:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.source,!t.resolveHandler){n.next=10;break}return n.t0=t.resolveHandler,n.t1=t.source,n.t2=t.player,n.next=7,t.getHandler.call(t,r);case 7:n.t3=n.sent,n.t4={source:n.t1,player:n.t2,payload:n.t3},n.t0.call.call(n.t0,null,n.t4);case 10:case"end":return n.stop()}}),n)})))()}},mounted:function(){var e=this;this.player=new this.$plyr(this.$refs.player,this.options),this.player.on("loadedmetadata",(function(t){return e.$emit("update:duration",e.$__get(t,"detail.plyr.duration"))})),this.player.on("timeupdate",(function(){var t=e.player.currentTime;t>0&&e.$emit("update:time",t)}))},destroyed:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.player&&(e.player.pause(),e.player.media.src="",e.player.destroy()),!e.clearHandler){t.next=4;break}return t.next=4,e.clearHandler.call(null,{source:e.source});case 4:case"end":return t.stop()}}),t)})))()},watch:{source:{deep:!0,immediate:!0,handler:function(e){var t=this;this.$nextTick((function(){null!==e&&t.resolve({source:e})}))}}}},$i=Si,Ri=(n("942c"),Object(d["a"])($i,ji,xi,!1,null,"079513fa",null)),Vi=Ri.exports;h()(Ri,{VLayout:m["a"]});var Ti=Vi,Ci=n("ba56"),Ii=n.n(Ci),Ai={source:{type:Object,default:null},time:{type:Number,default:null}},Li={props:Ai,components:{PlayerHandler:Ti},data:function(){return{hls:null}},computed:{configuration:function(){return{source:this.source,getHandler:this._getHandler,clearHandler:this._clearHandler,resolveHandler:this._resolveHandler}}},methods:{_getHandler:function(e){return this.$__get(e,"payload.playlist")},_clearHandler:function(){this.hls&&(this.hls.detachMedia(),this.hls.destroy())},_resolveHandler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.player,i=t.payload;i?Ii.a.isSupported()?(n.pause(),this.hls=new Ii.a(Object(r["a"])(Object(r["a"])({},this.options),{},{startPosition:this.time||0})),this.hls.attachMedia(n.media),this.hls.on(Ii.a.Events.MEDIA_ATTACHED,(function(){return e._startSource({payload:i,player:n})})),this.hls.on(Ii.a.Events.ERROR,(function(t,n){return e._handleError(n)}))):(n.pause(),n.source={type:"video",sources:[{src:i,type:"video/mp4"}]},n.once("playing",(function(){return n.currentTime=e.time})),n.play()):this.$emit("error","Не удалось определить источник воспроизведения")},_startSource:function(e){var t=e.payload,n=e.player;this.hls.loadSource(t),n.play()},_handleError:function(e){var t=e.type,n=e.details;t===Ii.a.ErrorTypes.NETWORK_ERROR&&this.$emit("error","Произошла ошибка при загрузке видео: ".concat(n))}}},Pi=Li,Di=Object(d["a"])(Pi,ki,Oi,!1,null,null,null),Ni=Di.exports,Mi=Ni,Fi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("player-handler",e._b({on:{error:function(t){return e.$emit("error",t)},"update:time":function(t){return e.$emit("update:time",t)},"update:duration":function(t){return e.$emit("update:duration",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",null,null,t)]}}],null,!0)},"player-handler",e.configuration,!1))},Wi=[],Hi={time:{type:Number,default:null},source:{type:Object,default:null}},Bi={props:Hi,components:{PlayerHandler:Ti},computed:{configuration:function(){return{source:this.source,getHandler:this._getHandler,clearHandler:this._clearHandler,resolveHandler:this._resolveHandler}}},methods:{_getHandler:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.$__get(e,"payload"),i=t.$__get(r,"file.index",-1),a=t.$__get(r,"torrent.id")||null,!a){n.next=11;break}return n.next=6,ir["a"].startTorrent({torrents_id:a,file_index:i});case 6:return s=n.sent,o=s.url,n.abrupt("return","".concat(o,"/").concat(i,"/").concat(encodeURIComponent(r.file.name)));case 11:t.$emit("error","Не удалось определить источник воспроизведения");case 12:case"end":return n.stop()}}),n)})))()},_clearHandler:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.source,n.next=3,ir["a"].clearTorrent({torrents_id:t.$__get(r,"payload.torrent.id")||null});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},_resolveHandler:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:{},i=r.player,a=r.payload,a?(i.pause(),i.source={type:"video",sources:[{src:a,type:"video/mp4"}]},i.once("playing",(function(){return i.currentTime=t.time})),i.play()):t.$emit("error","Не удалось подключиться к источнику воспроизведения");case 2:case"end":return n.stop()}}),n)})))()}},created:function(){}},qi=Bi,zi=Object(d["a"])(qi,Fi,Wi,!1,null,null,null),Ui=zi.exports,Gi=Ui,Ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("player-handler",e._b({staticClass:"video--upscale",on:{error:function(t){return e.$emit("error",t)},"update:time":function(t){return e.$emit("update:time",t)},"update:duration":function(t){return e.$emit("update:duration",t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("default",null,null,t)]}}],null,!0)},"player-handler",e.configuration,!1),[n("div",{ref:"board",staticClass:"board",attrs:{slot:"prepend"},slot:"prepend"})])},Qi=[],Yi=(n("d4ec"),n("bee2"),n("22a2"),{source:{type:Object,default:null},time:{type:Number,default:null}}),Ji={props:Yi,components:{PlayerHandler:Ti},data:function(){return{bold:0,blur:0,is_enabled:!0}},computed:{configuration:function(){return{source:this.source,getHandler:this._getHandler,clearHandler:this._clearHandler,resolveHandler:this._resolveHandler}},scale:function(){return 1.6*this.$__get(this.source,"payload.scale")}},methods:{_getHandler:function(e){return this.$__get(e,"payload.playlist")},_clearHandler:function(){this.hls&&this.hls.destroy()},_resolveHandler:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.player,r=t.payload;r&&(n.pause(),Ii.a.isSupported()&&(this.hls=new Ii.a({startPosition:this.time||0}),this.hls.attachMedia(n.media),this.hls.on(Ii.a.Events.MEDIA_ATTACHED,(function(){e.hls.loadSource(r),n.play(),n.on("loadedmetadata",(function(){}))}))))}}},Xi=Ji,Zi=(n("8edb"),Object(d["a"])(Xi,Ki,Qi,!1,null,"6501023a",null)),ea=Zi.exports,ta=ea,na=n("3513"),ra=n("a6b5"),ia=n("e68c"),aa={anchor:{type:String,default:null},from_start:{type:Boolean,default:!1}},sa={props:aa,name:"Video.View",components:{Loader:k,Interface:wi},meta:function(){return{title:this.title}},data:function(){return{time:0,release:null,episode:null,duration:0,is_loading:!1,cursor_is_hidden:!0}},computed:Object(r["a"])(Object(r["a"])({},Object(Sr["d"])("app/settings",{_quality:function(e){return e.player.quality}})),{},{title:function(){var e=this.$__get(this.release,"id"),t=this.$__get(this.episode,"id"),n=this.$__get(this.release,"names.original");return e?"Видео: ".concat(n," / Эпизод ").concat(t):"Загрузка"},sources:function(){return this.$__get(this.episode,"sources")||[]},source:function(){var e=this;return this.sources.find((function(t){return t.alias===e._quality}))||this.sources[0]},type:function(){return this.$__get(this.source,"type")||null},handlers:function(){return{server:Mi,torrent:Gi,upscale:ta}},handler:function(){return this.$__get(this.handlers,this.type)||null},percentage:function(){return this.time>0&&this.duration>0?this.time/this.duration*100:null},part:function(){return Math.floor(this.percentage/10)},playback:function(){return{release:this.release,episode:this.episode}}}),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},{toBlank:ia["b"]}),Object(Sr["b"])("app/watch",{_setWatchedEpisode:"setWatchedEpisode"})),Object(Sr["b"])("app/settings",{_setSettingsValue:"setSettingsValue"})),{},{toVideo:function(e){var t=e.release_id,n=e.episode_id,r=e.params,i=void 0===r?{}:r;Oa(t,n,i)},setQuality:function(){var e=arguments,t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:null,r&&t._setSettingsValue({k:"player.quality",v:r});case 2:case"end":return n.stop()}}),n)})))()},setEpisodeWatchData:function(e){var t=e.release_id,n=e.episode_id;if(t&&n){var r=this.time>=this.duration?this.duration-5:this.time||0,i=this.percentage>100?100:this.percentage||0;this._setWatchedEpisode({release_id:t,episode_id:n,time:r,percentage:i})}},getPlaybackDataFromAnchor:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s,o,u,l,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.split(":"),i=Object(c["a"])(r,2),a=i[0],s=i[1],n.next=3,(new na["a"]).getRelease(parseFloat(a));case 3:return o=n.sent,n.next=6,(new ra["a"]).setStore(t.$store).fetchWithEpisodes().fetchItem(o);case 6:if(u=n.sent,l=u.episodes.find((function(e){return e.id===parseFloat(s)})),!u||!l){n.next=14;break}return n.next=11,t.getEpisodeInitialTime({release_id:u.id,episode_id:l.id});case 11:n.t0=n.sent,n.next=15;break;case 14:n.t0=0;case 15:return p=n.t0,n.abrupt("return",{time:p,release:u,episode:l});case 17:case"end":return n.stop()}}),n)})))()},getEpisodeInitialTime:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.release_id,i=e.episode_id,n.next=3,t.$store.getters["app/watch/getWatchedEpisode"]({release_id:r,episode_id:i});case 3:return a=n.sent,s=t.$__get(a,"time",null)||0,n.abrupt("return",s&&!1===t.from_start?s:0);case 6:case"end":return n.stop()}}),n)})))()}}),beforeDestroy:function(){this.release&&this.episode&&this.setEpisodeWatchData({release_id:this.release.id,episode_id:this.episode.id})},watch:{anchor:{immediate:!0,handler:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r,i,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.is_loading=!0,n.next=4,t.getPlaybackDataFromAnchor(e);case 4:r=n.sent,i=r.release,a=r.episode,s=r.time,t.release=i,t.episode=a,t.time=s,t.$visit(t.$route.path,t.$metaInfo.title),n.next=18;break;case 14:throw n.prev=14,n.t0=n["catch"](0),Object(ia["b"])(n.t0||"Нет данных для воспроизведения"),n.t0;case 18:return n.prev=18,t.is_loading=!1,n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[0,14,18,21]])})))()}},source:{deep:!0,immediate:!0,handler:function(e){this.setQuality(this.$__get(e,"alias"))}},part:{handler:function(){this.release&&this.episode&&this.setEpisodeWatchData({release_id:this.release.id,episode_id:this.episode.id})}},playback:{deep:!0,handler:function(e,t){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var i,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=e.release,a=e.episode,t&&t.release&&t.episode&&n.setEpisodeWatchData({release_id:t.release.id||null,episode_id:t.episode.id||null}),!i||!a){r.next=8;break}return n.is_loading=!0,r.next=6,n.getEpisodeInitialTime({release_id:i.id,episode_id:a.id});case 6:n.time=r.sent,n.is_loading=!1;case 8:case"end":return r.stop()}}),r)})))()}}}},oa=sa,ca=Object(d["a"])(oa,s,o,!1,null,null,null),ua=ca.exports;h()(ca,{VLayout:m["a"]});var la=ua,pa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"hide-cursor":e.hideCursor},attrs:{id:"player-container"}},[e._t("default")],2)},da=[],fa={hideCursor:{type:Boolean,default:!1}},ha={props:fa,destroyed:function(){vi.a.isEnabled&&vi.a.exit()}},va=ha,ma=(n("de0d"),Object(d["a"])(va,pa,da,!1,null,"86c0dea6",null)),ba=ma.exports,_a=ba,ga=n("9b02"),ya=n.n(ga),wa=n("5309"),ka="video",Oa=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a["a"].push({name:ka,params:Object(r["a"])({anchor:e+":"+t},n)})};t["a"]=[{name:ka,path:"/video/:anchor/",meta:{layout:{is:_a}},props:!0,component:la,beforeEnter:function(e,t,n){var r=!0===ya()(i["a"],"state.app.settings.ads.is_enabled"),a=!0===ya()(i["a"],"state.app.settings.system.ads.is_maximum"),s=t&&"ads"===t.name,o=Math.random()>=.5||a;r&&o&&!s?n({name:wa["a"],params:{to:e}}):n()}}]},a427:function(e,t,n){},a6b5:function(e,t,n){"use strict";n("99af"),n("4de4"),n("4160"),n("d81d"),n("b64b"),n("d3b7"),n("07ac"),n("3ca3"),n("159b"),n("ddb0");var r=n("5530"),i=n("2909"),a=(n("96cf"),n("1da1")),s=n("d4ec"),o=n("bee2"),c=n("262e"),u=n("2caf"),l=n("3513"),p=n("560d"),d=(n("13d5"),n("9b02")),f=n.n(d),h=function(e,t,n,r){return{type:e,label:t,alias:n,payload:r}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(e||[]).reduce((function(e,t){var n=f()(t,"id");e[n]={},e[n].id=n,e[n].title=f()(t,"title"),e[n].sources=[];var r=g(t),i=_(t),a=b(t);return a.payload.playlist&&e[n].sources.push(a),i.payload.playlist&&e[n].sources.push(i),r.payload.playlist&&e[n].sources.push(r),e}),{})},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{file:f()(e,n)||null,playlist:f()(e,t)||null}},b=function(e){return h("server","1080p","fhd",m(e,"fullhd"))},_=function(e){return h("server","720p","hd",m(e,"hd"))},g=function(e){return h("server","480p","sd",m(e,"sd"))},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.upscale_is_enabled,i=void 0!==n&&n;return!0===i?(e||[]).reduce((function(e,t){var n=f()(t,"id"),i=f()(_(t),"payload");return e[n]={},e[n].id=n,e[n].title=f()(t,"title"),e[n].sources=[],e[n].sources.push(h("upscale","4k","upscale_4k",Object(r["a"])(Object(r["a"])({},i),{},{scale:2}))),e[n].sources.push(h("upscale","2k","upscale_2k",Object(r["a"])(Object(r["a"])({},i),{},{scale:1}))),e}),{}):null},w=(n("820e"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("42454")),k=n.n(w),O=n("bba4"),j=n.n(O),x=n("8b2d"),E=n("ffba"),S=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c,u,l,p=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:{},r=n.skip_torrents,i=void 0!==r&&r,a=n.torrents_is_enabled,s=void 0!==a&&a,o=n.cancel_token,c=void 0===o?null:o,!Object(x["a"])()||!1!==i||!0!==s){e.next=9;break}return e.next=4,$(t);case 4:return u=e.sent,e.next=7,R({torrents:u,cancel_token:c});case 7:return l=e.sent,e.abrupt("return",V(l));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.filter((function(e){return!1===new RegExp("HEVC").test(e.quality)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.torrents,i=t.cancel_token,e.next=3,Promise.allSettled(n.map(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,(new l["a"]).getReleaseTorrent(t.url,{cancelToken:i});case 3:if(a=e.sent,!a){e.next=9;break}return e.next=7,E["a"].parseTorrent({torrents_id:n,torrents_file_content:a});case 7:return s=e.sent,e.abrupt("return",Object(r["a"])({torrent:t},s));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",e.sent.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value})).filter((function(e){return e})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){return e.reduce((function(e,t){var n="torrent",a=f()(t,"torrent.quality")||null,s=f()(t,"torrent_parsed.files")||[],o=a?j()(a):null,c=s.reduce((function(e,c,u){var l=h(n,a,o,C(Object(r["a"])({file:c,index:u},t))),p=T(f()(c,"name"));return null===p&&1!==s.length||(1===s.length&&(p=1),e[p]={},e[p].id=p,e[p].title=f()(e,[p,"title"],"Серия ".concat(p)),e[p].sources=[].concat(Object(i["a"])(e[p].sources||[]),[l])),e}),{});return k()(e,c)}),{})},T=function(e){if(e&&"string"===typeof e){var t=f()(e.match(/_\[(\d+)\]_/),[1])||null;return null!==t?parseFloat(t):null}return null},C=function(e){var t=e.file,n=e.index,r=e.torrent,i=e.torrent_parsed;return{torrent:{id:f()(r,"id"),name:f()(i,"name"),peers:f()(i,"numPeers"),seeders:f()(r,"seeders"),datetime:f()(i,"created"),leechers:f()(r,"leechers")},file:{name:f()(t,"name"),path:f()(t,"path"),index:n,length:f()(t,"length")}}},I=function(e){Object(c["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(s["a"])(this,n),e=t.call(this),e.store=null,e.cancel_token=null,e.with_episodes=!1,e.skip_torrents=!1,e}return Object(o["a"])(n,[{key:"fetchCollection",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((t||[]).map(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",n.fetchItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetchItem",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"fetch",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=this.get(t,"id"),e.t1=this.get(t,"year"),e.t2=this.get(t,"type"),e.t3=this.get(t,"code"),e.t4=this._getNames(t),e.t5=this.get(t,"genres")||[],e.t6=this._getPoster(t),e.t7=this._getDatetime(t),e.t8=this.get(t,"playlist"),e.t9=this.get(t,"torrents"),e.next=12,this._getEpisodes(t);case 12:return e.t10=e.sent,e.t11=this.stripHtml(this.get(t,"description")),e.abrupt("return",{id:e.t0,year:e.t1,type:e.t2,code:e.t3,names:e.t4,genres:e.t5,poster:e.t6,datetime:e.t7,playlist:e.t8,torrents:e.t9,episodes:e.t10,description:e.t11});case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setStore",value:function(e){return this.store=e,this}},{key:"setCancelToken",value:function(e){return this.cancel_token=e,this}},{key:"setSkipTorrents",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.skip_torrents=e,this}},{key:"fetchWithEpisodes",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.with_episodes=e,this}},{key:"_getNames",value:function(e){return{ru:this.stripHtml(this.get(e,"names[0]")),original:this.stripHtml(this.get(e,"names[1]"))}}},{key:"_getDatetime",value:function(e){var t=this.get(e,"last"),n=t?new Date(1e3*t):null,r=n?new Intl.DateTimeFormat(void 0,{}).format(n):null;return{timestamp:t,system:n,human:r}}},{key:"_getPoster",value:function(e){return(new l["a"]).getReleasePosterPath(this.get(e,"poster"))}},{key:"_getEpisodes",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!0!==this.with_episodes){e.next=12;break}return n={},a=function(e,t){n[e]&&(n[e].sources=[].concat(Object(i["a"])(n[e].sources),Object(i["a"])(t.sources))),n[e]||(n[e]=t)},s=v(this.get(t,"playlist")||[]),o=y(this.get(t,"playlist"),{upscale_is_enabled:!0===this.get(this.store,"state.app.settings.player.anime4k.is_enabled")}),e.next=7,S(this.get(t,"torrents")||[],{cancel_token:this.cancel_token,skip_torrents:this.skip_torrents,torrents_is_enabled:!0===this.get(this.store,"state.app.settings.player.torrents.is_enabled")});case 7:return c=e.sent,Object.keys(o||{}).forEach((function(e){return a(e,o[e])})),Object.keys(s||{}).forEach((function(e){return a(e,s[e])})),Object.keys(c||{}).forEach((function(e){return a(e,c[e])})),e.abrupt("return",Object.values(n).map((function(e){return Object(r["a"])(Object(r["a"])({},e),{},{sources:e.sources.filter((function(e){return null!==e.payload}))})})).filter((function(e){return e.sources&&e.sources.length>0})).reverse());case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(p["a"]);t["a"]=I},aa71:function(e,t,n){},aff4:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){return"browser"===e.type},i=function(){return"renderer"===e.type}}).call(this,n("4362"))},b314:function(e,t,n){"use strict";n("4160"),n("159b");var r=n("5530"),i=n("d4ec"),a=n("bee2"),s=n("c79a"),o="app:about",c="app:broadcast",u="app:devtools:main",l="app:devtools:torrent",p=function(){function e(){Object(i["a"])(this,e)}return Object(a["a"])(e,null,[{key:"showAbout",value:function(){Object(s["b"])((function(e){return e.ipcMain.on(o,(function(){return e.app.showAboutPanel()}))}),(function(e){return e.ipcRenderer.send(o)}))}},{key:"showAppDevtools",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(s["b"])((function(t){return t.ipcMain.on(u,(function(){return e.showDevTools()}))}),(function(e){return e.ipcRenderer.send(u)}))}},{key:"showTorrentDevtools",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(s["b"])((function(t){return t.ipcMain.on(l,(function(){return e.showDevTools()}))}),(function(e){return e.ipcRenderer.send(l)}))}},{key:"broadcastEvent",value:function(e,t){Object(s["c"])((function(n){return n.ipcRenderer.send(c,{channel:e,payload:t})}))}},{key:"resolveBroadcastEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(s["a"])((function(t){t.ipcMain.on(c,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.channel,a=n.payload,s=void 0===a?null:a;e.forEach((function(e){return e.getWindow().webContents.send(i,Object(r["a"])({},s))}))}))}))}}]),e}();t["a"]=p},b60d:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-fade-transition",{attrs:{appear:""}},[e.hideToolbar?e._e():n("v-app-bar",{staticClass:"toolbar shrink",attrs:{flat:"",color:"transparent"}},[n("v-btn",{staticClass:"mr-1",attrs:{small:"",text:"",exact:"",height:"38",to:{name:"releases"}}},[n("v-icon",{staticClass:"mr-2",attrs:{size:"18"}},[e._v("mdi-view-column")]),n("span",[e._v("Релизы")])],1),n("v-btn",{staticClass:"mr-1",attrs:{small:"",text:"",exact:"",height:"38",to:{name:"catalog"}}},[n("v-icon",{staticClass:"mr-2",attrs:{size:"18"}},[e._v("mdi-folder-text-outline")]),n("span",[e._v("Каталог")])],1),n("v-btn",{staticClass:"mr-4",attrs:{small:"",text:"",exact:"",height:"38",to:{name:"favorites"}}},[n("v-icon",{staticClass:"mr-2",attrs:{size:"18"}},[e._v("mdi-star")]),n("span",[e._v("Избранное")])],1),n("search",{staticClass:"mr-4"}),n("update"),n("notifications"),n("settings"),n("account")],1)],1)},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-tooltip",{attrs:{left:"",activator:"#toolbar__reload"}},[n("div",{staticClass:"py-1",style:{lineHeight:1}},[n("div",{staticClass:"font-weight-bold"},[e._v("Обновить последние релизы")]),n("div",{staticClass:"caption"},[e._v("Обновлено в "+e._s(e.datetime))])])]),n("v-btn",{attrs:{icon:"",id:"toolbar__reload",disabled:e._loading},on:{click:e.getReleases}},[n("v-fade-transition",{attrs:{mode:"out-in"}},[e._loading?n("v-progress-circular",{attrs:{indeterminate:"",size:"20"}}):n("v-icon",[e._v("mdi-refresh")])],1)],1)],1)},s=[],o=n("5530"),c=n("2f62"),u={computed:Object(o["a"])(Object(o["a"])({},Object(c["d"])("releases",{_loading:function(e){return e.loading},_datetime:function(e){return e.datetime}})),{},{datetime:function(){return this._datetime?this._datetime.toLocaleString():null}}),methods:Object(o["a"])({},Object(c["b"])("releases",["getReleases"]))},l=u,p=n("2877"),d=n("6544"),f=n.n(d),h=n("8336"),v=n("0789"),m=n("132d"),b=n("490a"),_=n("3a2f"),g=Object(p["a"])(l,a,s,!1,null,null,null),y=g.exports;f()(g,{VBtn:h["a"],VFadeTransition:v["d"],VIcon:m["a"],VProgressCircular:b["a"],VTooltip:_["a"]});var w=y,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-autocomplete",e._b({ref:"search",staticClass:"grey darken-2",attrs:{solo:"",dense:"","no-filter":"","hide-details":"","hide-no-data":"","return-object":"","item-value":"id","item-text":"names.ru",placeholder:"Поиск релиза ...",loading:e.is_loading,"append-icon":null,"search-input":e.search},on:{"update:searchInput":function(t){e.search=t},"update:search-input":function(t){e.search=t},blur:function(t){return e._setSearching(!1)},focus:function(t){return e._setSearching(!0)},input:e.toRelease},scopedSlots:e._u([{key:"item",fn:function(t){var r=t.item;return[n("v-list-item-avatar",[n("v-img",{attrs:{src:r.poster}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(r.names.ru)}}),n("v-list-item-subtitle",{domProps:{textContent:e._s(r.names.original)}})],1)]}}])},"v-autocomplete",{items:e.items},!1))},O=[],j=(n("ac1f"),n("841c"),n("96cf"),n("1da1")),x=n("bc3a"),E=n.n(x),S=n("b047c"),$=n.n(S),R=n("882d"),V=n("3513"),T=n("1330"),C=n("12fe"),I={request:null,data:function(){return{items:[],search:null,visible:!1,is_loading:!1}},methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])("app",{_setSearching:"setSearching"})),{},{getReleases:$()(function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.is_loading=!0,this.$options.request&&this.$options.request.cancel(),this.$options.request=E.a.CancelToken.source(),e.next=6,(new V["a"]).searchReleases(t,{cancelToken:this.$options.request.token});case 6:n=e.sent,this.items=(new T["a"]).fetchCollection(n||[]),e.next=14;break;case 10:throw e.prev=10,e.t0=e["catch"](0),C["a"].emitError("Произошла ошибка во время поиска релизов"),e.t0;case 14:return e.prev=14,this.is_loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[0,10,14,17]])})));return function(t){return e.apply(this,arguments)}}(),1e3),toRelease:function(e){e&&(this.$refs.search.setValue(void 0),Object(R["b"])(e.id),this.items=[],this.visible=!1,this._setSearching(!1))}}),watch:{search:{handler:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&e.length>2?(t.getReleases(e),t.$visit("/search?query=".concat(e),"Поиск релиза")):t.items=[];case 1:case"end":return n.stop()}}),n)})))()}}}},A=I,L=n("c6a6"),P=n("adda"),D=n("8270"),N=n("5d23"),M=Object(p["a"])(A,k,O,!1,null,null,null),F=M.exports;f()(M,{VAutocomplete:L["a"],VImg:P["a"],VListItemAvatar:D["a"],VListItemContent:N["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"]});var W=F,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._isAuthorized?[n("v-btn",{attrs:{icon:"",id:"toolbar__profile"}},[e.menu?n("v-icon",{key:"expanded"},[e._v("mdi-account")]):n("v-avatar",{attrs:{size:"28"}},[n("v-img",{attrs:{src:e._profile.avatar}})],1)],1),n("v-menu",{key:"profile",attrs:{bottom:"",activator:"#toolbar__profile","min-width":"100","nudge-left":"70","nudge-bottom":"40"},model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item",[n("v-list-item-avatar",[n("v-img",{attrs:{src:e._profile.avatar}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e._profile.login)}}),n("v-list-item-subtitle",[e._v("ID: "+e._s(e._profile.id))])],1)],1),n("v-divider"),e._l(e.statistics,(function(t,r){return[n("v-list-item",{key:r},[n("v-list-item-content",[n("v-list-item-subtitle",{domProps:{textContent:e._s(t.title)}}),n("v-list-item-title",{staticClass:"font-weight-bold",domProps:{textContent:e._s(t.value)}})],1)],1),n("v-divider",{key:"d:"+r})]})),n("v-list-item",{on:{click:e.logout}},[n("v-list-item-subtitle",[e._v("Выход")])],1)],2)],1)]:[n("v-btn",{attrs:{icon:"",id:"toolbar__login"},on:{click:e.toLogin}},[n("v-icon",[e._v("mdi-account")])],1),n("v-tooltip",{key:"login",attrs:{left:"",activator:"#toolbar__login"}},[e._v("Авторизация")])]],2)},B=[],q=(n("4de4"),n("13d5"),n("07ac"),n("6c6a")),z=n("7b52"),U={data:function(){return{menu:!1,handler:null,loading:!1}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["d"])("app/watch",{_watch:function(e){return e.items}})),Object(c["d"])("favorites",{_favorites:function(e){return e.items}})),Object(c["d"])("app/account",{_profile:function(e){return e.profile}})),Object(c["c"])("app/account",{_isAuthorized:"isAuthorized"})),{},{favorites:function(){return(this._favorites||[]).length},episodes:function(){return Object.values(this._watch||{}).filter((function(e){return e.isSeen})).length},hours:function(){var e=Object.values(this._watch||{}).reduce((function(e,t){return e+(t.time||0)}),0);return Math.floor(e/60/60)},statistics:function(){return[{title:"В избранном",value:Object(z["a"])(this.favorites,["релиз","релиза","релизов"])},{title:"Просмотрено",value:Object(z["a"])(this.episodes,["эпизод","эпизода","эпизодов"])},{title:"Потрачено на просмотр",value:Object(z["a"])(this.hours,["час","часа","часов"])}]}}),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},{toLogin:q["b"]}),Object(c["b"])("app/account",{_logout:"logout",_getProfile:"getProfile"})),{},{logout:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._logout();case 3:return t.prev=3,e.menu=!1,e.loading=!1,t.finish(3);case 7:case"end":return t.stop()}}),t,null,[[0,,3,7]])})))()},getProfile:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,e._getProfile();case 4:t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:return t.prev=8,e.loading=!1,t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,6,8,11]])})))()}}),mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getProfile();case 2:e.handler=setInterval((function(){return e.getProfile()}),72e5);case 3:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.handler&&clearInterval(this.handler)}},G=U,K=n("8212"),Q=n("ce7e"),Y=n("8860"),J=n("da13"),X=n("e449"),Z=Object(p["a"])(G,H,B,!1,null,null,null),ee=Z.exports;f()(Z,{VAvatar:K["a"],VBtn:h["a"],VDivider:Q["a"],VIcon:m["a"],VImg:P["a"],VList:Y["a"],VListItem:J["a"],VListItemAvatar:D["a"],VListItemContent:N["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"],VMenu:X["a"],VTooltip:_["a"]});var te=ee,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-btn",{attrs:{icon:"",id:"toolbar__settings"},on:{click:function(t){return e._setDrawer(!e._drawer)}}},[n("v-icon",[e._v("mdi-settings")])],1),n("v-tooltip",{attrs:{left:"",activator:"#toolbar__settings"}},[e._v("Настройки приложения")])],1)},re=[],ie={computed:Object(o["a"])({},Object(c["d"])("app",{_drawer:"drawer"})),methods:Object(o["a"])({},Object(c["b"])("app",{_setDrawer:"setDrawer"}))},ae=ie,se=Object(p["a"])(ae,ne,re,!1,null,null,null),oe=se.exports;f()(se,{VBtn:h["a"],VIcon:m["a"],VTooltip:_["a"]});var ce=oe,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-badge",{attrs:{overlap:"",bordered:"",dot:"",id:"toolbar__notifications","offset-x":"15","offset-y":"20",value:e.hasUnseenNotifications}},[n("v-btn",{attrs:{icon:""},on:{click:e._setAllNotificationsSeen}},[n("v-icon",[e._v("mdi-bell")])],1)],1),n("v-menu",{attrs:{left:"",activator:"#toolbar__notifications","nudge-bottom":"55","min-width":"400","max-width":"400","max-height":"300"}},[0===e._items.length?n("empty"):n("notifications",{attrs:{items:e._items},on:{"notifications:open":function(t){return e.toVideo(t.release_id,t.episode_id)},"notifications:clear":e._clearNotifications}})],1)],1)},le=[],pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-layout",{staticClass:"pa-4 caption grey--text",attrs:{"align-center":""}},[n("div",{staticClass:"mr-4"},[n("v-icon",{attrs:{color:"grey"}},[e._v("mdi-bell")])],1),n("div",[n("div",[e._v("Пока что здесь нет ни одного уведомления")]),n("div",[e._v("Возможно скоро выйдет что-то интересное ...")])])])],1)},de=[],fe=n("b0af"),he=n("a722"),ve={},me=Object(p["a"])(ve,pe,de,!1,null,null,null),be=me.exports;f()(me,{VCard:fe["a"],VIcon:m["a"],VLayout:he["a"]});var _e=be,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.items&&e.items.length>0?n("v-card",{attrs:{elevation:"12"}},[n("v-layout",{staticClass:"px-4 py-2",attrs:{"align-center":""}},[n("h5",{staticClass:"grey--text"},[e._v("Последние уведомления за неделю")]),n("v-spacer"),n("v-btn",{attrs:{icon:"",color:"grey"},on:{click:function(t){return t.stopPropagation(),e.$emit("notifications:clear")}}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("v-divider"),n("v-list",{attrs:{dense:""}},[e._l(e.items,(function(t,r){return[r>0?n("v-divider",{key:"d:"+r}):e._e(),n("notification",e._b({key:r,on:{click:function(t){return e.$emit("notifications:open",t)}}},"notification",{notification:t},!1))]}))],2)],1):e._e()},ye=[],we=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item",{on:{click:function(t){return e.$emit("click",{release_id:e.release.id,episode_id:e.episode.id})}}},[n("v-list-item-avatar",[n("v-img",e._b({},"v-img",{src:e.src},!1))],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.name)}}),n("v-list-item-subtitle",[e._v("Вышла "+e._s(e.episodeNumber)+" серия")]),n("v-list-item-subtitle",{staticClass:"grey--text text--darken-2",domProps:{textContent:e._s(e.datetime)}})],1)],1)},ke=[],Oe={notification:{type:Object,default:null}},je={props:Oe,computed:{release:function(){return this.$__get(this.notification,"release")},episode:function(){return this.$__get(this.notification,"episode")},src:function(){return this.$__get(this.release,"poster")},name:function(){return this.$__get(this.release,"names.ru")},episodeNumber:function(){return this.$__get(this.episode,"id")},datetime:function(){return this.$moment(this.notification.datetime).fromNow()}}},xe=je,Ee=Object(p["a"])(xe,we,ke,!1,null,null,null),Se=Ee.exports;f()(Ee,{VImg:P["a"],VListItem:J["a"],VListItemAvatar:D["a"],VListItemContent:N["a"],VListItemSubtitle:N["b"],VListItemTitle:N["c"]});var $e=Se,Re={items:{type:Array,default:null}},Ve={props:Re,components:{Notification:$e}},Te=Ve,Ce=n("2fa4"),Ie=Object(p["a"])(Te,ge,ye,!1,null,null,null),Ae=Ie.exports;f()(Ie,{VBtn:h["a"],VCard:fe["a"],VDivider:Q["a"],VIcon:m["a"],VLayout:he["a"],VList:Y["a"],VSpacer:Ce["a"]});var Le=Ae,Pe=n("a1ca"),De={components:{Empty:_e,Notifications:Le},computed:Object(o["a"])(Object(o["a"])({},Object(c["d"])("notifications",{_items:function(e){return e.items||[]}})),{},{hasUnseenNotifications:function(){return this._items.filter((function(e){return!1===e.is_seen})).length>0}}),methods:Object(o["a"])(Object(o["a"])({},{toVideo:Pe["b"]}),Object(c["b"])("notifications",{_clearNotifications:"clearNotifications",_setAllNotificationsSeen:"setAllNotificationsSeen"}))},Ne=De,Me=n("4ca6"),Fe=Object(p["a"])(Ne,ue,le,!1,null,null,null),We=Fe.exports;f()(Fe,{VBadge:Me["a"],VBtn:h["a"],VIcon:m["a"],VMenu:X["a"]});var He=We,Be={components:{Update:w,Search:W,Account:te,Settings:ce,Notifications:He},computed:{hideToolbar:function(){return this.$__get(this.$route,"meta.layout.hide_toolbar")||!1}}},qe=Be,ze=(n("3129"),n("40dc")),Ue=Object(p["a"])(qe,r,i,!1,null,"20ba53de",null),Ge=Ue.exports;f()(Ue,{VAppBar:ze["a"],VBtn:h["a"],VFadeTransition:v["d"],VIcon:m["a"]});t["a"]=Ge},bb33:function(e,t,n){},bf2e:function(e,t,n){},c023:function(e,t,n){},c05b:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n("d3b7");var r=n("a18c"),i="releases",a=function(){return r["a"].push({name:i})};t["a"]=[{name:i,path:"/",meta:{toolbar:{title:"Последние релизы"}},component:function(){return n.e("chunk-0d932a97").then(n.bind(null,"db5e"))}}]},c119:function(e,t,n){"use strict";var r=n("0373"),i=n.n(r);i.a},c79a:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n("8b2d"),i=n("aff4"),a=Object(r["a"])()?n("bdb9"):null,s=function(e,t){return Object(i["a"])()?o(e):Object(i["b"])()?c(t):void 0},o=function(e){if(Object(i["a"])())return e(a)},c=function(e){if(Object(i["b"])())return e(a)}},c81d:function(e,t,n){},c87f:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z})),n.d(t,"b",(function(){return ue}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.settings,(function(t,r){return[n("div",{key:"group:"+r,staticClass:"pa-4 caption",class:t.class},[n("div",{staticClass:"body-1 white--text"},[e._v(e._s(t.title))]),e._l(t.description,(function(t,r){return[n("div",{key:r,staticClass:"grey--text"},[e._v(e._s(t))])]}))],2),e._l(t.fields,(function(t,i){return[t.divider?n("v-divider",{key:"d:"+r+":"+i,style:{paddingBottom:"1px",visibility:"hidden"}}):e._e(),n(t.is,e._b({key:r+":"+i,tag:"component"},"component",t.props,!1))]}))]}))],2)},i=[],a=(n("99af"),n("4de4"),n("96cf"),n("1da1")),s=n("2909"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-text",{staticClass:"pb-2 caption"},[e._v(e._s(e.title))]),n("v-card-text",[n("v-text-field",e._b({attrs:{outlined:"","hide-details":"",autocomplete:"off"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"v-text-field",{type:e.type,label:e.label,suffix:e.suffix,min:e.min},!1))],1)],1)},c=[],u=(n("a9e3"),n("5530")),l=n("2f62"),p={title:{type:String,default:null},suffix:{type:String,default:null},label:{type:String,default:null},path:{type:String,default:null},type:{type:String,default:null},handler:{type:Function,default:null},min:{type:[String,Number],default:null}},d={props:p,computed:{value:{get:function(){return this.path?this.$__get(this.$store,"state.app.settings.".concat(this.path),!1):null},set:function(e){this.path&&this._setValue({k:this.path,v:this.handler?this.handler(e):e})}}},methods:Object(u["a"])({},Object(l["b"])("app/settings",{_setValue:"setSettingsValue"}))},f=d,h=n("2877"),v=n("6544"),m=n.n(v),b=n("b0af"),_=n("99d9"),g=n("8654"),y=Object(h["a"])(f,o,c,!1,null,null,null),w=y.exports;m()(y,{VCard:b["a"],VCardText:_["b"],VTextField:g["a"]});var k=w,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[e.title?n("v-card-subtitle",{staticClass:"pb-0 font-weight-bold"},[e._v(e._s(e.title))]):e._e(),e.subtitle&&e.subtitle.length>0?n("v-card-text",{staticClass:"mt-2 caption"},[e._l(e.subtitle,(function(t,r){return[n("div",{key:r,class:{"pt-2":r>0}},[e._v(e._s(t))])]}))],2):e._e(),n("v-list-item",{staticClass:"py-0",attrs:{dense:""},on:{click:function(){return e.value=!e.value}}},[n("v-list-item-title",[e._v(e._s(e.label))]),n("v-list-item-action",{staticClass:"mr-2"},[n("v-switch",{attrs:{"input-value":e.value},on:{input:function(t){t.stopPropagation(),e.value=t}}})],1)],1),n("v-card-text",{staticClass:"caption pt-1"},[e._l(e.hint,(function(t,r){return[n("div",{key:r},[e._v(e._s(t))])]}))],2)],1)},j=[],x={title:{type:String,default:null},subtitle:{type:Array,default:null},label:{type:String,default:null},path:{type:String,default:null},hint:{type:Array,default:null}},E={props:x,computed:{value:{get:function(){return this.path?this.$__get(this.$store,"state.app.settings.".concat(this.path),!1):null},set:function(e){this.path&&this._setValue({k:this.path,v:e})}}},methods:Object(u["a"])({},Object(l["b"])("app/settings",{_setValue:"setSettingsValue"}))},S=E,$=n("da13"),R=n("1800"),V=n("5d23"),T=n("b73d"),C=Object(h["a"])(S,O,j,!1,null,null,null),I=C.exports;m()(C,{VCard:b["a"],VCardSubtitle:_["a"],VCardText:_["b"],VListItem:$["a"],VListItemAction:R["a"],VListItemTitle:V["c"],VSwitch:T["a"]});var A=I,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-list-item",{attrs:{dense:""},on:{click:e.action}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(e.label)}})],1),n("v-list-item-action",{staticClass:"text-right"},[n("v-list-item-subtitle",{domProps:{textContent:e._s(e.description)}})],1)],1)],1)},P=[],D={label:{type:String,default:null},description:{type:String,default:null},action:{type:Function,default:null}},N={props:D},M=N,F=Object(h["a"])(M,L,P,!1,null,null,null),W=F.exports;m()(F,{VCard:b["a"],VListItem:$["a"],VListItemAction:R["a"],VListItemContent:V["a"],VListItemSubtitle:V["b"],VListItemTitle:V["c"]});var H=W,B=n("8d8d"),q=n("9224"),z=n("609c"),U=n("b314"),G=n("12fe"),K=n("7675"),Q={mixins:[B["c"],B["a"]],computed:{settings:function(){return[].concat(Object(s["a"])(this.playerSettings),Object(s["a"])(this.appSettings),Object(s["a"])(this.adsSettings),Object(s["a"])(this.commandsSettings),Object(s["a"])(this.linksSettings),Object(s["a"])(this.devtoolsSettings)).filter((function(e){return e.visible}))},playerSettings:function(){return[{title:"Воспроизведение релизов",visible:!0,description:["В данном разделе вы можете настроить возможность смотреть релизы, используя торренты, а также другие настройки воспроизведения"],fields:[{is:A,props:{path:"player.torrents.is_enabled",hint:["Использование торрентов требует бОльшего времени подключения и парсинга, что может негативно сказаться на скорости загрузки данных по релизам, особенно — при использовании прокси-сервера"],title:"Торренты",subtitle:["Вы можете подключить торренты, которые автоматически буду связаны с эпизодами релизов и доступны для просмотра.","Торренты не требуют стороннего плеера или клиента и доступны онлайн, в меню выбора качества воспроизведения релиза."],label:"Воспроизводить торренты"},visible:this.isDesktop},{is:A,props:{path:"player.autoplay.is_enabled",hint:["После окончания эпизода плеер автоматически начнет воспроизведение следующего эпизода в релизе при его наличии"],label:"Автовоспроизведение следующего эпизода",class:["mt-2"]},visible:!0},{is:A,props:{path:"player.anime4k.is_enabled",hint:["Использовать современные технологии, модные нейросети и немного черной магии, чтобы утилизировать мощности вашего компьютера и улучшить изображение до 2K и 4К","Веский повод достать с балкона ваши дорогущие 4К мониторы и телевизоры. На остальных поверхностях результат работы нейросетей менее заметен..."],label:"Подключить Anime4K",class:["mt-2"]},visible:!1},{is:A,props:{path:"player.skip_opening.is_enabled",hint:["В интерфейсе плеера появится дополнительная кнопка, которая перемотает плеер на указанное количество секунд","Данная кнопка не гарантирует корректный пропуск опенинга"],label:"Кнопка пропуска опенинга",class:["mt-2"]},visible:!1},{is:k,props:{min:0,path:"player.skip_opening.offset",type:"number",title:"Вы можете указать на сколько секунд пропускать опенинг",label:"Количество секунд для пропуска опенинга",suffix:"сек",handler:function(e){return e&&e>0?parseInt(e):0}},divider:!0,visible:!1}].filter((function(e){return e.visible}))}]},appSettings:function(){return[{class:["mt-6"],title:"Приложение",visible:!0,description:["В данном разделе вы можете настроить автоматическое обновление релизов, системные уведомления и другие параметры приложения"],fields:[{is:A,props:{path:"app.notifications.system",hint:["Если при загрузке последних релизов приложение обнаружит обновленный релиз, то оно покажет системное уведомление о новом эпизоде"],label:"Показывать системные уведомления"}},{is:A,props:{path:"app.releases_updates.is_enabled",hint:["Приложение будет в фоне обновлять последние релизы, даже если оно свернуто"],label:"Автоматическое обновление релизов",class:["mt-2"]}},{is:k,divider:!0,props:{min:1,path:"app.releases_updates.timeout",type:"number",title:"Вы можете указать с какой периодичностью приложение будет обновлять релизы в фоновом режиме",label:"Периодичность обновления релизов",suffix:"мин",handler:function(e){return e&&e>=1?parseInt(e):1}}}]}]},adsSettings:function(){return[{class:["mt-6"],title:"Реклама",visible:!0,description:["Настройка отображения рекламных вставок перед воспроизведением релизов"],fields:[{is:A,props:{path:"ads.is_enabled",hint:["Спасибо, что выбрали Анилибрию!","Мы понимаем, что реклама никому не нравится, но это бесплатный способ поддержать проект.\nОтключение рекламы - абсолютно бесплатно, но, если вы хотите поддержать нас, то оставьте рекламу включенной.\nОбещаем, что не будем сильно навязчивыми (✿◠‿◠)"],label:"Показывать рекламу"}},{is:A,props:{path:"ads.is_maximum",hint:["Максимальная поддержка проекта!","Реклама будет показываться перед каждым просмотром любого эпизода"],label:"Показывать рекламу перед каждым эпизодом",class:["mt-2"]}}]}]},commandsSettings:function(){var e=this;return[{class:["mt-6"],title:"Команды",visible:!0,description:["Некоторые полезные команды для управления приложением"],fields:[{is:H,props:{label:"Свернуть приложение",action:function(){return Object(z["b"])((function(){return window.location.reload()}),(function(){return e.$electron.remote.getCurrentWindow().minimize()}))},description:this.isDesktop?this.shortcuts["minimize"]:null},visible:this.isDesktop},{is:H,props:{label:"Закрыть приложение",action:function(){return Object(z["b"])((function(){return window.close()}),(function(){return e.$electron.remote.getCurrentWindow().close()}))},description:this.isDesktop?this.shortcuts["close"]:null},visible:!0,divider:!0},{is:H,props:{label:"Перезагрузить приложение",action:function(){return Object(z["b"])((function(){return window.location.reload()}),(function(){return e.$electron.remote.getCurrentWindow().reload()}))},description:this.isDesktop?this.shortcuts["reload"]:null},visible:!0,divider:!0}].filter((function(e){return e.visible}))}]},linksSettings:function(){var e=this;return[{class:["mt-6"],title:"Ссылки",visible:!0,description:["Некоторые полезные ссылки"],fields:[{is:H,props:{label:"Анилибрия",action:function(){return Object(z["b"])((function(){return window.open(q["meta"].links.anilibria,"_blank")}),(function(){return e.$electron.shell.openExternal(q["meta"].links.anilibria)}))},description:q["meta"].links.anilibria}},{is:H,props:{label:"Исходный код",action:function(){return Object(z["b"])((function(){return window.open(q["meta"].links.github,"_blank")}),(function(){return e.$electron.shell.openExternal(q["meta"].links.github)}))},description:"anilibrix.git"},divider:!0},{is:H,props:{label:"Telegram-канал",action:function(){return Object(z["b"])((function(){return window.open(q["meta"].links.telegram,"_blank")}),(function(){return e.$electron.shell.openExternal(q["meta"].links.telegram)}))},description:"@anilibrix"},divider:!0},{is:H,props:{label:"Поддержать проект",action:function(){return Object(z["b"])((function(){return window.open(q["meta"].links.donate,"_blank")}),(function(){return e.$electron.shell.openExternal(q["meta"].links.donate)}))},description:"Яндекс.Деньги, QIWI, PayPal"},divider:!0}]}]},devtoolsSettings:function(){var e=this;return[{class:["mt-6"],title:"Отладка",description:["Инструменты отладки и разработки"],visible:this.$store.state.app.settings.app.devtools,fields:[{is:H,props:{label:"Консоль приложения",action:function(){return Object(z["b"])(null,(function(){return U["a"].showAppDevtools()}))},description:"devtools:app"}},{is:H,props:{label:"Консоль торрент-сервера",action:function(){return Object(z["b"])(null,(function(){return U["a"].showTorrentDevtools()}))},description:"devtools:torrent"},divider:!0},{is:H,props:{label:"Показать тестовую ошибку",action:function(){return G["a"].emitError("Тестовая ошибка")}},divider:!0},{is:H,props:{label:"Добавить тестовое уведомление о новом релизе",action:function(){var t=e.$__get(e.$store.state,"releases.data")||[],n=Math.round(Math.random()*t.length),r=t&&t[n]?t[n]:null,i=r&&r.episodes[0]?r.episodes[0]:null;e.$store.dispatch("notifications/addNotification",{release:r,episode:i}),K["a"].emitNotification({release:r,episode:i})}},divider:!0},{is:H,props:{label:"Показать данные хранилища в консоли",action:function(){return console.log(e.$store.state)}},divider:!0},{is:H,props:{label:"Полностью сбросить store",action:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("RESET_STORE");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},divider:!0}]}]},shortcuts:function(){return{close:this.isMac?"⌘ + Q":"Alt + Q",reload:this.isMac?"⌘ + ⇧ + R":"Ctrl + Shift + R",minimize:this.isMac?"⌘ + M":"Ctrl + M"}}}},Y=Q,J=n("ce7e"),X=Object(h["a"])(Y,r,i,!1,null,null,null),Z=X.exports;m()(X,{VDivider:J["a"]});var ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("drawer",{attrs:{app:"",right:"",fixed:"",temporary:"",width:"400"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-toolbar",[n("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!1}}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",{staticClass:"body-1"},[e._v("Настройки приложения")])],1),n("app-settings"),n("app-settings-credentials",{staticClass:"py-4"})],1)},te=[],ne=n("db9a"),re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mt-auto py-3 credentials__data",attrs:{flat:"",color:"transparent"}},[n("v-card-text",{staticClass:"caption"},[n("v-layout",{attrs:{column:""}},[n("div",[e._v("Версия "),n("b",[e._v(e._s(e.app.version))])]),e.isWeb?n("div",[e._v("Сборка "),n("b",[e._v(e._s(e.app.build))])]):e._e()]),n("div",[e._v("Весь материал в приложении представлен исключительно для домашнего ознакомительного просмотра")]),e.isDesktop?n("v-layout",{staticClass:"with-divider"},[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.showAbout(t)}}},[e._v("О приложении")]),n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleDevtools(t)}}},[e._v("Инструменты отладки")])]):e._e()],1)],1)},ie=[],ae={mixins:[B["a"]],computed:{app:function(){return{build:Math.round(new Date(document.lastModified).getTime()/1e3),version:q.version}},anilibria:function(){return q.meta.links.anilibria},github:function(){return q.meta.links.github}},methods:Object(u["a"])(Object(u["a"])({},Object(l["b"])("app/settings",{_setValue:"setSettingsValue"})),{},{showAbout:function(){U["a"].showAbout()},toggleDevtools:function(){this._setValue({k:"app.devtools",v:!this.$__get(this.$store,"state.app.settings.app.devtools",!1)})}})},se=ae,oe=(n("33e2"),n("a722")),ce=Object(h["a"])(se,re,ie,!1,null,"771ed6e4",null),ue=ce.exports;m()(ce,{VCard:b["a"],VCardText:_["b"],VLayout:oe["a"]});var le={mixins:[B["c"]],components:{Drawer:ne["a"],AppSettings:Z,AppSettingsCredentials:ue},computed:Object(u["a"])(Object(u["a"])({},Object(l["d"])("app",{_drawer:function(e){return e.drawer}})),{},{drawer:{get:function(){return!!this._drawer},set:function(e){this._setDrawer(e)}}}),methods:Object(u["a"])({},Object(l["b"])("app",{_setDrawer:"setDrawer"}))},pe=le,de=n("5bc1"),fe=n("132d"),he=n("71d9"),ve=n("2a7f"),me=Object(h["a"])(pe,ee,te,!1,null,null,null),be=me.exports;m()(me,{VAppBarNavIcon:de["a"],VIcon:fe["a"],VToolbar:he["a"],VToolbarTitle:ve["a"]});t["c"]=be},c8b0:function(e,t,n){},cf10:function(e,t,n){},d19b:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n("d3b7");var r=n("a18c"),i="catalog",a=function(){return r["a"].push({name:i})};t["a"]=[{name:i,path:"/catalog",props:!0,component:function(){return n.e("chunk-98f043d4").then(n.bind(null,"33dc"))}}]},d9ff:function(e,t,n){"use strict";var r=n("bb33"),i=n.n(r);i.a},db9a:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",e._b({staticClass:"drawer",class:{"drawer--mobile":this.isMobile},style:{zIndex:e.zIndex,top:e.offset,paddingBottom:e.offset},attrs:{stateless:this.isMobile},on:{input:function(t){return e.$emit("input",t)}}},"v-navigation-drawer",Object.assign({},{value:e.value,width:e.width},e.$attrs),!1),[e._t("default"),e.$slots["footer"]?n("div",{staticClass:"caption grey--text px-4 my-4"},[e._t("footer")],2):e._e()],2)},i=[],a=(n("a9e3"),n("8d8d")),s={value:{type:Boolean,default:!1},width:{type:String,default:"350"},zIndex:{type:[String,Number],default:null}},o={props:s,mixins:[a["a"],a["c"],a["b"]],computed:{offset:function(){return this.isDesktop?this.heightOffset:null}}},c=o,u=(n("92fb"),n("2877")),l=n("6544"),p=n.n(l),d=n("f774"),f=Object(u["a"])(c,r,i,!1,null,"578cc092",null),h=f.exports;p()(f,{VNavigationDrawer:d["a"]});t["a"]=h},de0d:function(e,t,n){"use strict";var r=n("e036"),i=n.n(r);i.a},e036:function(e,t,n){},e68c:function(e,t,n){"use strict";n.d(t,"b",(function(){return a}));n("d3b7");var r=n("a18c"),i="blank",a=function(e){return r["a"].push({name:i,params:{message:e}})};t["a"]=[{name:i,path:"/blank",meta:{layout:{hide_scroll:!0,hide_toolbar:!0}},props:!0,component:function(){return n.e("chunk-f6be8f88").then(n.bind(null,"3449"))}}]},f382:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("5530"),i=(n("96cf"),n("1da1")),a=n("d4ec"),s=n("bee2"),o=n("262e"),c=n("2caf"),u=n("7372"),l=n("0699"),p=function(e){Object(o["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.apply(this,arguments)}return Object(s["a"])(n,[{key:"getReleases",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n,i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.t0=l["a"],e.next=4,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",Object(r["a"])(Object(r["a"])({},t),{},{data:this.prepareFormData({query:"list",perPage:15})}));case 4:return e.t1=e.sent,n=(0,e.t0)(e.t1),i=n.items,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRelease",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.t0=l["a"],e.next=4,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",Object(r["a"])(Object(r["a"])({},n),{},{data:this.prepareFormData({query:"release",id:t})}));case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchReleases",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:{},e.t0=l["a"],e.next=4,this.submit("POST",this.getApiV1Endpoint()+"/public/api/index.php",{data:this.prepareFormData({search:t,query:"search",limit:10})});case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getReleaseTorrent",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,i,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},!t){e.next=7;break}return e.next=4,this.submit("GET",this.getStaticEndpoint()+t,Object(r["a"])(Object(r["a"])({},n),{},{responseType:"arraybuffer"}));case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=null;case 8:return i=e.t0,e.abrupt("return",i?i.data:null);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getReleasePosterPath",value:function(e){return e?this.getStaticEndpoint()+e:null}}]),n}(u["a"])},f6c4:function(e,t,n){},f788:function(e,t,n){"use strict";var r=n("82b9"),i=n.n(r);i.a},f9c8:function(e,t,n){"use strict";var r=n("9760"),i=n.n(r);i.a},ffba:function(e,t,n){"use strict";var r=n("58a6");t["a"]=r["d"]}});
//# sourceMappingURL=index.1f67068b.js.map